import{j as ve,r as d,C as _e,z as lt,t as H,u as it,c as st,R as ne,a as V,b as Ce,d as de,M as ct,B as ge,L as E,e as j,m as O,F as dt,f as ut,T as w,G as mt,g as ht,h as x,D as ee,S as N,i as G,A as xe,P as pt,k as gt,l as h,n as ft,o as yt,p as q,q as ae,s as bt,v as kt,w as vt,U as Ct,E as Se,x as xt,y as ze,H as te,I as K,J as Q,K as Ie,N as I,O as re,Q as je,V as Me,W as Ye,X as St,Y as It,Z as Mt,_ as Tt,$ as qe,a0 as Pt,a1 as _,a2 as S,a3 as oe,a4 as pe,a5 as wt,a6 as Nt,a7 as Lt,a8 as z,a9 as Ee,aa as At,ab as Ae,ac as fe,ad as Ve,ae as Ft,af as Ut,ag as We,ah as $t,ai as Je,aj as Ge,ak as Dt,al as Te,am as Rt,an as Ot,ao as le,ap as Bt,aq as Ht,ar as Qe,as as Kt,at as _t,au as zt,av as Fe,aw as P,ax as W,ay as Ue,az as jt,aA as Yt}from"./vendor-dab5b6eb.js";(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))a(l);new MutationObserver(l=>{for(const o of l)if(o.type==="childList")for(const u of o.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&a(u)}).observe(document,{childList:!0,subtree:!0});function r(l){const o={};return l.integrity&&(o.integrity=l.integrity),l.referrerPolicy&&(o.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?o.credentials="include":l.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function a(l){if(l.ep)return;l.ep=!0;const o=r(l);fetch(l.href,o)}})();const $=ve.Fragment,e=ve.jsx,s=ve.jsxs,$e=[{label:"控制台",type:"group",children:[{label:"控制台",icon:"icon-dashboard",path:"/dashboard"}]},{label:"示例页面",type:"group",children:[{label:"列表页",icon:"icon-list",path:"/example/userList"},{label:"多级菜单",icon:"icon-list",path:"/multilevel/menu",children:[{label:"二级菜单",icon:"icon-list",path:"/multilevel/menu/2",children:[{label:"三级菜单",icon:"icon-list",path:"/multilevel/menu/2/3"}]}]},{label:"空白页",icon:"icon-example",path:"/blank"},{label:"404",icon:"icon-example",path:"/404"}]},{label:"徽标示例",type:"group",children:[{label:"红点徽标",icon:"icon-list",badge:"dot",path:"/blank"},{label:"数字徽标",icon:"icon-example",badge:98,path:"/blank"}]},{type:"divider"},{path:"/article",label:"文章管理",icon:"icon-article",children:[{path:"/article/list",label:"文章列表",icon:"icon-article"},{path:"/article/create",label:"发布文章",hideInMenu:!0,parent:"/article/list"},{path:"/article/update",label:"更新文章",hideInMenu:!0,parent:"/article/list"},{path:"/article/category",label:"分类管理",icon:"icon-list"}]},{path:"/iframe",label:"外部页面",icon:"icon-href",children:[{path:"https://ant-design.antgroup.com/components/overview-cn/",label:"antd文档(外链)",icon:"icon-document",key:"webpage-antd-document",type:"url"},{path:"https://ant-design.antgroup.com/components/overview-cn/",label:"antd文档(内嵌)",icon:"icon-document",type:"iframe"},{path:"https://www.xstnet.com",label:"博客主页(内嵌)",icon:"icon-document",type:"iframe"}]},{path:"/document",label:"文档",icon:"icon-document",children:[{path:"/document/start",label:"开始使用",icon:"icon-document"},{path:"/document/package.json",label:"Package文件说明",icon:"icon-document"}]},{type:"divider"},{path:"/user/center",label:"个人中心",icon:"icon-user-permissions",children:[{path:"/user/center/index",label:"个人中心",icon:"icon-example"},{path:"/user/center/update",label:"修改信息",icon:"icon-document"}]}];function Xe(t){return!!(typeof t.children>"u"||Array.isArray(t.children)&&t.children.length===0)}function ce(t){return ue(t)?!1:!!(typeof t.children<"u"&&Array.isArray(t.children)&&t.children.length>0)}function Pe(t){return typeof t.path=="string"&&typeof t.label=="string"}function ue(t){return typeof t.type<"u"&&t.type==="group"}function qt(t){return typeof t.type<"u"&&t.type==="divider"}const Et=void 0,Z=d.createContext(Et),Vt=({children:t})=>{let n=0;const r=d.useMemo(()=>$e,[$e]),[a,l]=d.useState(r),[o,u]=d.useState(!1),{mapPathToMenu:i,mapKeyToMenu:m,processedMenuList:c}=d.useMemo(()=>(()=>{const k=new Map,v=new Map,y=T=>(T.key||(T.key=String(++n)),{...T}),M=T=>T.map(f=>{const b=y(f);return(ce(b)||ue(b))&&(b.children=M(b.children||[])),Pe(b)&&v.set(b.path,b),b!=null&&b.key&&k.set(b.key,b),b});return{processedMenuList:M(a),mapKeyToMenu:k,mapPathToMenu:v}})(),[a]),p=d.useMemo(()=>({menuList:c,setMenuList:l,menuCollapsed:o,setMenuCollapsed:u,mapPathToMenu:i,mapKeyToMenu:m}),[a,o]);return e(Z.Provider,{value:p,children:t})},D={pageTitle:"后台管理系统模板",pageTitlePrefix:"后台管理",tokenKey:"Authorization",apiBaseUrl:"https://xstnet.github.io/react-admin-template/api",iconFontUrl:"//at.alicdn.com/t/c/font_3917407_bcpftwh4y79.js"};function Wt(t,n){localStorage.setItem(t,typeof n=="object"?JSON.stringify(n):n)}function Jt(t){localStorage.setItem(D.tokenKey,typeof t=="object"?JSON.stringify(t):t)}function Ze(t){return localStorage.getItem(t)}function Gt(t){const n=localStorage.getItem(t);if(n!==null)return Number(n)}function Qt(t){const n=localStorage.getItem(t);if(n!==null)return n==="true"}function Xt(t){const n=localStorage.getItem(t);if(n!==null)return JSON.parse(n)}function Zt(t){return Ze(t)!==null}function en(t){localStorage.removeItem(t)}function tn(){localStorage.removeItem(D.tokenKey)}function nn(){localStorage.clear()}const L={set:Wt,setToken:Jt,has:Zt,getString:Ze,getObject:Xt,getBoolean:Qt,getNumber:Gt,remove:en,removeToken:tn,clear:nn},et=()=>{const[t,n]=d.useState(window.matchMedia("(prefers-color-scheme: dark)").matches);return d.useEffect(()=>{const a=l=>{console.log("chage",l.matches),l.matches?n(!0):n(!1)};return window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",a),()=>{window.matchMedia("(prefers-color-scheme: dark)").removeEventListener("change",a)}},[]),[t?"dark":"light"]},rn=void 0,an=d.createContext(rn),on=({children:t})=>{const{settings:{primaryColor:n,theme:r,compactMode:a,followSystemTheme:l}}=d.useContext(Y),[o]=et(),u={},i=()=>{const m=[];return l?m.push(o==="light"?H.defaultAlgorithm:H.darkAlgorithm):m.push(r==="light"?H.defaultAlgorithm:H.darkAlgorithm),console.log("algorighm",r,m),a&&m.push(H.compactAlgorithm),m};return e(an.Provider,{value:u,children:e(_e,{locale:lt,theme:{algorithm:i(),token:{colorPrimary:n},components:{Button:{borderRadius:4,borderRadiusSM:2},Modal:{borderRadius:4,borderRadiusOuter:2}}},children:t})})},ln=void 0,Y=d.createContext(ln),sn=({children:t})=>{const n=d.useMemo(()=>{const u=L.getObject("settings")||{};return console.log("settingsCache",u),{theme:"light",compactMode:!1,followSystemTheme:!1,fixedHeader:!0,fixedMenu:!0,showFooter:!0,primaryColor:"#00b96b",...u}},[]),[r,a]=d.useState(n),l=d.useCallback(u=>{const i={...r,...u};a(i),L.set("settings",i)},[r]),o={settings:r,setSetting:l};return e(Y.Provider,{value:o,children:e(on,{children:t})})},cn=void 0,me=d.createContext(cn),dn=({children:t})=>{const[n,r]=d.useState(!1),[a,{toggleFullscreen:l}]=it(document.body),[o,u]=d.useState(null),i=d.useMemo(()=>({isLogin:n,setIsLogin:r,userInfo:o,setUserInfo:u,fullScreen:a,setFullScreen:l}),[n,o,a]);return e(me.Provider,{value:i,children:e(sn,{children:e(Vt,{children:t})})})},U=st({scriptUrl:D.iconFontUrl,extraCommonProps:{}}),we="/iframe",tt=t=>`${we}?url=${t}`,un=()=>{var k;const t=V(),n=Ce(),{menuList:r,mapKeyToMenu:a,mapPathToMenu:l}=d.useContext(Z);let o=((k=l.get("/dashboard"))==null?void 0:k.key)||"",u=[],i=!1;const{pathname:m}=n,[c]=de(),p=v=>{const y=a.get(v.key);if(console.log("mapKeyToMenu",a),console.log("clicked menu",v,y),!y){console.warn("未获取到菜单信息");return}if(y.path!==m){if((y==null?void 0:y.type)==="url"){window.open(y.path,"_blank");return}if(document.title=`${D.pageTitlePrefix} - ${y.label}`,(y==null?void 0:y.type)==="iframe"){console.log("打开iframe页面"),t(tt(y.path));return}t(y.path)}},g=d.useMemo(()=>{const v=M=>M.badge?M.badge==="dot"?e(ge,{className:"menu-item-badge",offset:[6,0],dot:!0,children:M.label}):e(ge,{className:"menu-item-badge",offset:[15,0],count:M.badge,children:M.label}):M.label,y=(M,C)=>{const T=[];return!i&&C&&u.push(C.key),M.map(f=>{var Le;if(Pe(f)&&(f.parent&&m.indexOf(f.path)===0&&(o=((Le=l.get(f.parent))==null?void 0:Le.key)||"",i=!0),f.type==="iframe"&&(c.get("url")||"")===f.path&&(i=!0,o=f.key),f.hideInMenu))return;let b;if(qt(f))b={...f};else if(ue(f))b={...f},f.children&&f.children.length>0&&(b.children=y(f.children));else if(ce(f)||Xe(f)){let{icon:J}=f;typeof J=="string"&&J.includes("icon-")&&(J=e(U,{type:J})),b={key:"",...f,icon:J,label:v(f),children:ce(f)?y(f.children,f):void 0},!i&&f.path===m&&(o=f.key,i=!0)}b&&(b.key=b.key,T.push(b))}),!i&&u.pop(),T};return y(r)},[r]);return e(ct,{style:{height:"100%"},onClick:p,mode:"inline",defaultSelectedKeys:[o],items:g,defaultOpenKeys:u})},mn=ne.memo(un),he=()=>{const{token:t}=H.useToken();return t},hn=()=>{const{menuCollapsed:t}=d.useContext(Z),{colorBgContainer:n}=he();return e(E.Sider,{style:{background:n},trigger:null,className:"left-sider",collapsible:!0,collapsed:t,children:e(mn,{})})};var ye=(t=>(t[t.success=0]="success",t[t.noLogin=-10001]="noLogin",t[t.loginExpired=-10002]="loginExpired",t))(ye||{}),nt=(t=>(t[t.male=1]="male",t[t.female=2]="female",t))(nt||{}),B=(t=>(t[t.incomplete=1]="incomplete",t[t.completed=2]="completed",t[t.deleted=10]="deleted",t))(B||{}),Ne=(t=>(t.day="YYYY-MM-DD",t.second="YYYY-MM-DD HH:mm:ss",t.minute="YYYY-MM-DD HH:mm",t.hour="YYYY-MM-DD HH",t))(Ne||{});function rt(){}function X(t,n){return Math.floor(Math.random()*(n-t+1))+t}const pn=10*1e3;j.defaults.baseURL=D.apiBaseUrl;j.defaults.headers.post["Content-Type"]="application/json; charset=utf-8";j.defaults.timeout=pn;j.interceptors.request.use(t=>(console.group(`${t.method}${t.url}${JSON.stringify(t.params)}`),t.headers.Authorization=`Bearer ${L.getString(D.tokenKey)}`,t),t=>Promise.reject(t));j.interceptors.response.use(t=>{const n=t.data;return typeof n.code!="number"?(O.error("系统错误",2),console.warn("api调用失败, 未正常返回数据, url:",t.config.url,"data:",n,"response:",t),console.groupEnd(),Promise.reject(t)):(console.log("Request log: ",t.config.url,t.data,t),console.groupEnd(),n.code===0?(t.config.method==="post"&&O.success(t.data.message),t):n.code===ye.noLogin?(O.error("您还没有登录, 即将跳转到登录页面, 请稍后..."),L.remove(D.tokenKey),location.reload(),Promise.reject(n)):n.code===ye.loginExpired?(O.error("登录已失效, 即将跳转到登录页面..."),L.remove(D.tokenKey),location.reload(),Promise.reject(n)):(O.error(n.message),Promise.reject(t)))},t=>(typeof t.message=="string"&&t.message==="Network Error"?O.error("网络错误, 请稍后再试!"):O.error("请求失败, 请稍后再试"),console.log("Request error",t),console.groupEnd(),Promise.reject(t)));const gn=(t,n,r)=>{const a=r||{};return a.params=n,j.get(t,a)},fn=(t,n,r)=>j.post(t,n,r),yn=t=>j.request(t),A={get:gn,post:fn,request:yn},F=t=>t.then(n=>Promise.resolve(n.data.data)).catch(n=>Promise.reject(n)),bn=t=>{const n=A.post("/login",t);return F(n)},kn=t=>F(A.get("/user/info",t)),vn=t=>F(A.post("/user/logout",t)),Cn=(t,n)=>F(A.get("/user/list",{...t,...n})),xn=t=>F(A.post("/user/create",t)),Sn=t=>F(A.post("/user/update",t)),In=t=>F(A.post("/user/delete",t)),Mn=(t,n)=>F(A.get("/article/list",{...t,...n})),Tn=t=>F(A.get("/article/detail",t)),Pn=t=>F(A.post("/article/create",t)),wn=t=>F(A.post("/article/update",t)),Nn=t=>F(A.post("/article/delete",t)),Ln=()=>{const{fullScreen:t,setFullScreen:n}=d.useContext(me),r=()=>{O.success(t?"已退出全屏模式":"进入全屏模式"),n(!t)};return t?e(dt,{title:"退出全屏模式",className:"action-icon",onClick:r}):e(ut,{title:"进入全屏模式",className:"action-icon",onClick:r})},An=()=>e(w.Link,{className:"action-icon",target:"_blank",style:{color:"inherit"},href:"https://github.com/xstnet/react-admin-template",children:e(mt,{})}),Fn=()=>{const t=()=>e(G,{size:"small",itemLayout:"horizontal",dataSource:[{title:"您有一封新的邮件",type:"mail"},{title:"您有3个订单待支付",type:"payment"},{title:"张三 的请假申请需要您的审批",type:"workflow"},{title:"本周周报待填写",type:"common"}],renderItem:(l,o)=>e(G.Item,{children:e(G.Item.Meta,{avatar:e(U,{style:{fontSize:30},type:`icon-${l.type}`}),title:e("a",{href:"https://ant.design",children:l.title}),description:"3天前"})})}),n=()=>e(G,{size:"small",itemLayout:"horizontal",dataSource:[{title:"张三 评论了你",desc:"评论内容评论内容评论内容评论内容"},{title:"您有3个订单待支付",desc:"评论内容评论内容评论内容评论内容"},{title:"张三 的请假申请需要您的审批",desc:"评论内容评论内容评论内容评论内容"},{title:"本周周报待填写",desc:s("div",{children:["评论内容评论内容评论内容",e("br",{}),"三天前"]})}],renderItem:(l,o)=>e(G.Item,{children:e(G.Item.Meta,{avatar:e(xe,{src:`https://joesch.moe/api/v1/random?key=${o}`}),title:e("a",{href:"https://ant.design",children:l.title}),description:l.desc})})}),r=[{key:"notify",label:"通知(3)",children:t()},{key:"message",label:"消息(4)",children:n()}];return s($,{children:[e(ht,{centered:!0,style:{width:300},defaultActiveKey:"notify",items:r,onChange:void 0,tabBarExtraContent:e(x,{type:"link",style:{marginRight:10},children:"清空"})}),e(ee,{style:{margin:"8px 0"}}),s(N,{split:e(ee,{type:"vertical"}),style:{width:"100%",justifyContent:"center",marginBottom:0},children:[e(x,{type:"link",children:"全部已读"}),e(x,{type:"link",children:"查看更多"})]})]})},Un=t=>e(ge,{count:98,children:e(pt,{arrow:!1,content:e(Fn,{}),placement:"bottomRight",trigger:"click",children:e(U,{title:"通知提醒",type:"icon-notify",className:"action-icon"})})}),$n=()=>e(U,{title:"搜索",type:"icon-search",className:"action-icon"}),Dn=()=>{const{settings:{theme:t},setSetting:n}=d.useContext(Y),r=()=>{n({followSystemTheme:!1,theme:t==="light"?"dark":"light"})};return t==="dark"?e(U,{onClick:r,title:"主题-深色模式",type:"icon-theme-dark",className:"action-icon"}):e(U,{onClick:r,title:"主题-明亮模式",type:"icon-theme-light",className:"action-icon"})};const Rn=t=>{const n=["#1890ff","#722ed1","#eb2f96","#00b96b","#52c41a","#13c2c2","#1677ff","#f5222d","#fa8c16","#faad14"],{onChange:r,presetColors:a=n,defaultSelectedColor:l=""}=t,{value:o=l}=t,[u,i]=d.useState(o),m=c=>{i(c),r==null||r(c)};return e("div",{className:"theme-color-wrap",children:a.map(c=>e("div",{onClick:()=>m(c),className:"theme-color-item",style:{backgroundColor:c},title:c,children:u===c&&e(gt,{className:"checked-icon"})},c))})},On=t=>{const{open:n,onClose:r=rt}=t,{settings:a,setSetting:l}=d.useContext(Y),[o]=h.useForm(),[u]=et(),i=d.useMemo(()=>({...a,theme:a.followSystemTheme?"followSystem":a.theme}),[a]),m=(c,p)=>{const g={...c},{theme:k,fixedMenu:v,fixedHeader:y}=g;k&&(console.log("themeee",k),g.followSystemTheme=!1,k==="followSystem"&&(g.followSystemTheme=!0,g.theme=u)),v&&(g.fixedHeader=!0),y===!1&&(g.fixedMenu=!1),l(g),console.log("chage",c,p)};return ft(()=>{o==null||o.setFieldsValue(i)},[i]),e(yt,{title:"偏好设置",onClose:r,open:n,children:s(h,{name:"basic",labelCol:{span:5},wrapperCol:{span:19},initialValues:{...i},autoComplete:"off",onValuesChange:m,form:o,children:[e(h.Item,{label:"外观",name:"theme",children:s(q.Group,{buttonStyle:"solid",children:[s(q.Button,{value:"light",children:[e(U,{type:"icon-theme-light"})," 浅色"]}),s(q.Button,{value:"dark",children:[e(U,{type:"icon-theme-dark"})," 深色"]}),s(q.Button,{value:"followSystem",children:[e(U,{type:"icon-followSystem"})," 跟随系统"]})]})}),e(h.Item,{label:"紧凑模式",valuePropName:"checked",name:"compactMode",children:e(ae,{checkedChildren:"开启",unCheckedChildren:"关闭"})}),e(h.Item,{label:"主题色",name:"primaryColor",children:e(Rn,{defaultSelectedColor:a.primaryColor})}),e(ee,{children:"布局"}),e(h.Item,{label:"固定头部",valuePropName:"checked",name:"fixedHeader",children:e(ae,{checkedChildren:"开启",unCheckedChildren:"关闭"})}),e(h.Item,{help:"固定菜单启用时, 头部也会同步固定",label:"固定菜单",valuePropName:"checked",name:"fixedMenu",children:e(ae,{checkedChildren:"开启",unCheckedChildren:"关闭"})}),e(h.Item,{valuePropName:"checked",label:"显示页脚",name:"showFooter",children:e(ae,{checkedChildren:"开启",unCheckedChildren:"关闭"})})]})})},Bn=t=>{const[n,r]=d.useState(!1);return s("div",{children:[e(On,{open:n,onClose:()=>{r(!1)}}),e(U,{onClick:()=>{r(!0)},title:"设置",type:"icon-setting",className:"action-icon"})]})},Hn=()=>{const{userInfo:t,setUserInfo:n,setIsLogin:r}=d.useContext(me),{menuCollapsed:a,setMenuCollapsed:l}=d.useContext(Z),{token:{colorBgContainer:o}}=H.useToken(),u=V(),i=()=>s("div",{className:"left",children:[s("div",{className:"logo",children:[e(U,{type:"icon-react",className:"logo-img"}),e("span",{className:"logo-text",children:"React Admin Template"})]}),e("div",{children:ne.createElement(a?bt:kt,{onClick:()=>l(!a)})})]}),m=()=>{const c=()=>s($,{children:[e($n,{}),e(Un,{}),e(Ln,{}),e(An,{}),e(Dn,{}),e(Bn,{})]}),p=[{label:e("a",{children:"个人中心"}),icon:e(Ct,{}),key:"userCenter"},{label:e("a",{children:"修改资料"}),key:"update",icon:e(Se,{})},{type:"divider"},{label:"退出",icon:e(xt,{}),key:"logout",onClick:()=>{vn().then(()=>{L.removeToken(),r(!1),n(null),u("/login")})}}];return e("div",{className:"right",children:s(N,{size:"middle",children:[c(),e(vt,{menu:{items:p},children:s(N,{className:"pointer",children:[e("span",{children:t==null?void 0:t.nickname}),e(xe,{src:t==null?void 0:t.avatar})]})})]})})};return e(E.Header,{className:"header",style:{background:o},children:s($,{children:[i(),m()]})})},Kn=ne.memo(Hn),_n=[[2,1,"刚刚"],[60,1,"%d秒前"],[3600,60,"%d分钟前"],[86400,3600,"%d小时前"],[86400*30,3600*24,"%d天前"],[86400*30*12,3600*24*30,"%d月前"],[1/0,3600*24*30*12,"%d年前"]],zn=[[-60,1,"%d秒后"],[-3600,60,"%d分钟后"],[-86400,3600,"%d小时后"],[-(86400*30),3600*24,"%d天后"],[-(86400*30*12),3600*24*30,"%d月后"],[-1/0,3600*24*30*12,"%d年后"]],jn=({time:t})=>{const n=Math.floor(new Date().getTime()/1e3),r=Math.floor(new Date(t).getTime()/1e3),a=n-r;if(isNaN(r))return e($,{children:"time"});const l=a<-1?zn:_n;let o="";for(const[u,i,m]of l)if(Math.abs(a)<Math.abs(u)){const c=Math.floor(Math.abs(a)/i);o=m.replace("%d",String(c));break}return e(ze,{title:t,children:e("span",{children:o})})},Yn=()=>{const t=[{title:"昵称",dataIndex:"nickname",key:"nickname"},{title:"登录IP",dataIndex:"loginIp",key:"loginIp"},{title:"登录时间",dataIndex:"create_time",key:"create_time",render:r=>e(jn,{time:r})}],n=Array(5).fill({id:X(10,1e5),userId:1,loginIp:"127.0.0.1",nickname:"admin",create_time:te().subtract(3,"second").format(Ne.second)});return e(K,{title:"登录历史",extra:e(Q,{to:"/",children:"查看更多"}),children:e(Ie,{rowKey:()=>X(10,1e5),pagination:!1,size:"small",columns:t,dataSource:n})})},qn=w.Text,ie=()=>te().format(Ne.second),En=()=>{const[t,n]=d.useState(0),{colorError:r}=he(),[a,l]=d.useState([{id:X(100,1e9),name:"多tab布局支持",status:B.incomplete,create_time:ie(),update_time:ie()},{id:1,name:"这是一个todo例子",status:B.completed,create_time:ie(),update_time:ie()}]),[o,u]=d.useState(""),i=()=>{o&&(l([{name:o,status:B.incomplete,id:X(100,1e9),create_time:te().format("YYYY-MM-DD HH:MM:SS"),update_time:te().format("YYYY-MM-DD HH:MM:SS")},...a]),u(""))},m=(g,k)=>{l(a.map(v=>v.id!==g?v:{...v,status:k?B.completed:B.incomplete}))},c=(g,k)=>{console.log("iii",g,k),l(a.map(v=>v.id!==g?v:{...v,name:k}))},p=g=>{l(a.filter(k=>k.id!==g))};return e(K,{title:"待办事项",children:s(N,{direction:"vertical",style:{width:"100%"},children:[s(N.Compact,{style:{width:"100%",marginBottom:"16px"},children:[e(I,{value:o,onChange:g=>u(g.target.value),placeholder:"添加新事项",onPressEnter:i}),e(x,{onClick:i,type:"primary",icon:e(re,{})})]}),a.map(({id:g,status:k,name:v})=>{const y=k===B.completed,M=t===g&&k===B.incomplete;return e(je,{onChange:({target:{checked:C}})=>m(g,C),checked:y,children:e(qn,{type:y?"secondary":void 0,delete:y,onMouseEnter:()=>n(g),onMouseLeave:()=>n(0),editable:M?{onChange:C=>c(g,C)}:!1,children:s(N,{children:[v,M&&e(ze,{title:"删除",children:e(Me,{onClick:()=>p(g),style:{color:r}})})]})})},g)})]})})},Vn=()=>{const[t,n]=d.useState("pv"),r=[{tab:"访问量",key:"pv"},{tab:"IP",key:"ip"}],a={pv:{stroke:"#8884d8",fill:"#b5b1e6"},ip:{stroke:"#00b96b",fill:"#82ca9d"}},l=Array.from({length:7}).map((o,u)=>({name:te().subtract(u+1,"day").format("MM-DD"),pv:X(1e3,1e4),ip:X(100,1e3)})).reverse();return e(K,{activeTabKey:t,onTabChange:o=>n(o),tabList:r,children:e(Ye,{width:"100%",height:300,children:s(St,{data:l,children:[e(It,{strokeDasharray:"3 3"}),e(Mt,{dataKey:"name"}),e(Tt,{}),e(qe,{wrapperStyle:{outline:"none"}}),e(Pt,{type:"monotone",strokeWidth:2,dataKey:t,stroke:a[t].stroke,fill:a[t].fill})]})})})},De=[{name:"视频类",value:400},{name:"图文类",value:300},{name:"资讯类",value:300}],Re=()=>e($,{children:s("div",{children:[s(_,{gutter:24,children:[e(S,{span:6,children:e(K,{bordered:!1,children:e(oe,{title:"今日销售额",value:126560,precision:2,prefix:"$"})})}),e(S,{span:6,children:e(K,{bordered:!1,children:e(oe,{title:"示例指标",value:11.28,precision:2,prefix:e(pe,{}),suffix:"%"})})}),e(S,{span:6,children:e(K,{bordered:!1,children:e(oe,{title:"示例指标",value:11.28,precision:2,prefix:e(pe,{}),suffix:"%"})})}),e(S,{span:6,children:e(K,{bordered:!1,children:e(oe,{title:"示例指标",value:11.28,precision:2,valueStyle:{color:"#3f8600"},prefix:e(pe,{}),suffix:"%"})})})]}),e("br",{}),s(_,{gutter:16,children:[e(S,{span:18,style:{height:300},children:e(Vn,{})}),e(S,{span:6,children:e(K,{title:"内容占比",children:e(Ye,{width:"100%",height:300,children:s(wt,{width:400,height:400,children:[e(Nt,{data:De,dataKey:"value",nameKey:"name",cx:"50%",cy:"50%",outerRadius:90,label:!0,children:De.map((t,n)=>e(Lt,{fill:["#0088FE","#00C49F","#FFBB28"][n%3]},`cell-${n}`))}),e(qe,{wrapperStyle:{outline:"none"}})]})})})})]}),e("br",{}),s(_,{gutter:16,children:[e(S,{span:12,children:e(En,{})}),e(S,{span:12,children:e(Yn,{})})]})]})}),Oe=()=>e("span",{children:"UserCenterPage"}),Wn=()=>e("span",{children:"UserCenterUpdatePage"});const at=d.forwardRef(({state:t},n)=>{const[r]=h.useForm(),a=d.useRef(null);return d.useImperativeHandle(n,()=>({form:r,input:a.current}),[r,a]),e("div",{children:s(h,{form:r,labelCol:{span:3},name:"userForm",initialValues:t||void 0,children:[e(h.Item,{name:"username",label:"账号",rules:[{required:!0,message:"请输入账号"}],children:e(I,{placeholder:"请输入账号",ref:a})}),e(h.Item,{name:"password",label:"密码",rules:[{required:!t,message:"请输入密码"}],children:e(I.Password,{placeholder:t?"不修改密码请留空!":"请输入密码"})}),e(h.Item,{name:"nickname",label:"昵称",rules:[{required:!0,message:"请输入昵称"}],children:e(I,{placeholder:"请输入昵称"})}),e(h.Item,{name:"gender",label:"性别",children:s(q.Group,{children:[e(q,{value:1,children:"男"}),e(q,{value:2,children:"女"})]})}),e(h.Item,{name:"mobile",label:"手机号",children:e(I,{placeholder:"请输入手机号"})}),e(h.Item,{name:"email",label:"邮箱",children:e(I,{placeholder:"请输入邮箱"})})]})})}),Jn=({refreshList:t})=>{const[n,r]=d.useState(!1),{run:a,loading:l}=z(xn,{manual:!0,debounceWait:100,onSuccess:()=>{var i;r(!1),(i=o.current)==null||i.form.resetFields(),t==null||t()}}),o=d.useRef(null);return s("div",{children:[e(x,{type:"primary",icon:e(re,{}),onClick:()=>{r(!0),setTimeout(()=>{var i,m;(m=(i=o.current)==null?void 0:i.input)==null||m.focus()},100)},children:"新增用户"}),e(Ee,{open:n,title:"添加用户",okText:"添加",cancelText:"取消",confirmLoading:l,onCancel:()=>r(!1),onOk:()=>{var i;(i=o.current)==null||i.form.validateFields().then(m=>{a(m)}).catch(m=>console.log(m))},children:e(at,{ref:o})})]})},Gn=({search:t,form:n})=>e(h,{form:n,name:"advanced_search",style:{paddingTop:16},onFinish:a=>{console.log("Received values of form: ",a)},children:s(_,{gutter:24,children:[e(S,{span:6,children:e(h.Item,{name:"username",label:"账号",children:e(I,{placeholder:"账号"})})}),e(S,{span:6,children:e(h.Item,{name:"mobile",label:"手机号",children:e(I,{placeholder:"手机号"})})}),e(S,{span:6,children:e(h.Item,{name:"email",label:"邮箱",children:e(I,{placeholder:"邮箱"})})}),s(S,{span:6,style:{textAlign:"right"},children:[e(x,{onClick:t.reset,children:"重置"}),e(x,{style:{margin:"0 8px"},type:"primary",onClick:t.submit,children:"查询"})]})]})}),ot=(t,n)=>{const r=At(t,n),{tableProps:a}=r,l={...a.pagination,showTotal:(i,m)=>`第${m[0]}-${m[1]} 条/共 ${i} 条`,hideOnSinglePage:!0};a.pagination=l;const o=a.onChange,u=(...i)=>{var M;let[m,c,p,g]=i,k=m,v,y;Object.keys(p).length>0&&(Array.isArray(p)?(y={},p.map(C=>{var T;y[(T=C.column)==null?void 0:T.dataIndex]=C.order})):y={[(M=p.column)==null?void 0:M.dataIndex]:p.order}),Object.keys(c).length>0&&(v=c,console.log("filterrrrrrrrrrrrr",c)),o(k,v,y)};return a.onChange=u,r.tableProps.size="small",r},Qn=({state:t,refreshList:n})=>{const[r,a]=d.useState(!1),{runAsync:l,loading:o}=z(Sn,{manual:!0,debounceWait:100}),u=d.useRef(null);return s($,{children:[e(x,{icon:e(Se,{}),size:"small",onClick:()=>{a(!0),setTimeout(()=>{var m,c;(c=(m=u.current)==null?void 0:m.input)==null||c.focus()},100)},children:"编辑"}),e(Ee,{open:r,title:"更新用户信息",okText:"保存",cancelText:"取消",confirmLoading:o,onCancel:()=>a(!1),onOk:()=>{var m;(m=u.current)==null||m.form.validateFields().then(c=>{l({...c,id:t.id}).then(()=>{var p;a(!1),(p=u.current)==null||p.form.resetFields(),n==null||n()}).catch(rt)}).catch(c=>console.log(c))},children:e(at,{ref:u,state:t})})]})};const R=t=>{const{children:n,className:r="",style:a={},...l}=t,{colorBgContainer:o}=he(),u="content-box",i={backgroundColor:o};return e("div",{className:`${u} ${r}`,style:{...i,...a},...l,children:n})},Xn=()=>{var M;console.log("render ExampleUserListPage");const[t]=h.useForm(),[n,r]=d.useState([]),a=d.useRef();d.useEffect(()=>{a.current=new Map},[]);const{runAsync:l,loading:o}=z(In,{manual:!0,debounceWait:100}),{refresh:u,tableProps:i,search:m}=ot(Cn,{form:t}),c=()=>{m.reset(),m.submit()},p=C=>{var T;typeof C=="number"&&((T=a==null?void 0:a.current)==null||T.set(C,!0)),l({id:C}).then(()=>{typeof C=="object"&&r([]),u()}).finally(()=>{var f;return typeof C=="number"&&((f=a==null?void 0:a.current)==null?void 0:f.delete(C))})},g=d.useMemo(()=>[{title:"ID",dataIndex:"id"},{title:"账号",dataIndex:"username",render:(C,{avatar:T,username:f})=>s($,{children:[" ",e(xe,{src:T})," ",f]})},{title:"昵称",dataIndex:"nickname"},{title:"性别",dataIndex:"gender",render:C=>C===nt.male?e(Ae,{color:"blue",children:"男"}):e(Ae,{color:"error",children:"女"})},{title:"邮箱",dataIndex:"email"},{title:"手机号",dataIndex:"mobile",sorter:!0},{title:"注册时间",dataIndex:"create_time",sorter:!0},{title:"操作",key:"operation",fixed:"right",render:(C,T)=>{var b;const{id:f}=T;return s(N,{children:[e(fe,{title:"确认要删除这条数据吗?",onConfirm:()=>p(f),children:e(x,{loading:(b=a==null?void 0:a.current)==null?void 0:b.has(f),icon:e(Me,{}),size:"small",danger:!0,children:"删除"})}),e(Qn,{state:T,refreshList:u})]})}}],[]),v={selectedRowKeys:n,onChange:C=>{console.log("selectedRowKeys changed: ",C),r(C)}},y=n.length>0;return s($,{children:[s(R,{children:[e("div",{children:e(w.Title,{level:5,children:"搜索"})}),e(Gn,{search:m,form:t})]}),e("br",{}),s(R,{children:[s("div",{className:"table-header",children:[e("div",{className:"left",children:e(w.Title,{level:5,children:"用户列表"})}),e("div",{className:"right",children:s(N,{size:"middle",children:[e(fe,{title:`确定要删除这${n.length}条数据吗?`,onConfirm:()=>p(n),children:e(x,{type:"primary",danger:!0,disabled:!y,loading:o&&((M=a.current)==null?void 0:M.size)===0,children:"批量删除"})}),e(Jn,{refreshList:c}),e(x,{type:"link",title:"点击刷新",onClick:u,icon:e(Ve,{})})]})})]}),e(Ie,{rowKey:"id",rowSelection:v,columns:g,...i})]})]})},Be=({title:t="空白页"})=>e(R,{style:{height:"500px"},children:e(w.Title,{level:4,children:t})}),Zn=({search:t,form:n})=>e(h,{form:n,name:"advanced_search",style:{paddingTop:16},onFinish:a=>{console.log("Received values of form: ",a)},children:s(_,{gutter:24,children:[e(S,{span:6,children:e(h.Item,{name:"title",label:"主题",children:e(I,{placeholder:"标题"})})}),e(S,{span:6,children:e(h.Item,{name:"ahthor",label:"作者",children:e(I,{placeholder:"作者"})})}),e(S,{span:6,children:e(h.Item,{name:"create_time",label:"发布时间",children:e(Ft.RangePicker,{})})}),s(S,{span:6,style:{textAlign:"right"},children:[e(x,{onClick:t.reset,children:"重置"}),e(x,{style:{margin:"0 8px"},type:"primary",onClick:t.submit,children:"查询"})]})]})});const He=()=>{console.log("render ArticleIndexPage");const[t]=h.useForm(),n=d.useRef();V(),d.useEffect(()=>{n.current=new Map},[]);const{runAsync:r}=z(Nn,{manual:!0,debounceWait:100}),{refresh:a,tableProps:l,search:o}=ot(Mn,{form:t}),u=m=>{var c;(c=n==null?void 0:n.current)==null||c.set(m,!0),r({id:m}).then(a).finally(()=>{var p;return(p=n==null?void 0:n.current)==null?void 0:p.delete(m)})},i=d.useMemo(()=>[{title:"ID",dataIndex:"id"},{title:"封面",dataIndex:"cover",render:m=>e(Ut,{width:80,height:45,style:{borderRadius:4},src:m})},{title:"标题",dataIndex:"title"},{title:"简介",dataIndex:"description"},{title:"作者",dataIndex:"author"},{title:"发布时间",dataIndex:"create_time",sorter:!0},{title:"操作",key:"operation",fixed:"right",render:(m,c)=>{var g;const{id:p}=c;return s(N,{children:[e(fe,{title:"确认要删除这条数据吗?",onConfirm:()=>u(p),children:e(x,{loading:(g=n==null?void 0:n.current)==null?void 0:g.has(p),icon:e(Me,{}),size:"small",danger:!0,children:"删除"})}),e(Q,{to:`/article/update/${p}`,children:e(x,{icon:e(Se,{}),size:"small",children:"编辑"})})]})}}],[]);return s($,{children:[s(R,{children:[e("div",{children:e(w.Title,{level:5,children:"搜索"})}),e(Zn,{search:o,form:t})]}),e("br",{}),s(R,{children:[s("div",{className:"table-header",children:[e("div",{className:"left",children:e(w.Title,{level:5,children:"文章列表"})}),e("div",{className:"right",children:s(N,{size:"middle",children:[e(Q,{to:"/article/create",children:e(x,{type:"primary",icon:e(re,{}),children:"发布文章"})}),e(x,{type:"link",title:"点击刷新",onClick:a,icon:e(Ve,{})})]})})]}),e(Ie,{rowKey:"id",columns:i,...l})]})]})},er=()=>{const[t]=h.useForm(),n=V(),r="articleDraft",{loading:a,run:l}=z(Pn,{manual:!0,debounceWait:200,onSuccess:()=>setTimeout(()=>{L.remove(r),n("/article/list")},200)}),o=L.getObject(r)||{},u=async()=>{const c=await t.validateFields();l(c)},i=()=>{const{cover:c,...p}=t.getFieldsValue();L.set(r,p),O.success("已保存到草稿箱")},m=c=>(console.log("Upload event:",c),Array.isArray(c)?c:c&&c.fileList);return s(R,{children:[e(w.Title,{level:3,children:"发布文章"}),e(ee,{}),e(h,{form:t,name:"createForm",labelCol:{span:3},initialValues:o,children:s(_,{gutter:36,children:[s(S,{span:16,children:[e(h.Item,{name:"title",label:"文章标题",rules:[{required:!0,message:"请输入标题"}],children:e(I,{})}),e(h.Item,{label:"简介",name:"description",children:e(I,{})}),e(h.Item,{label:"内容",name:"content",rules:[{required:!0,message:"请输入内容"}],children:e(I.TextArea,{rows:20})}),e(h.Item,{wrapperCol:{offset:3},children:s(N,{children:[e(x,{icon:e(We,{}),onClick:u,loading:a,type:"primary",children:"发布文章"}),e(x,{icon:e($t,{}),onClick:i,children:"保存为草稿"})]})})]}),s(S,{span:8,children:[e(h.Item,{label:"封面",name:"cover",getValueFromEvent:m,valuePropName:"fileList",children:e(Je,{maxCount:1,listType:"picture-card",children:s("div",{children:[e(re,{}),e("div",{style:{marginTop:8},children:"选择图片"})]})})}),e(h.Item,{label:"标签",name:"tags",children:e(Ge,{mode:"tags",placeholder:"文章标签"})}),e(h.Item,{label:"作者",name:"author",rules:[{required:!0,message:"请输入作者"}],children:e(I,{})})]})]})})]})},tr=()=>{const[t]=h.useForm(),n=V(),r=Dt(),{loading:a,run:l}=z(Tn,{manual:!0,debounceWait:10,onSuccess:c=>t.setFieldsValue(c)});d.useEffect(()=>{l({id:r.id})},[r.id]);const{loading:o,run:u}=z(wn,{manual:!0,debounceWait:200,onSuccess:()=>setTimeout(()=>{n("/article/list")},200)}),i=async()=>{const c=await t.validateFields();u(c)},m=c=>(console.log("Upload event:",c),Array.isArray(c)?c:c&&c.fileList);return s(R,{children:[e(w.Title,{level:3,children:"更新文章"}),e(ee,{}),e(Te,{spinning:a,children:e(h,{form:t,name:"createForm",labelCol:{span:3},children:s(_,{gutter:36,children:[s(S,{span:16,children:[e(h.Item,{name:"title",label:"文章标题",rules:[{required:!0,message:"请输入标题"}],children:e(I,{})}),e(h.Item,{label:"简介",name:"description",children:e(I,{})}),e(h.Item,{label:"内容",name:"content",rules:[{required:!0,message:"请输入内容"}],children:e(I.TextArea,{rows:20})}),e(h.Item,{wrapperCol:{offset:3},children:e(N,{children:e(x,{icon:e(We,{}),onClick:i,loading:o,type:"primary",children:"保存"})})})]}),s(S,{span:8,children:[e(h.Item,{label:"封面",name:"cover",getValueFromEvent:m,valuePropName:"fileList",children:e(Je,{maxCount:1,listType:"picture-card",children:s("div",{children:[e(re,{}),e("div",{style:{marginTop:8},children:"选择图片"})]})})}),e(h.Item,{label:"标签",name:"tags",children:e(Ge,{mode:"tags",placeholder:"文章标签"})}),e(h.Item,{label:"作者",name:"author",rules:[{required:!0,message:"请输入作者"}],children:e(I,{})})]})]})})})]})},nr=()=>{const t=Ce();return s(R,{style:{},children:[e(w.Title,{children:"404"}),e(w.Paragraph,{children:"页面不存在"}),s(w.Paragraph,{children:["路由: ",t.pathname]}),e(Q,{to:"/",children:"回到首页"})]})};const rr=t=>{const{title:n="Iframe Page",name:r="internal-iframe"}=t,a=d.useRef(null),[l,o]=d.useState(!0),[u]=de();d.useEffect(()=>{o(!0)},[u]);const i=u.get("url"),m=()=>{o(!1)};return i?e($,{children:e(R,{style:{height:"100%",padding:0},children:e(Te,{wrapperClassName:"iframeSpin",spinning:l,tip:"正在加载第三方页面, 请稍后...",children:e("iframe",{ref:a,width:"100%",height:"100%",onLoad:m,title:n,name:r,src:i})})})}):e(R,{children:e(Rt,{message:"无效的url地址",type:"error"})})};function ar(){return Ot([{path:"/",element:e(Re,{})},{path:"/dashboard",element:e(Re,{})},{path:"/user",children:[{index:!0,element:e(Oe,{})},{path:"/user/center/index",element:e(Oe,{})},{path:"/user/center/update",element:e(Wn,{})}]},{path:"/example/userList",element:e(Xn,{})},{path:"/article",children:[{index:!0,element:e(He,{})},{path:"/article/list",element:e(He,{})},{path:"/article/create",element:e(er,{})},{path:"/article/update/:id",element:e(tr,{})}]},{path:"/blank",element:e(Be,{})},{path:we,element:e(rr,{})},{path:"/multilevel/menu/2/3",element:e(Be,{title:"三级菜单"})},{path:"*",element:e(nr,{})}])}const or=()=>e(E.Content,{className:"content",children:e(ar,{})}),lr=ne.memo(or);const se=new Map,be=t=>{t.map(n=>{Pe(n)&&(n==null?void 0:n.type)==="url"||(ue(n)&&be(n.children||[]),(ce(n)||Xe(n))&&(n.path&&se.set(n.path,n.label),n.children&&be(n.children||[])))})},ir=()=>{const{menuList:t}=d.useContext(Z),n=d.useMemo(()=>(se.clear(),be(t),se),[t]),r=Ce(),[a]=de(),l=()=>{if(r.pathname===we){const i=a.get("url");if(i&&se.has(i))return[e(le.Item,{children:e(Q,{style:{color:"inherit"},to:tt(i),children:n.get(i)})},i)]}return[]},o=d.useMemo(()=>{const i=r.pathname.split("/").filter(m=>m);return i.map((m,c)=>{const p=`/${i.slice(0,c+1).join("/")}`;return n.has(p)?e(le.Item,{children:c===i.length-1?e(Q,{style:{color:"inherit"},to:p,children:n.get(p)}):n.get(p)},p):null})},[r]),u=[e(le.Item,{children:e(Bt,{})},"home"),...o,...l()];return e(le,{className:"breadcrumb",children:u})},sr=ne.memo(ir);function cr(t){const n=t.split(".")[1];if(n)try{return JSON.parse(Ht(n))}catch(r){console.warn("Parse Token Error: ",r);return}}function ke(){var r;const t=L.getString(D.tokenKey);if(!t)return!1;const n=cr(t);return n!==void 0&&((r=n==null?void 0:n.data)==null?void 0:r.uid)>0&&n.exp>new Date().getTime()/1e3}const dr=({loading:t,title:n})=>{const{settings:{theme:r}}=d.useContext(Y);return e(Te,{size:"large",spinning:t,tip:n,wrapperClassName:`page-loading-spin-${r}`,children:e("div",{style:{height:"100vh",width:"100vw"}})})};const ur=()=>{const[t,n]=Qe.useNotification(),r=L.getBoolean("dontShowCompactModeNotify"),{setSetting:a,settings:{compactMode:l}}=d.useContext(Y),o=()=>{const u=`open${Date.now()}`,i=s(N,{children:[e(x,{type:"link",size:"small",onClick:()=>t.destroy(),children:"不再提示"}),e(x,{type:"primary",size:"small",onClick:()=>{a({compactMode:!0}),t.destroy(u)},children:"开启"})]});t.info({message:"开启紧凑布局模式",description:"检测到您的屏幕尺寸过小, 是否开启紧凑布局模式? 或者您也可以选择在设置中手动开启",btn:i,key:u,onClose:()=>L.set("dontShowCompactModeNotify",!0)})};return d.useEffect(()=>{!r&&!l&&window.innerWidth<=1440&&o()},[]),n},mr=()=>{const{settings:{showFooter:t}}=d.useContext(Y),{Text:n,Link:r}=w;return t?s(E.Footer,{style:{textAlign:"center",paddingBottom:4},children:[s(n,{type:"secondary",children:["React Admin Template",e(r,{href:"https://github.com/xstnet/react-admin-template",target:"_blank",style:{color:"inherit",marginLeft:5},children:e(Kt,{})})]}),e("br",{}),e(r,{href:"https://github.com/xstnet",target:"_blank",children:e(n,{type:"secondary",children:"醉丶春风"})}),e(n,{type:"secondary",children:"©2023 Created by Ant Design V5"})]}):null},hr=()=>{const[t,n]=d.useState(!0),{setIsLogin:r,setUserInfo:a}=d.useContext(me),{menuCollapsed:l}=d.useContext(Z),{colorBgContainer:o}=he(),{settings:{fixedMenu:u,fixedHeader:i,theme:m}}=d.useContext(Y),c=V(),[p]=de();return console.log("default layout render..."),d.useEffect(()=>{if(!ke()){c("/login");return}kn().then(g=>{if(n(!1),r(!0),a(g),p.has("ghpage")){const k=decodeURIComponent(p.get("ghpage"));c(k);return}}).catch(g=>{g instanceof _t&&Qe.error({message:"网络错误",description:"获取用户信息失败, 无法打开页面",duration:null,closeIcon:null})})},[]),ke()?t?e(dr,{title:"页面加载中",loading:t}):s(E,{"data-fixed-menu":u?1:0,"data-menu-collapsed":l?1:0,"data-fixed-header":i?1:0,style:{background:o},className:`default-layout theme-${m}`,children:[e(Kn,{}),s(E,{children:[e(hn,{}),s(E,{className:"content-layout",children:[e(sr,{}),e(lr,{}),e(mr,{})]})]}),e(ur,{})]}):(c("/login"),null)};const pr=()=>{const t=V(),{loading:n,run:r}=z(bn,{manual:!0,debounceWait:300,onSuccess:o=>{L.setToken(o.token),t("/dashboard")}});document.title=D.pageTitle;const a=o=>{r(o)};d.useEffect(()=>{ke()&&t("/dashboard")},[]);const l={remember:!0,username:"admin",password:"123456"};return e($,{children:s(_e,{theme:{algorithm:[H.defaultAlgorithm]},children:[e("div",{className:"bg-wrap"}),s(_,{className:"login-wrap",children:[e(S,{span:15,className:"login-banner"}),s(S,{span:9,className:"login-form-wrap",children:[e(w.Title,{style:{textAlign:"center"},children:"后台管理系统"}),e("br",{}),s(h,{name:"loginForm",labelCol:{span:5},wrapperCol:{span:19},style:{maxWidth:600},initialValues:l,onFinish:a,autoComplete:"off",children:[e(h.Item,{label:"用户名",name:"username",rules:[{required:!0,message:"请输入用户名!"}],children:e(I,{placeholder:"admin"})}),e(h.Item,{label:"密码",name:"password",rules:[{required:!0,message:"请输入密码!"}],children:e(I.Password,{placeholder:"123456"})}),e(h.Item,{name:"remember",valuePropName:"checked",wrapperCol:{offset:5},children:e(je,{children:"记住我"})}),e(h.Item,{wrapperCol:{offset:5,span:16},children:e(x,{loading:n,type:"primary",htmlType:"submit",children:"登录"})})]})]})]})]})})};function gr(){return d.useEffect(()=>{},[]),e(dn,{children:e("div",{className:"App",children:s(zt,{children:[e(Fe,{element:e(pr,{}),path:"/login"}),e(Fe,{path:"*",element:e(hr,{})})]})})})}function Ke(t){const n=JSON.stringify({type:"JWT",alg:"HS256"}),r=Number((new Date().getTime()/1e3).toFixed(0)),a=JSON.stringify({iss:"github.com/xstnet",sub:"react-admin",iat:r,exp:r+86400*14,data:t}),l="H_97UyQUOmURnZdDwI0khuAt4Cmg";return`${Ue(n)}.${Ue(a)}.${l}`}P.mock(/api\/login/,"post",({body:t})=>{const{username:n,password:r}=JSON.parse(t);return n==="admin"?r!=="123456"?{code:-1,message:"密码错误"}:{code:0,message:"登录成功",data:{token:Ke({uid:1})}}:{code:0,message:"登录成功",data:{token:Ke({uid:W.Random.natural(2,1e4)})}}});P.setup({timeout:100});P.mock(/api\/user\/info/,"get",t=>({code:0,message:"ok",data:{id:1,username:"admin",nickname:"醉丶春风",avatar:"https://www.xstnet.com/static/images/head.gif",password:"",gender:W.Random.natural(1,2),email:"shantongxu@qq.com",mobile:"133xxxx3333"}}));P.mock(/api\/user\/logout/,"post",t=>({code:0,message:"退出成功"}));P.mock(/api\/user\/list/,"get",t=>{const n=new URLSearchParams(t.url);let r=Number(n.has("pageSize")?n.get("pageSize"):10);const a={code:0,message:"ok",data:{total:100,[`list|${r}`]:[{"id|+1":r,username:"@first@last",nickname:"@cname",avatar:()=>W.Random.dataImage("200x200"),email:"@email",mobile:()=>P.mock(/^1[3456789]\d{9}$/).replace(/^(\d{3})\d{4}(\d{4})$/,"$1****$2"),"gender|1-2":0,create_time:"@date(yyyy-MM-dd HH:MM:ss)"}]}};return P.mock(a)});P.mock(/api\/user\/create/,"post",t=>({code:0,message:"创建成功",data:{id:W.Random.natural(100,9999)}}));P.mock(/api\/user\/update/,"post",t=>({code:0,message:"更新成功"}));P.mock(/api\/user\/delete/,"post",t=>({code:0,message:"删除成功"}));P.setup({timeout:100});P.mock(/api\/article\/detail/,"get",t=>(console.log("🚀 ~ file: article.ts:7 ~ Mock.mock ~ options:",t),{code:0,message:"ok",data:{id:1,title:"主题",description:"醉丶春风",author:"醉丶春风",tags:[1,2],content:"content",create_time:W.Random.datetime()}}));P.mock(/api\/article\/list/,"get",t=>{const n=new URLSearchParams(t.url);let r=Number(n.has("pageSize")?n.get("pageSize"):10);const a={code:0,message:"ok",data:{total:100,[`list|${r}`]:[{"id|+1":r,author:"@first@last",title:()=>P.Random.ctitle(5,20),description:"@cname",cover:()=>W.Random.dataImage("480x270","封面"),content:"@email",create_time:"@date(yyyy-MM-dd HH:MM:ss)"}]}};return P.mock(a)});P.mock(/api\/article\/create/,"post",t=>({code:0,message:"创建成功",data:{id:W.Random.natural(100,9999)}}));P.mock(/api\/article\/update/,"post",t=>({code:0,message:"更新成功"}));P.mock(/api\/article\/delete/,"post",t=>({code:0,message:"删除成功"}));jt.createRoot(document.getElementById("root")).render(e(Yt,{basename:"/react-admin-template/",children:e(gr,{})}));
