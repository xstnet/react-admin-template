import{j as ve,r as a,C as lt,z as it,t as W,u as Ee,a as Z,b as q,m as $,d as ct,S as Be,n as _e,c as O,B as S,e as De,R as D,f as X,g as se,h as ie,L as ge,H as dt,i as ut,k as mt,T as ze,l as de,o as ht,F as je,p as Ve,q as pt,s as A,G as ft,v as R,w as gt,x as bt,y as te,A as Ce,U as He,D as H,E as be,P as yt,I as kt,J as k,K as xe,M as vt,N as J,O as oe,Q as Ct,V as xt,W as St,X as qe,Y as Tt,Z as It,_ as Pt,$ as Mt,a0 as I,a1 as ne,a2 as Se,a3 as Ke,a4 as Te,a5 as V,a6 as Nt,a7 as Me,a8 as Ne,a9 as Lt,aa as At,ab as wt,ac as Rt,ad as Ye,ae as $t,af as We,ag as Ge,ah as Ot,ai as Ft,aj as Ut,ak as T,al as ee,am as Le,an as Et}from"./vendor-2fae8136.js";(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))o(s);new MutationObserver(s=>{for(const l of s)if(l.type==="childList")for(const d of l.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&o(d)}).observe(document,{childList:!0,subtree:!0});function r(s){const l={};return s.integrity&&(l.integrity=s.integrity),s.referrerPolicy&&(l.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?l.credentials="include":s.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function o(s){if(s.ep)return;s.ep=!0;const l=r(s);fetch(s.href,l)}})();const E=ve.Fragment,t=ve.jsx,h=ve.jsxs,B={pageTitle:"后台管理系统模板",pageTitlePrefix:"后台管理",tokenKey:"Authorization",apiBaseUrl:"https://xstnet.github.io/react-admin-template/api",iconFontUrl:"//at.alicdn.com/t/c/font_3917407_68ll5mr3jkf.js"};function Bt(e,n){localStorage.setItem(e,typeof n=="object"?JSON.stringify(n):n)}function _t(e){localStorage.setItem(B.tokenKey,typeof e=="object"?JSON.stringify(e):e)}function Je(e){return localStorage.getItem(e)}function Dt(e){const n=localStorage.getItem(e);if(n!==null)return Number(n)}function zt(e){const n=localStorage.getItem(e);if(n!==null)return n==="true"}function jt(e){const n=localStorage.getItem(e);if(n!==null)return JSON.parse(n)}function Vt(e){return Je(e)!==null}function Ht(e){localStorage.removeItem(e)}function qt(){localStorage.removeItem(B.tokenKey)}function Kt(){localStorage.clear()}const M={set:Bt,setToken:_t,has:Vt,getString:Je,getObject:jt,getBoolean:zt,getNumber:Dt,remove:Ht,removeToken:qt,clear:Kt},Qe=()=>{const[e,n]=a.useState(window.matchMedia("(prefers-color-scheme: dark)").matches);return a.useEffect(()=>{const o=s=>{console.log("chage",s.matches),s.matches?n(!0):n(!1)};return window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",o),()=>{window.matchMedia("(prefers-color-scheme: dark)").removeEventListener("change",o)}},[]),[e?"dark":"light"]},Yt=void 0,Wt=a.createContext(Yt),Gt=({children:e})=>{const{settings:{primaryColor:n,theme:r,compactMode:o,followSystemTheme:s}}=a.useContext(K),[l]=Qe(),d={},c=()=>{const u=[];return s?u.push(l==="light"?W.defaultAlgorithm:W.darkAlgorithm):u.push(r==="light"?W.defaultAlgorithm:W.darkAlgorithm),o&&u.push(W.compactAlgorithm),u};return t(Wt.Provider,{value:d,children:t(lt,{locale:it,theme:{algorithm:c(),token:{colorPrimary:n},components:{Button:{borderRadius:4,borderRadiusSM:2},Modal:{borderRadius:4,borderRadiusOuter:2}}},children:e})})},Jt=void 0,K=a.createContext(Jt),Qt=({children:e})=>{const n=a.useMemo(()=>({theme:"light",compactMode:!1,followSystemTheme:!1,fixedHeader:!0,fixedMenu:!0,showFooter:!0,multitabMode:!1,primaryColor:"#00b96b",...M.getObject("settings")||{}}),[]),[r,o]=a.useState(n),s=a.useCallback(d=>{const c={...r,...d};o(c),M.set("settings",c)},[r]),l={settings:r,setSetting:s};return t(K.Provider,{value:l,children:t(Gt,{children:e})})},Zt=void 0,Y=a.createContext(Zt),Xt=({children:e})=>{const[n,r]=a.useState(!1),[o,{toggleFullscreen:s}]=Ee(document.body),[l,d]=a.useState(null),c=a.useMemo(()=>({isLogin:n,setIsLogin:r,userInfo:l,setUserInfo:d,fullScreen:o,setFullScreen:s}),[n,l,o]);return t(Y.Provider,{value:c,children:t(Qt,{children:e})})},en="modulepreload",tn=function(e){return"/react-admin-template/"+e},Ae={},le=function(n,r,o){if(!r||r.length===0)return n();const s=document.getElementsByTagName("link");return Promise.all(r.map(l=>{if(l=tn(l),l in Ae)return;Ae[l]=!0;const d=l.endsWith(".css"),c=d?'[rel="stylesheet"]':"";if(!!o)for(let m=s.length-1;m>=0;m--){const g=s[m];if(g.href===l&&(!d||g.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${l}"]${c}`))return;const i=document.createElement("link");if(i.rel=d?"stylesheet":en,d||(i.as="script",i.crossOrigin=""),i.href=l,document.head.appendChild(i),d)return new Promise((m,g)=>{i.addEventListener("load",m),i.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${l}`)))})})).then(()=>n())},nn=({to:e})=>{const n=Z();return a.useEffect(()=>{n(e)},[]),null};var ye=(e=>(e[e.success=0]="success",e[e.noLogin=-10001]="noLogin",e[e.loginExpired=-10002]="loginExpired",e))(ye||{}),Ze=(e=>(e[e.male=1]="male",e[e.female=2]="female",e))(Ze||{}),rn=(e=>(e[e.incomplete=1]="incomplete",e[e.completed=2]="completed",e[e.deleted=10]="deleted",e))(rn||{}),on=(e=>(e.day="YYYY-MM-DD",e.second="YYYY-MM-DD HH:mm:ss",e.minute="YYYY-MM-DD HH:mm",e.hour="YYYY-MM-DD HH",e))(on||{});function G(){}function Ir(e,n){return Math.floor(Math.random()*(n-e+1))+e}function Xe(e,n){const{roles:r=[]}=n||{};return e?typeof e=="string"||typeof e=="number"?r.includes(e):Array.isArray(e)?e.some(o=>r.includes(o)):typeof e=="function"?e(n):!1:!0}function an(e){var r;const{config:n}=e;console.group(`${(r=n.method)==null?void 0:r.toLocaleUpperCase()} ${n.url}`),console.log("Path:",n.url),console.log("Method:",n.method),console.log("Params:",n.params),console.log("StatusCode:",e.status),console.log("Response:",typeof e.data=="object"?Object.assign(Object.create(null),e.data):e.data),console.groupEnd()}const sn=10*1e3;q.defaults.baseURL=B.apiBaseUrl;q.defaults.headers.post["Content-Type"]="application/json; charset=utf-8";q.defaults.timeout=sn;q.interceptors.request.use(e=>(e.headers.Authorization=`Bearer ${M.getString(B.tokenKey)}`,e),e=>Promise.reject(e));q.interceptors.response.use(e=>{an(e);const n=e.data;return typeof n.code!="number"?($.error("系统错误",2),console.warn("api调用失败, 未正常返回数据, url:",e.config.url,"data:",n,"response:",e),Promise.reject(e)):n.code===0?(e.config.method==="post"&&$.success(e.data.message),e):n.code===ye.noLogin?($.error("您还没有登录, 即将跳转到登录页面, 请稍后..."),M.remove(B.tokenKey),location.reload(),Promise.reject(n)):n.code===ye.loginExpired?($.error("登录已失效, 即将跳转到登录页面..."),M.remove(B.tokenKey),location.reload(),Promise.reject(n)):($.error(n.message),Promise.reject(e))},e=>(typeof e.message=="string"&&e.message==="Network Error"?$.error("网络错误, 请稍后再试!"):$.error("请求失败, 请稍后再试"),console.log("Request error",e),console.groupEnd(),Promise.reject(e)));const ln=(e,n,r)=>{const o=r||{};return o.params=n,q.get(e,o)},cn=(e,n,r)=>q.post(e,n,r),dn=e=>q.request(e),N={get:ln,post:cn,request:dn},L=e=>e.then(n=>Promise.resolve(n.data.data)).catch(n=>Promise.reject(n)),Pr=e=>{const n=N.post("/login",e);return L(n)},un=e=>L(N.get("/user/info",e)),mn=e=>L(N.post("/user/logout",e)),hn=(e,n)=>L(N.get("/user/list",{...e,...n})),pn=e=>L(N.post("/user/create",e)),fn=e=>L(N.post("/user/update",e)),gn=e=>L(N.post("/user/delete",e)),Mr=(e,n)=>L(N.get("/article/list",{...e,...n})),bn=e=>L(N.get("/article/detail",e)),yn=e=>L(N.post("/article/create",e)),kn=e=>L(N.post("/article/update",e)),Nr=e=>L(N.post("/article/delete",e));function vn(e){const n=e.split(".")[1];if(n)try{return JSON.parse(ct(n))}catch(r){console.warn("Parse Token Error: ",r);return}}function we(){var r;const e=M.getString(B.tokenKey);if(!e)return!1;const n=vn(e);return n!==void 0&&((r=n==null?void 0:n.data)==null?void 0:r.uid)>0&&n.exp>new Date().getTime()/1e3}const Ie=({loading:e=!0,title:n="页面加载中",delay:r=50})=>{const{settings:{theme:o}}=a.useContext(K);return t(Be,{size:"large",spinning:e,tip:n,delay:r,wrapperClassName:`page-loading-spin-${o}`,children:t("div",{style:{height:"100%",width:"100%"}})})},Cn=()=>{const[e,n]=_e.useNotification(),r=M.getBoolean("dontShowCompactModeNotify"),{setSetting:o,settings:{compactMode:s}}=a.useContext(K),l=()=>{const d=`open${Date.now()}`,c=h(O,{children:[t(S,{type:"link",size:"small",onClick:()=>e.destroy(),children:"不再提示"}),t(S,{type:"primary",size:"small",onClick:()=>{o({compactMode:!0}),e.destroy(d)},children:"开启"})]});e.info({message:"开启紧凑布局模式",description:"检测到您的屏幕尺寸过小, 是否开启紧凑布局模式? 或者您也可以选择在设置中手动开启",btn:c,key:d,onClose:()=>M.set("dontShowCompactModeNotify",!0)})};return a.useEffect(()=>{!r&&!s&&window.innerWidth<=1440&&l()},[]),n},xn=[{label:"控制台",icon:"icon-dashboard",path:"/dashboard",permission:"admin"},{label:"示例页面",path:"/example",icon:"icon-example",children:[{label:"列表页",icon:"icon-list",path:"/example/userList",permission:["admin","guest"]},{label:"权限测试页",icon:"icon-list",path:"/example/permission",children:[{label:"菜单权限",icon:"icon-list",path:"/example/permission/menu"},{label:"按钮权限",icon:"icon-list",path:"/example/permission/button"}]},{label:"多级菜单",icon:"icon-list",path:"/multilevel/menu",children:[{label:"二级菜单",icon:"icon-list",path:"/multilevel/menu/2",children:[{label:"三级菜单",icon:"icon-list",path:"/multilevel/menu/2/3"}]}]},{label:"Tabs标签页",icon:"icon-list",path:"/example/tabs",children:[{label:"标签管理",icon:"icon-list",path:"/example/tabs/manage"}]},{label:"空白页",icon:"icon-example",path:"/blank"},{label:"404",icon:"icon-example",path:"/404"}]},{label:"徽标示例",path:"/badge",icon:"icon-example",children:[{label:"红点徽标",icon:"icon-list",badge:"dot",path:"/badge/dot"},{label:"数字徽标",icon:"icon-example",badge:98,path:"/badge/count"}]},{path:"/article",label:"文章管理",icon:"icon-article",permission:"admin",children:[{path:"/article/list",label:"文章列表",icon:"icon-article"},{path:"/article/create",label:"发布文章",hideInMenu:!0,parent:"/article/list"},{path:"/article/update",label:"更新文章",hideInMenu:!0,parent:"/article/list"},{path:"/article/category",label:"分类管理",icon:"icon-list"}]},{path:"/iframe",label:"外部页面",icon:"icon-href",permission:"admin",children:[{path:"https://ant-design.antgroup.com/components/overview-cn",label:"antd文档(外链)",icon:"icon-document",type:"url"},{path:"https://ant-design.antgroup.com/components/overview-cn/",label:"antd文档(内嵌)",icon:"icon-document",type:"iframe"},{path:"https://www.xstnet.com",label:"博客主页(内嵌)",icon:"icon-document",type:"iframe"},{path:"https://baidu.com",label:"百度",icon:"icon-document",type:"iframe"}]},{path:"/document",label:"文档",icon:"icon-document",children:[{path:"/document/start",label:"开始使用",icon:"icon-document"},{path:"/document/package.json",label:"Package文件说明",icon:"icon-document"}]},{path:"/user/center",label:"个人中心",icon:"icon-user-permissions",permission:e=>e.roles.includes("admin"),children:[{path:"/user/center/index",label:"个人中心",icon:"icon-example"},{path:"/user/center/update",label:"修改信息",icon:"icon-document"}]}],Sn=async e=>xn;function et(e){return!!(typeof e.children>"u"||Array.isArray(e.children)&&e.children.length===0)}function me(e){return pe(e)?!1:!!(typeof e.children<"u"&&Array.isArray(e.children)&&e.children.length>0)}function he(e){return typeof e.path=="string"&&typeof e.label=="string"}function pe(e){return typeof e.type<"u"&&e.type==="group"}function Tn(e){return typeof e.type<"u"&&e.type==="divider"}const In=void 0,_=a.createContext(In),Pn=({children:e})=>{const{userInfo:n}=a.useContext(Y),[r,o]=a.useState([]),[s,l]=a.useState(!1);a.useEffect(()=>{async function i(){try{const m=await Sn(n);o([...m])}catch(m){console.warn("获取菜单数据失败",m)}}i()},[n]);const{mapPathToMenu:d,processedMenuList:c}=a.useMemo(()=>(()=>{const m=new Map,g=C=>{he(C)&&(C.key=(C==null?void 0:C.key)||C.path);const{permission:P,...f}=C;return f},v=C=>C.map(f=>{var x;const{permission:p=void 0}=f;if(!Xe(p,n))return null;const y=g(f);return(me(y)||pe(y))&&(y.children=v(y.children||[]),!y.children||!((x=y.children)!=null&&x.length))?null:(he(y)&&m.set(y.path,y),y)}).filter(f=>f);return{processedMenuList:v(r),mapPathToMenu:m}})(),[r]),u=a.useMemo(()=>({menuList:c,setMenuList:o,menuCollapsed:s,setMenuCollapsed:l,mapPathToMenu:d}),[r,s]);return r.length===0?t(_.Provider,{value:u,children:t(Ie,{})}):t(_.Provider,{value:u,children:e})},Mn={addTab:G,removeTab:G,tabs:[],openTab:G,hasTab:()=>!1,setTabs:G,activeTab:"",whiteList:[],tabEvent:De(),addTabWithNavigate:G},fe=a.createContext(Mn),Nn=({children:e})=>{const[n,r]=a.useState([]),[o,s]=a.useState(""),l=a.useMemo(()=>De(),[]),d=Z(),c=a.useCallback(()=>{const g=f=>{f&&f!==o&&s(f)},v=f=>n.findIndex(p=>p.key===f)>-1,b=(f,p=!0)=>{v(f.key)||r(y=>[...y,{...f}]),p&&o!==f.key&&g(f.key)};return{openTab:g,addTab:b,removeTab:f=>{const p=n.findIndex(x=>x.key===f);if(p===-1)return;const y=n[p===0?1:p-1];r(x=>x.filter(F=>F.key!==f)),o===f&&y&&d(y.key),console.log("tabs",n)},hasTab:v,addTabWithNavigate:f=>{b(f,!0);const p=n.find(x=>x.key===f.key)||f;if(!p){console.log("标签页不存在");return}const y=p.key+(p.queryString||"");d(y)}}},[n,o]),u=a.useMemo(()=>c(),[c]),i=["/"],m=a.useMemo(()=>({tabs:n,setTabs:r,activeTab:o,tabEvent:l,whiteList:i,...u}),[n,o]);return t(fe.Provider,{value:m,children:e})},re=()=>{const{token:e}=W.useToken();return e},U="/iframe",tt=e=>`${U}?url=${e}`;const ue=new Map,ke=e=>{e.map(n=>{he(n)&&(n==null?void 0:n.type)==="url"||(pe(n)&&ke(n.children||[]),(me(n)||et(n))&&(n.path&&ue.set(n.path,n.label),n.children&&ke(n.children||[])))})},Ln=()=>{const{menuList:e}=a.useContext(_),n=a.useMemo(()=>(ue.clear(),ke(e),ue),[e]),r=X(),[o]=se(),s=()=>{if(r.pathname===U){const c=o.get("url");if(c&&ue.has(c))return[t(ie.Item,{children:t(ge,{style:{color:"inherit"},to:tt(c),children:n.get(c)})},c)]}return[]},l=a.useMemo(()=>{const c=r.pathname.split("/").filter(u=>u);return c.map((u,i)=>{const m=`/${c.slice(0,i+1).join("/")}`;return n.has(m)?t(ie.Item,{children:i===c.length-1?t(ge,{style:{color:"inherit"},to:m,children:n.get(m)}):n.get(m)},m):null})},[r]),d=[t(ie.Item,{children:t(dt,{})},"home"),...l,...s()];return t(ie,{className:"breadcrumb",children:d})},nt=D.memo(Ln);function An({freeze:e,children:n}){const r=a.useRef({}).current;if(e&&!r.promise)throw r.promise=new Promise(o=>{r.resolve=o}),r.promise;if(e)throw r.promise;return r.promise&&(r.resolve(),r.promise=void 0),t(a.Fragment,{children:n})}function wn({freeze:e,children:n,placeholder:r=null}){return t(a.Suspense,{fallback:r,children:t(An,{freeze:e,children:n})})}const Rn=({active:e,children:n,id:r,parentRef:o})=>{const[s]=a.useState(()=>document.createElement("div")),l=a.useRef(!0),d=r.indexOf(U)===0,c=a.useMemo(()=>ut.createPortal(n,s),[]);return a.useEffect(()=>{const u=()=>{var m,g;if(e&&s.setAttribute("id",r),d)return i();if(e)(m=o.current)==null||m.appendChild(s);else try{(g=o.current)==null||g.removeChild(s)}catch{}},i=()=>{var m;l.current&&((m=o.current)==null||m.appendChild(s)),s.style.display=e?"block":"none",l.current=!1};u()},[e,s,l.current]),a.useEffect(()=>()=>{var u;try{(u=o.current)==null||u.removeChild(s)}catch{}},[]),d?t(wn,{freeze:!e,children:c}):c};let Re=1;const $n=()=>{const e=mt(),{pathname:n,search:r}=X(),o=n===U?n+r:n,{tabs:s,tabEvent:l,whiteList:d}=a.useContext(fe),c=a.useRef(null),[u,i]=a.useState([]);return a.useEffect(()=>{const m=l.on("reload",g=>{console.log("刷新页面:",g),i(u.map(v=>v.id!==g?v:{...v,key:++Re}))});return()=>{m()}},[u]),a.useEffect(()=>{if(!o||d.includes(o))return;const m=s.map(g=>g.key);i(g=>(g.find(b=>b.id===o)||g.push({id:o,element:e,key:++Re}),g.filter(b=>m.includes(b.id))))},[s]),d.includes(o)?e:h(E,{children:[t("div",{ref:c,className:"keep-alive"}),u.map(({id:m,element:g,key:v})=>t(Rn,{active:m===o,parentRef:c,id:m,children:g},v))]})};const On=()=>{const{pathname:e}=X(),{tabs:n,activeTab:r,removeTab:o,tabEvent:s,addTabWithNavigate:l}=a.useContext(fe),{colorPrimary:d}=re(),[c,u]=a.useState(!1),{colorBgLayout:i}=re(),m=f=>{f&&f!==e&&l({key:f,label:""})},g=(f,p)=>{p==="remove"&&o(f)},v=()=>{s.emit("reload",e)},b=f=>{const p=f;u(p),s.emit("fullScreen",p)},C=()=>h(O,{size:0,children:[t(de,{title:"刷新当前页面",children:t(S,{onClick:v,type:"link",style:{color:d},icon:t(ht,{})})}),(()=>c?t(de,{title:"退出全屏",children:t(S,{onClick:()=>b(!1),type:"link",style:{color:d},icon:t(je,{})})}):t(de,{title:"全屏",children:t(S,{onClick:()=>b(!0),type:"link",style:{color:d},icon:t(Ve,{})})}))()]}),P={backgroundColor:i,left:c?0:void 0};return t(ze,{className:"tabs-wrapper",type:"editable-card",hideAdd:!0,activeKey:r,items:[...n],onChange:m,onEdit:g,tabBarExtraContent:t(C,{}),style:P})};const Fn=({children:e})=>{const{pathname:n,search:r}=X(),{addTab:o,hasTab:s,openTab:l,tabs:d,tabEvent:c,whiteList:u}=a.useContext(fe),{mapPathToMenu:i}=a.useContext(_),m=a.useRef(null),[g,{toggleFullscreen:v}]=Ee(m),{colorBgLayout:b}=re(),[C]=se(),P=pt(),f=y=>{var z;let x="";const F=y.split("/").filter(j=>j);for(let j=0;j<F.length;j++){const Pe=`/${F.slice(0,j+1).join("/")}`;i.has(Pe)&&(x=((z=i.get(Pe))==null?void 0:z.label)||x)}return x},p=()=>{if(u.includes(n))return;let y=n;n===U&&(y=C.get("url")||"");const x=i.get(y),F=x?n===U?n+r:x.key:n;if(s(F)){l(F);return}if(!x||!x.path){let z=f(y);if(!z)z="404",n===U&&(z="Iframe 页面");else{const{params:{id:j=void 0}}=P.pop()||{params:{id:void 0}};j&&(z+=": "+j)}o({label:z,key:F,queryString:r,children:null});return}o({label:x.label,key:F,queryString:n===U?"":r,children:null})};return a.useEffect(()=>{p()},[n,r]),a.useEffect(()=>{},[r]),a.useEffect(()=>{const y=c.on("fullScreen",x=>{v()});return()=>{y()}},[]),h(A.Content,{className:"content",ref:m,style:{backgroundColor:b},children:[d.length?t(On,{}):null,d.length?t(nt,{}):null,t($n,{})]})},Un=D.memo(Fn),rt=()=>{const{settings:{showFooter:e}}=a.useContext(K),{Text:n,Link:r}=R;return e?h(A.Footer,{style:{textAlign:"center",paddingBottom:4},children:[h(n,{type:"secondary",children:["React Admin Template",t(r,{href:"https://github.com/xstnet/react-admin-template",target:"_blank",style:{color:"inherit",marginLeft:5},children:t(ft,{})})]}),t("br",{}),t(r,{href:"https://github.com/xstnet",target:"_blank",children:t(n,{type:"secondary",children:"醉丶春风"})}),h(n,{type:"secondary",children:["©2023 Created by",t(r,{target:"_blank",href:"https://ant-design.antgroup.com/index-cn",style:{margin:"0 6px",color:"inherit"},children:"Ant Design"}),"V5"]})]}):null};const w=gt({scriptUrl:B.iconFontUrl,extraCommonProps:{}}),En=()=>{const{fullScreen:e,setFullScreen:n}=a.useContext(Y),r=()=>{$.success(e?"已退出全屏模式":"进入全屏模式"),n(!e)};return e?t(je,{title:"退出全屏模式",className:"action-icon",onClick:r}):t(Ve,{title:"进入全屏模式",className:"action-icon",onClick:r})},Bn=()=>t(R.Link,{className:"action-icon",target:"_blank",style:{color:"inherit"},href:"https://github.com/xstnet/react-admin-template",children:t(bt,{})}),_n=[[2,1,"刚刚"],[60,1,"%d秒前"],[3600,60,"%d分钟前"],[86400,3600,"%d小时前"],[86400*30,3600*24,"%d天前"],[86400*30*12,3600*24*30,"%d月前"],[1/0,3600*24*30*12,"%d年前"]],Dn=[[-60,1,"%d秒后"],[-3600,60,"%d分钟后"],[-86400,3600,"%d小时后"],[-(86400*30),3600*24,"%d天后"],[-(86400*30*12),3600*24*30,"%d月后"],[-1/0,3600*24*30*12,"%d年后"]],zn=({time:e,...n})=>{const r=Math.floor(new Date().getTime()/1e3),o=Math.floor(new Date(e).getTime()/1e3),s=r-o;if(isNaN(o))return t(E,{children:"time"});const l=s<-1?Dn:_n;let d="";for(const[c,u,i]of l)if(Math.abs(s)<Math.abs(c)){const m=Math.floor(Math.abs(s)/u);d=i.replace("%d",String(m));break}return t(de,{title:e,children:t("span",{...n,children:d})})},jn=()=>t(te,{size:"small",itemLayout:"horizontal",dataSource:[{title:"张三 评论了你",desc:"评论内容评论内容评论内容",createTime:"2023-04-06 15:39:00"},{title:"您有3个订单待支付",desc:"订单1,订单2,订单3",createTime:"2023-04-05 15:39:00"},{title:"张三 的请假申请需要您的审批",desc:"",createTime:"2023-04-01 12:08:00"},{title:"本周周报待填写",createTime:"2023-03-02 10:55:00",desc:"说明"}],renderItem:n=>t(te.Item,{children:t(te.Item.Meta,{avatar:t(Ce,{size:48,icon:t(He,{})}),title:t("a",{href:"https://ant.design",children:n.title}),description:h("div",{children:[n.desc,n.desc&&t("br",{}),t(R.Text,{children:t(zn,{style:{fontSize:12},time:n.createTime})})]})})})}),Vn=()=>t(te,{size:"small",itemLayout:"horizontal",dataSource:[{title:"您有一封新的邮件",type:"mail"},{title:"您有3个订单待支付",type:"payment"},{title:"张三 的请假申请需要您的审批",type:"workflow"},{title:"本周周报待填写",type:"common"}],renderItem:n=>t(te.Item,{children:t(te.Item.Meta,{avatar:t(w,{style:{fontSize:30},type:`icon-${n.type}`}),title:t("a",{href:"https://ant.design",children:n.title}),description:"3天前"})})}),Hn=()=>h(E,{children:[t(ze,{centered:!0,style:{width:300},defaultActiveKey:"notify",items:[{key:"notify",label:"通知(3)",children:t(Vn,{})},{key:"message",label:"消息(4)",children:t(jn,{})}],onChange:void 0,tabBarExtraContent:t(S,{type:"link",style:{marginRight:10},children:"清空"})}),t(H,{style:{margin:"8px 0"}}),h(O,{split:t(H,{type:"vertical"}),style:{width:"100%",justifyContent:"center",marginBottom:0},children:[t(S,{type:"link",children:"全部已读"}),t(S,{type:"link",children:"查看更多"})]})]}),qn=e=>t(be,{count:98,children:t(yt,{arrow:!1,content:t(Hn,{}),placement:"bottomRight",trigger:"click",children:t(w,{title:"通知提醒",type:"icon-notify",className:"action-icon"})})}),Kn=()=>t(w,{title:"搜索",type:"icon-search",className:"action-icon"}),Yn=()=>{const{settings:{theme:e},setSetting:n}=a.useContext(K),r=()=>{n({followSystemTheme:!1,theme:e==="light"?"dark":"light"})};return e==="dark"?t(w,{onClick:r,title:"主题-深色模式",type:"icon-theme-dark",className:"action-icon"}):t(w,{onClick:r,title:"主题-明亮模式",type:"icon-theme-light",className:"action-icon"})};const Wn=e=>{const n=["#1890ff","#722ed1","#eb2f96","#00b96b","#52c41a","#13c2c2","#1677ff","#f5222d","#fa8c16","#faad14"],{onChange:r,presetColors:o=n,defaultSelectedColor:s=""}=e,{value:l=s}=e,[d,c]=a.useState(l),u=i=>{c(i),r==null||r(i)};return t("div",{className:"theme-color-wrap",children:o.map(i=>t("div",{onClick:()=>u(i),className:"theme-color-item",style:{backgroundColor:i},title:i,children:d===i&&t(kt,{className:"checked-icon"})},i))})},Gn=e=>{const{open:n,onClose:r=G}=e,{settings:o,setSetting:s}=a.useContext(K),[l]=k.useForm(),[d]=Qe(),c=a.useMemo(()=>({...o,theme:o.followSystemTheme?"followSystem":o.theme}),[o]),u=(i,m)=>{const g={...i},{theme:v,fixedMenu:b,fixedHeader:C}=g;v&&(console.log("themeee",v),g.followSystemTheme=!1,v==="followSystem"&&(g.followSystemTheme=!0,g.theme=d)),b&&(g.fixedHeader=!0),C===!1&&(g.fixedMenu=!1),s(g),console.log("chage",i,m)};return xe(()=>{l==null||l.setFieldsValue(c)},[c]),t(vt,{title:"偏好设置",onClose:r,open:n,children:h(k,{name:"basic",labelCol:{span:5},wrapperCol:{span:19},initialValues:{...c},autoComplete:"off",onValuesChange:u,form:l,children:[t(k.Item,{label:"外观",name:"theme",children:h(J.Group,{buttonStyle:"solid",children:[h(J.Button,{value:"light",children:[t(w,{type:"icon-theme-light"})," 浅色"]}),h(J.Button,{value:"dark",children:[t(w,{type:"icon-theme-dark"})," 深色"]}),h(J.Button,{value:"followSystem",children:[t(w,{type:"icon-followSystem"})," 跟随系统"]})]})}),t(k.Item,{label:"紧凑模式",valuePropName:"checked",name:"compactMode",children:t(oe,{checkedChildren:"开启",unCheckedChildren:"关闭"})}),t(k.Item,{label:"主题色",name:"primaryColor",children:t(Wn,{defaultSelectedColor:o.primaryColor})}),t(H,{children:"布局"}),t(k.Item,{label:"多标签页",valuePropName:"checked",name:"multitabMode",children:t(oe,{checkedChildren:"启用",unCheckedChildren:"关闭"})}),t(k.Item,{label:"固定头部",valuePropName:"checked",name:"fixedHeader",children:t(oe,{checkedChildren:"开启",unCheckedChildren:"关闭"})}),t(k.Item,{help:"固定菜单启用时, 头部也会同步固定",label:"固定菜单",valuePropName:"checked",name:"fixedMenu",children:t(oe,{checkedChildren:"开启",unCheckedChildren:"关闭"})}),t(k.Item,{valuePropName:"checked",label:"显示底部",name:"showFooter",children:t(oe,{checkedChildren:"开启",unCheckedChildren:"关闭"})})]})})},Jn=e=>{const[n,r]=a.useState(!1);return h("div",{children:[t(Gn,{open:n,onClose:()=>{r(!1)}}),t(w,{onClick:()=>{r(!0)},title:"设置",type:"icon-setting",className:"action-icon"})]})},Qn=()=>{const{userInfo:e,setUserInfo:n,setIsLogin:r}=a.useContext(Y),{menuCollapsed:o,setMenuCollapsed:s}=a.useContext(_),{token:{colorBgContainer:l}}=W.useToken(),d=Z(),c=()=>h("div",{className:"left",children:[h("div",{className:"logo",children:[t(w,{type:"icon-react",className:"logo-img"}),t("span",{className:"logo-text",children:"React Admin Template"})]}),t("div",{children:D.createElement(o?Ct:xt,{onClick:()=>s(!o)})})]}),u=()=>{const i=()=>h(E,{children:[t(Kn,{}),t(qn,{}),t(En,{}),t(Bn,{}),t(Yn,{}),t(Jn,{})]}),m=[{label:t("a",{children:"个人中心"}),icon:t(He,{}),key:"userCenter"},{label:t("a",{children:"修改资料"}),key:"update",icon:t(qe,{})},{type:"divider"},{label:"退出",icon:t(Tt,{}),key:"logout",onClick:()=>{mn().then(()=>{M.removeToken(),r(!1),n(null),d("/login")})}}];return t("div",{className:"right",children:h(O,{size:"middle",children:[i(),t(St,{menu:{items:m},children:h(O,{className:"pointer",children:[t("span",{children:e==null?void 0:e.nickname}),t(Ce,{src:e==null?void 0:e.avatar})]})})]})})};return t(A.Header,{className:"header",style:{background:l},children:h(E,{children:[c(),u()]})})},ot=D.memo(Qn),Zn=()=>{const e=Z(),{pathname:n}=X(),[r,o]=a.useState(),{menuList:s,mapPathToMenu:l}=a.useContext(_);let d="/dashboard",c=[],u=!1;const[i]=se();xe(()=>{let v=l.get(n);if(!v){let b="";l.forEach(({path:C})=>{n.startsWith(C)&&C.length>b.length&&(b=C)}),b&&(v=l.get(b))}v&&(v!=null&&v.hideInMenu?o([v.parent]):o([n]))},[n]);const m=v=>{const b=l.get(v.key);if(console.log("clicked menu",v,b),!b){console.warn("未获取到菜单信息");return}if(b.path!==n){if((b==null?void 0:b.type)==="url"){window.open(b.path,"_blank");return}if(document.title=`${B.pageTitlePrefix} - ${b.label}`,(b==null?void 0:b.type)==="iframe"){console.log("打开iframe页面"),e(tt(b.path));return}e(b.path)}},g=a.useMemo(()=>{const v=C=>C.badge?C.badge==="dot"?t(be,{className:"menu-item-badge",offset:[6,0],dot:!0,children:C.label}):t(be,{className:"menu-item-badge",offset:[15,0],count:C.badge,children:C.label}):C.label,b=(C,P)=>{const f=[];return!u&&P&&c.push(P.key),C.map(p=>{if(he(p)&&(p.parent&&n.indexOf(p.path)===0&&(console.log("ccccccccccccccccccccc",p.parent),d=p.parent,u=!0),p.type==="iframe"&&(i.get("url")||"")===p.path&&(u=!0,d=p.key),p.hideInMenu))return;let y;if(Tn(p))y={...p};else if(pe(p))y={...p},p.children&&p.children.length>0&&(y.children=b(p.children));else if(me(p)||et(p)){let{icon:x}=p;typeof x=="string"&&x.includes("icon-")&&(x=t(w,{type:x})),y={key:"",...p,icon:x,label:v(p),children:me(p)?b(p.children,p):void 0},!u&&p.path===n&&(d=p.key,u=!0)}y&&(y.key=y.key,f.push(y))}),!u&&c.pop(),f};return b(s)},[s]);return t(It,{style:{height:"100%"},onClick:m,mode:"inline",defaultSelectedKeys:[d],selectedKeys:r,items:g,defaultOpenKeys:c})},Xn=D.memo(Zn);const at=()=>{const{menuCollapsed:e}=a.useContext(_),{colorBgContainer:n}=re();return t(A.Sider,{style:{background:n},trigger:null,className:"left-sider",collapsible:!0,collapsed:e,children:t(Xn,{})})};const er=()=>{console.log("MultitabLayout render...");const{menuCollapsed:e}=a.useContext(_);return t(Nn,{children:h(A,{className:"multitab-layout","data-menu-collapsed":e?1:0,children:[t(ot,{}),h(A,{children:[t(at,{}),h(A,{className:"content-layout",children:[t(Un,{}),t(rt,{})]})]})]})})},tr=D.memo(er);const nr=({children:e})=>t(A.Content,{className:"content",children:e}),rr=D.memo(nr);const or=()=>{console.log("SingleLaylut render...");const{menuCollapsed:e}=a.useContext(_);return h(A,{className:"single-tab-layout","data-menu-collapsed":e?1:0,children:[t(ot,{}),h(A,{children:[t(at,{}),h(A,{className:"content-layout",children:[t(nt,{}),t(rr,{children:t(Pt,{})}),t(rt,{})]})]})]})};const ar=()=>{const[e,n]=a.useState(!0),{setIsLogin:r,setUserInfo:o}=a.useContext(Y),{colorBgContainer:s}=re(),{settings:{multitabMode:l,fixedMenu:d,fixedHeader:c,theme:u}}=a.useContext(K),i=Z(),[m]=se();return X(),console.log("global layout render..."),a.useEffect(()=>{if(!we()){i("/login");return}un().then(g=>{if(n(!1),r(!0),o(g),m.has("ghpage")){const v=decodeURIComponent(m.get("ghpage"));i(v);return}}).catch(g=>{g instanceof Mt&&_e.error({message:"网络错误",description:"获取用户信息失败, 无法打开页面",duration:null,closeIcon:null})})},[]),xe(()=>{we()||($.error("登录状态已失效, 即将跳转到登录页面..."),setTimeout(()=>{i("/login")},500))}),e?t(Ie,{title:"页面加载中",loading:e}):t(Pn,{children:h("div",{"data-fixed-menu":d?1:0,"data-fixed-header":c?1:0,style:{background:s},className:`global-layout theme-${u}`,children:[l?t(tr,{}):t(or,{}),t(Cn,{})]})})},sr=D.memo(ar),$e=()=>t("span",{children:"UserCenterPage"}),lr=()=>t("span",{children:"UserCenterUpdatePage"});const st=a.forwardRef(({state:e},n)=>{const[r]=k.useForm(),o=a.useRef(null);return a.useImperativeHandle(n,()=>({form:r,input:o.current}),[r,o]),t("div",{children:h(k,{form:r,labelCol:{span:3},name:"userForm",initialValues:e||void 0,children:[t(k.Item,{name:"username",label:"账号",rules:[{required:!0,message:"请输入账号"}],children:t(I,{placeholder:"请输入账号",ref:o})}),t(k.Item,{name:"password",label:"密码",rules:[{required:!e,message:"请输入密码"}],children:t(I.Password,{placeholder:e?"不修改密码请留空!":"请输入密码"})}),t(k.Item,{name:"nickname",label:"昵称",rules:[{required:!0,message:"请输入昵称"}],children:t(I,{placeholder:"请输入昵称"})}),t(k.Item,{name:"gender",label:"性别",children:h(J.Group,{children:[t(J,{value:1,children:"男"}),t(J,{value:2,children:"女"})]})}),t(k.Item,{name:"mobile",label:"手机号",children:t(I,{placeholder:"请输入手机号"})}),t(k.Item,{name:"email",label:"邮箱",children:t(I,{placeholder:"请输入邮箱"})})]})})}),ir=({refreshList:e})=>{const[n,r]=a.useState(!1),{run:o,loading:s}=ne(pn,{manual:!0,debounceWait:100,onSuccess:()=>{var c;r(!1),(c=l.current)==null||c.form.resetFields(),e==null||e()}}),l=a.useRef(null);return h("div",{children:[t(S,{type:"primary",icon:t(Se,{}),onClick:()=>{r(!0),setTimeout(()=>{var c,u;(u=(c=l.current)==null?void 0:c.input)==null||u.focus()},100)},children:"新增用户"}),t(Ke,{open:n,title:"添加用户",okText:"添加",cancelText:"取消",confirmLoading:s,onCancel:()=>r(!1),onOk:()=>{var c;(c=l.current)==null||c.form.validateFields().then(u=>{o(u)}).catch(u=>console.log(u))},children:t(st,{ref:l})})]})},cr=({search:e,form:n})=>t(k,{form:n,name:"advanced_search",style:{paddingTop:16},onFinish:o=>{console.log("Received values of form: ",o)},children:h(Te,{gutter:24,children:[t(V,{span:6,children:t(k.Item,{name:"username",label:"账号",children:t(I,{placeholder:"账号"})})}),t(V,{span:6,children:t(k.Item,{name:"mobile",label:"手机号",children:t(I,{placeholder:"手机号"})})}),t(V,{span:6,children:t(k.Item,{name:"email",label:"邮箱",children:t(I,{placeholder:"邮箱"})})}),h(V,{span:6,style:{textAlign:"right"},children:[t(S,{onClick:e.reset,children:"重置"}),t(S,{style:{margin:"0 8px"},type:"primary",onClick:e.submit,children:"查询"})]})]})}),dr=(e,n)=>{const r=Nt(e,n),{tableProps:o}=r,s={...o.pagination,showTotal:(c,u)=>`第${u[0]}-${u[1]} 条/共 ${c} 条`,hideOnSinglePage:!0};o.pagination=s;const l=o.onChange,d=(...c)=>{var P;let[u,i,m,g]=c,v=u,b,C;Object.keys(m).length>0&&(Array.isArray(m)?(C={},m.map(f=>{var p;C[(p=f.column)==null?void 0:p.dataIndex]=f.order})):C={[(P=m.column)==null?void 0:P.dataIndex]:m.order}),Object.keys(i).length>0&&(b=i,console.log("filterrrrrrrrrrrrr",i)),l(v,b,C)};return o.onChange=d,r.tableProps.size="small",r},ur=({state:e,refreshList:n})=>{const[r,o]=a.useState(!1),{runAsync:s,loading:l}=ne(fn,{manual:!0,debounceWait:100}),d=a.useRef(null);return h(E,{children:[t(S,{icon:t(qe,{}),size:"small",onClick:()=>{o(!0),setTimeout(()=>{var u,i;(i=(u=d.current)==null?void 0:u.input)==null||i.focus()},100)},children:"编辑"}),t(Ke,{open:r,title:"更新用户信息",okText:"保存",cancelText:"取消",confirmLoading:l,onCancel:()=>o(!1),onOk:()=>{var u;(u=d.current)==null||u.form.validateFields().then(i=>{s({...i,id:e.id}).then(()=>{var m;o(!1),(m=d.current)==null||m.form.resetFields(),n==null||n()}).catch(G)}).catch(i=>console.log(i))},children:t(st,{ref:d,state:e})})]})};const Q=e=>{const{children:n,className:r="",style:o={},...s}=e,{colorBgContainer:l}=re(),d="content-box",c={backgroundColor:l};return t("div",{className:`${d} ${r}`,style:{...c,...o},...s,children:n})},mr=()=>{var P;console.log("render ExampleUserListPage");const[e]=k.useForm(),[n,r]=a.useState([]),o=a.useRef();a.useEffect(()=>{o.current=new Map},[]);const{runAsync:s,loading:l}=ne(gn,{manual:!0,debounceWait:100}),{refresh:d,tableProps:c,search:u}=dr(hn,{form:e}),i=()=>{u.reset(),u.submit()},m=f=>{var p;typeof f=="number"&&((p=o==null?void 0:o.current)==null||p.set(f,!0)),s({id:f}).then(()=>{typeof f=="object"&&r([]),d()}).finally(()=>{var y;return typeof f=="number"&&((y=o==null?void 0:o.current)==null?void 0:y.delete(f))})},g=a.useMemo(()=>[{title:"ID",dataIndex:"id"},{title:"账号",dataIndex:"username",render:(f,{avatar:p,username:y})=>h(E,{children:[" ",t(Ce,{src:p})," ",y]})},{title:"昵称",dataIndex:"nickname"},{title:"性别",dataIndex:"gender",render:f=>f===Ze.male?t(Me,{color:"blue",children:"男"}):t(Me,{color:"error",children:"女"})},{title:"邮箱",dataIndex:"email"},{title:"手机号",dataIndex:"mobile",sorter:!0},{title:"注册时间",dataIndex:"create_time",sorter:!0},{title:"操作",key:"operation",fixed:"right",render:(f,p)=>{var x;const{id:y}=p;return h(O,{children:[t(Ne,{title:"确认要删除这条数据吗?",onConfirm:()=>m(y),children:t(S,{loading:(x=o==null?void 0:o.current)==null?void 0:x.has(y),icon:t(Lt,{}),size:"small",danger:!0,children:"删除"})}),t(ur,{state:p,refreshList:d})]})}}],[]),b={selectedRowKeys:n,onChange:f=>{console.log("selectedRowKeys changed: ",f),r(f)}},C=n.length>0;return h(E,{children:[h(Q,{children:[t("div",{children:t(R.Title,{level:5,children:"搜索"})}),t(cr,{search:u,form:e})]}),t("br",{}),h(Q,{children:[h("div",{className:"table-header",children:[t("div",{className:"left",children:t(R.Title,{level:5,children:"用户列表"})}),t("div",{className:"right",children:h(O,{size:"middle",children:[t(Ne,{title:`确定要删除这${n.length}条数据吗?`,onConfirm:()=>m(n),children:t(S,{type:"primary",danger:!0,disabled:!C,loading:l&&((P=o.current)==null?void 0:P.size)===0,children:"批量删除"})}),t(ir,{refreshList:i}),t(S,{type:"link",title:"点击刷新",onClick:d,icon:t(At,{})})]})})]}),t(wt,{rowKey:"id",rowSelection:b,columns:g,...c})]})]})},ce=({title:e="空白页"})=>{const[n,r]=a.useState(0);return se(),console.log("BlankPage: 被调用"),a.useEffect(()=>(console.log("BlankPage: 初次渲染"),()=>{console.log("BlankPage: 被卸载了")}),[]),h(Q,{style:{height:"500px"},children:[t(R.Title,{level:4,children:e}),h(R.Text,{children:["Count: ",n]}),t("br",{}),t(S,{onClick:o=>r(s=>s+1),children:"add"})]})},hr=()=>{const{pathname:e}=X();return t(Rt,{status:"404",title:"404",subTitle:`页面不存在, 当前路由: ${e}`,extra:t(S,{type:"primary",children:t(ge,{to:"/",children:"返回首页"})})})};const pr=()=>{const[e]=k.useForm(),n=Z(),r="articleDraft",{loading:o,run:s}=ne(yn,{manual:!0,debounceWait:200,onSuccess:()=>setTimeout(()=>{M.remove(r),n("/article/list")},200)}),l=M.getObject(r)||{},d=async()=>{const i=await e.validateFields();s(i)},c=()=>{const{cover:i,...m}=e.getFieldsValue();M.set(r,m),$.success("已保存到草稿箱")},u=i=>(console.log("Upload event:",i),Array.isArray(i)?i:i&&i.fileList);return h(Q,{children:[t(R.Title,{level:3,children:"发布文章"}),t(H,{}),t(k,{form:e,name:"createForm",labelCol:{span:3},initialValues:l,children:h(Te,{gutter:36,children:[h(V,{span:16,children:[t(k.Item,{name:"title",label:"文章标题",rules:[{required:!0,message:"请输入标题"}],children:t(I,{})}),t(k.Item,{label:"简介",name:"description",children:t(I,{})}),t(k.Item,{label:"内容",name:"content",rules:[{required:!0,message:"请输入内容"}],children:t(I.TextArea,{rows:20})}),t(k.Item,{wrapperCol:{offset:3},children:h(O,{children:[t(S,{icon:t(Ye,{}),onClick:d,loading:o,type:"primary",children:"发布文章"}),t(S,{icon:t($t,{}),onClick:c,children:"保存为草稿"})]})})]}),h(V,{span:8,children:[t(k.Item,{label:"封面",name:"cover",getValueFromEvent:u,valuePropName:"fileList",children:t(We,{maxCount:1,listType:"picture-card",children:h("div",{children:[t(Se,{}),t("div",{style:{marginTop:8},children:"选择图片"})]})})}),t(k.Item,{label:"标签",name:"tags",children:t(Ge,{mode:"tags",placeholder:"文章标签"})}),t(k.Item,{label:"作者",name:"author",rules:[{required:!0,message:"请输入作者"}],children:t(I,{})})]})]})})]})},fr=()=>{const[e]=k.useForm(),n=Z(),r=Ot(),{loading:o,run:s}=ne(bn,{manual:!0,debounceWait:10,onSuccess:i=>e.setFieldsValue(i)});a.useEffect(()=>{s({id:r.id})},[r.id]);const{loading:l,run:d}=ne(kn,{manual:!0,debounceWait:200,onSuccess:()=>setTimeout(()=>{n("/article/list")},200)}),c=async()=>{const i=await e.validateFields();d(i)},u=i=>(console.log("Upload event:",i),Array.isArray(i)?i:i&&i.fileList);return h(Q,{children:[t(R.Title,{level:3,children:"更新文章"}),t(H,{}),t(Be,{spinning:o,children:t(k,{form:e,name:"createForm",labelCol:{span:3},children:h(Te,{gutter:36,children:[h(V,{span:16,children:[t(k.Item,{name:"title",label:"文章标题",rules:[{required:!0,message:"请输入标题"}],children:t(I,{})}),t(k.Item,{label:"简介",name:"description",children:t(I,{})}),t(k.Item,{label:"内容",name:"content",rules:[{required:!0,message:"请输入内容"}],children:t(I.TextArea,{rows:20})}),t(k.Item,{wrapperCol:{offset:3},children:t(O,{children:t(S,{icon:t(Ye,{}),onClick:c,loading:l,type:"primary",children:"保存"})})})]}),h(V,{span:8,children:[t(k.Item,{label:"封面",name:"cover",getValueFromEvent:u,valuePropName:"fileList",children:t(We,{maxCount:1,listType:"picture-card",children:h("div",{children:[t(Se,{}),t("div",{style:{marginTop:8},children:"选择图片"})]})})}),t(k.Item,{label:"标签",name:"tags",children:t(Ge,{mode:"tags",placeholder:"文章标签"})}),t(k.Item,{label:"作者",name:"author",rules:[{required:!0,message:"请输入作者"}],children:t(I,{})})]})]})})})]})},gr=()=>{const{userInfo:e,setUserInfo:n}=a.useContext(Y),r=o=>{n({...e,roles:[o]})};return h(Q,{children:[h(R.Text,{children:["当前权限: ",JSON.stringify(e==null?void 0:e.roles)]}),t(H,{}),h(S.Group,{children:[t(S,{type:"primary",onClick:()=>r("admin"),children:"切换为 Admin"}),t(S,{onClick:()=>r("guest"),children:"切换为 Guest"})]})]})},Oe=({children:e,role:n})=>{const{userInfo:r}=a.useContext(Y);return Xe(n,r)?t(E,{children:e}):null},br=()=>{const{userInfo:e,setUserInfo:n}=a.useContext(Y),r=o=>{n({...e,roles:[o]})};return h(Q,{children:[h(R.Text,{children:["当前权限: ",JSON.stringify(e==null?void 0:e.roles)]}),t(H,{}),h(S.Group,{children:[t(S,{type:"primary",onClick:()=>r("admin"),children:"切换为 Admin"}),t(S,{onClick:()=>r("guest"),children:"切换为 Guest"})]}),t(H,{}),h(O,{children:[t(Oe,{role:"admin",children:t(S,{type:"primary",children:"Admin menu"})}),t(Oe,{role:"guest",children:t(S,{children:"Guest menu"})})]})]})},yr=a.lazy(()=>le(()=>import("./index-6d415b49.js"),["assets/index-6d415b49.js","assets/vendor-2fae8136.js"])),Fe=a.lazy(()=>le(()=>import("./index-84bcadcb.js"),["assets/index-84bcadcb.js","assets/vendor-2fae8136.js"])),kr=a.lazy(()=>le(()=>import("./index-5002548d.js"),["assets/index-5002548d.js","assets/vendor-2fae8136.js","assets/index-5c0cb4e1.css"])),vr=a.lazy(()=>le(()=>import("./index-795160d7.js"),["assets/index-795160d7.js","assets/vendor-2fae8136.js"])),Cr=a.lazy(()=>le(()=>import("./index-9019b3b7.js"),["assets/index-9019b3b7.js","assets/vendor-2fae8136.js","assets/index-c11d3a46.css"])),ae=({children:e})=>t(D.Suspense,{fallback:t(Ie,{}),children:e});function xr(){return[{path:"/login",element:t(ae,{children:t(kr,{})})},{path:"/",element:t(sr,{}),children:[{path:"/",element:t(nn,{to:"/dashboard"})},{path:"/dashboard",element:t(ae,{children:t(vr,{})})},{path:"/user",children:[{index:!0,element:t($e,{})},{path:"/user/center/index",element:t($e,{})},{path:"/user/center/update",element:t(lr,{})}]},{path:"/example",children:[{path:"/example/userList",element:t(mr,{})},{path:"/example/tabs/manage",element:t(ae,{children:t(yr,{})})},{path:"/example/permission",children:[{path:"/example/permission/menu",element:t(gr,{})},{path:"/example/permission/button",element:t(br,{})}]}]},{path:"/article",children:[{index:!0,element:t(ae,{children:t(Fe,{})})},{path:"/article/list",element:t(Fe,{})},{path:"/article/create",element:t(pr,{})},{path:"/article/update/:id",element:t(fr,{})}]},{path:"/blank",element:t(ce,{})},{path:"/badge/dot",element:t(ce,{title:"红点徽标"})},{path:"/badge/count",element:t(ce,{title:"数字徽标"})},{path:U,element:t(ae,{children:t(Cr,{})})},{path:"/multilevel/menu/2/3",element:t(ce,{title:"三级菜单"})},{path:"*",element:t(hr,{})}]}]}function Sr(){a.useEffect(()=>{},[]);const e=Ft(xr(),{basename:"/react-admin-template/"});return t(Xt,{children:t(Ut,{router:e})})}function Ue(e){const n=JSON.stringify({type:"JWT",alg:"HS256"}),r=Number((new Date().getTime()/1e3).toFixed(0)),o=JSON.stringify({iss:"github.com/xstnet",sub:"react-admin",iat:r,exp:r+86400*14,data:e}),s="H_97UyQUOmURnZdDwI0khuAt4Cmg";return`${Le(n)}.${Le(o)}.${s}`}T.mock(/api\/login/,"post",({body:e})=>{const{username:n,password:r}=JSON.parse(e);return n==="admin"?r!=="123456"?{code:-1,message:"密码错误"}:{code:0,message:"登录成功",data:{token:Ue({uid:1})}}:{code:0,message:"登录成功",data:{token:Ue({uid:ee.Random.natural(2,1e4)})}}});T.setup({timeout:100});T.mock(/api\/user\/info/,"get",e=>({code:0,message:"ok",data:{id:1,username:"admin",nickname:"醉丶春风",avatar:"https://www.xstnet.com/static/images/head.gif",password:"",gender:ee.Random.natural(1,2),email:"shantongxu@qq.com",mobile:"133xxxx3333",roles:["admin"]}}));T.mock(/api\/user\/logout/,"post",e=>({code:0,message:"退出成功"}));T.mock(/api\/user\/list/,"get",e=>{const n=new URLSearchParams(e.url);let r=Number(n.has("pageSize")?n.get("pageSize"):10);const o={code:0,message:"ok",data:{total:100,[`list|${r}`]:[{"id|+1":r,username:"@first@last",nickname:"@cname",avatar:()=>ee.Random.dataImage("200x200"),email:"@email",mobile:()=>T.mock(/^1[3456789]\d{9}$/).replace(/^(\d{3})\d{4}(\d{4})$/,"$1****$2"),"gender|1-2":0,create_time:"@date(yyyy-MM-dd HH:MM:ss)"}]}};return T.mock(o)});T.mock(/api\/user\/create/,"post",e=>({code:0,message:"创建成功",data:{id:ee.Random.natural(100,9999)}}));T.mock(/api\/user\/update/,"post",e=>({code:0,message:"更新成功"}));T.mock(/api\/user\/delete/,"post",e=>({code:0,message:"删除成功"}));T.setup({timeout:100});T.mock(/api\/article\/detail/,"get",e=>(console.log("🚀 ~ file: article.ts:7 ~ Mock.mock ~ options:",e),{code:0,message:"ok",data:{id:1,title:"主题",description:"醉丶春风",author:"醉丶春风",tags:[1,2],content:"content",create_time:ee.Random.datetime()}}));T.mock(/api\/article\/list/,"get",e=>{const n=new URLSearchParams(e.url);let r=Number(n.has("pageSize")?n.get("pageSize"):10);const o={code:0,message:"ok",data:{total:100,[`list|${r}`]:[{"id|+1":r,author:"@first@last",title:()=>T.Random.ctitle(5,20),description:"@cname",cover:()=>ee.Random.dataImage("480x270","封面"),content:"@email",create_time:"@date(yyyy-MM-dd HH:MM:ss)"}]}};return T.mock(o)});T.mock(/api\/article\/create/,"post",e=>({code:0,message:"创建成功",data:{id:ee.Random.natural(100,9999)}}));T.mock(/api\/article\/update/,"post",e=>({code:0,message:"更新成功"}));T.mock(/api\/article\/delete/,"post",e=>({code:0,message:"删除成功"}));Et.createRoot(document.getElementById("root")).render(t(Sr,{}));export{Q as C,on as D,E as F,fe as M,zn as R,K as S,rn as T,t as a,B as b,M as c,Pr as d,re as e,_ as f,Mr as g,h as j,Nr as p,Ir as r,dr as u,we as v};
