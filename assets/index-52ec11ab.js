import{j as Ce,r as o,C as ct,z as it,t as G,u as De,a as J,b as H,m as F,d as dt,S as _e,n as ze,c as O,B as S,e as je,R as _,f as Q,g as se,h as ce,L as ge,H as ut,i as mt,k as ht,T as Ve,l as de,o as pt,F as qe,p as He,q as ft,s as A,G as gt,v as $,w as yt,x as bt,y as ee,A as ve,U as Ke,D as q,E as ye,P as kt,I as Ct,J as v,K as xe,M as vt,N as V,O as ae,Q as xt,V as St,W as Tt,X as Ye,Y as It,Z as Pt,_ as Mt,$ as Nt,a0 as P,a1 as te,a2 as Se,a3 as Ge,a4 as Lt,a5 as wt,a6 as At,a7 as Rt,a8 as Ne,a9 as Te,aa as $t,ab as Ie,ac as ne,ad as Ft,ae as Ot,af as Le,ag as we,ah as Ut,ai as Et,aj as Bt,ak as Dt,al as We,am as _t,an as Je,ao as zt,ap as jt,aq as Vt,ar as I,as as Z,at as Ae,au as qt}from"./vendor-7bffd2da.js";(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))a(s);new MutationObserver(s=>{for(const l of s)if(l.type==="childList")for(const d of l.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&a(d)}).observe(document,{childList:!0,subtree:!0});function r(s){const l={};return s.integrity&&(l.integrity=s.integrity),s.referrerPolicy&&(l.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?l.credentials="include":s.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function a(s){if(s.ep)return;s.ep=!0;const l=r(s);fetch(s.href,l)}})();const U=Ce.Fragment,e=Ce.jsx,f=Ce.jsxs,B={pageTitle:"后台管理系统模板",pageTitlePrefix:"后台管理",tokenKey:"Authorization",apiBaseUrl:"https://xstnet.github.io/react-admin-template/api",iconFontUrl:"//at.alicdn.com/t/c/font_3917407_68ll5mr3jkf.js"};function Ht(t,n){localStorage.setItem(t,typeof n=="object"?JSON.stringify(n):n)}function Kt(t){localStorage.setItem(B.tokenKey,typeof t=="object"?JSON.stringify(t):t)}function Qe(t){return localStorage.getItem(t)}function Yt(t){const n=localStorage.getItem(t);if(n!==null)return Number(n)}function Gt(t){const n=localStorage.getItem(t);if(n!==null)return n==="true"}function Wt(t){const n=localStorage.getItem(t);if(n!==null)return JSON.parse(n)}function Jt(t){return Qe(t)!==null}function Qt(t){localStorage.removeItem(t)}function Zt(){localStorage.removeItem(B.tokenKey)}function Xt(){localStorage.clear()}const N={set:Ht,setToken:Kt,has:Jt,getString:Qe,getObject:Wt,getBoolean:Gt,getNumber:Yt,remove:Qt,removeToken:Zt,clear:Xt},Ze=()=>{const[t,n]=o.useState(window.matchMedia("(prefers-color-scheme: dark)").matches);return o.useEffect(()=>{const a=s=>{console.log("chage",s.matches),s.matches?n(!0):n(!1)};return window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",a),()=>{window.matchMedia("(prefers-color-scheme: dark)").removeEventListener("change",a)}},[]),[t?"dark":"light"]},en=void 0,tn=o.createContext(en),nn=({children:t})=>{const{settings:{primaryColor:n,theme:r,compactMode:a,followSystemTheme:s}}=o.useContext(K),[l]=Ze(),d={},i=()=>{const u=[];return s?u.push(l==="light"?G.defaultAlgorithm:G.darkAlgorithm):u.push(r==="light"?G.defaultAlgorithm:G.darkAlgorithm),a&&u.push(G.compactAlgorithm),u};return e(tn.Provider,{value:d,children:e(ct,{locale:it,theme:{algorithm:i(),token:{colorPrimary:n},components:{Button:{borderRadius:4,borderRadiusSM:2},Modal:{borderRadius:4,borderRadiusOuter:2}}},children:t})})},rn=void 0,K=o.createContext(rn),an=({children:t})=>{const n=o.useMemo(()=>({theme:"light",compactMode:!1,followSystemTheme:!1,fixedHeader:!0,fixedMenu:!0,showFooter:!0,multitabMode:!1,primaryColor:"#00b96b",...N.getObject("settings")||{}}),[]),[r,a]=o.useState(n),s=o.useCallback(d=>{const i={...r,...d};a(i),N.set("settings",i)},[r]),l={settings:r,setSetting:s};return e(K.Provider,{value:l,children:e(nn,{children:t})})},on=void 0,Y=o.createContext(on),sn=({children:t})=>{const[n,r]=o.useState(!1),[a,{toggleFullscreen:s}]=De(document.body),[l,d]=o.useState(null),i=o.useMemo(()=>({isLogin:n,setIsLogin:r,userInfo:l,setUserInfo:d,fullScreen:a,setFullScreen:s}),[n,l,a]);return e(Y.Provider,{value:i,children:e(an,{children:t})})},ln="modulepreload",cn=function(t){return"/react-admin-template/"+t},Re={},le=function(n,r,a){if(!r||r.length===0)return n();const s=document.getElementsByTagName("link");return Promise.all(r.map(l=>{if(l=cn(l),l in Re)return;Re[l]=!0;const d=l.endsWith(".css"),i=d?'[rel="stylesheet"]':"";if(!!a)for(let h=s.length-1;h>=0;h--){const g=s[h];if(g.href===l&&(!d||g.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${l}"]${i}`))return;const c=document.createElement("link");if(c.rel=d?"stylesheet":ln,d||(c.as="script",c.crossOrigin=""),c.href=l,document.head.appendChild(c),d)return new Promise((h,g)=>{c.addEventListener("load",h),c.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${l}`)))})})).then(()=>n())},dn=({to:t})=>{const n=J();return o.useEffect(()=>{n(t)},[]),null};var be=(t=>(t[t.success=0]="success",t[t.noLogin=-10001]="noLogin",t[t.loginExpired=-10002]="loginExpired",t))(be||{}),Xe=(t=>(t[t.male=1]="male",t[t.female=2]="female",t))(Xe||{}),un=(t=>(t[t.incomplete=1]="incomplete",t[t.completed=2]="completed",t[t.deleted=10]="deleted",t))(un||{}),mn=(t=>(t.day="YYYY-MM-DD",t.second="YYYY-MM-DD HH:mm:ss",t.minute="YYYY-MM-DD HH:mm",t.hour="YYYY-MM-DD HH",t))(mn||{});function W(){}function $r(t,n){return Math.floor(Math.random()*(n-t+1))+t}function et(t,n){const{roles:r=[]}=n||{};return t?typeof t=="string"||typeof t=="number"?r.includes(t):Array.isArray(t)?t.some(a=>r.includes(a)):typeof t=="function"?t(n):!1:!0}function hn(t){var r;const{config:n}=t;console.group(`${(r=n.method)==null?void 0:r.toLocaleUpperCase()} ${n.url}`),console.log("Path:",n.url),console.log("Method:",n.method),console.log("Params:",n.params),console.log("StatusCode:",t.status),console.log("Response:",typeof t.data=="object"?Object.assign(Object.create(null),t.data):t.data),console.groupEnd()}const pn=10*1e3;H.defaults.baseURL=B.apiBaseUrl;H.defaults.headers.post["Content-Type"]="application/json; charset=utf-8";H.defaults.timeout=pn;H.interceptors.request.use(t=>(t.headers.Authorization=`Bearer ${N.getString(B.tokenKey)}`,t),t=>Promise.reject(t));H.interceptors.response.use(t=>{hn(t);const n=t.data;return typeof n.code!="number"?(F.error("系统错误",2),console.warn("api调用失败, 未正常返回数据, url:",t.config.url,"data:",n,"response:",t),Promise.reject(t)):n.code===0?(t.config.method==="post"&&F.success(t.data.message),t):n.code===be.noLogin?(F.error("您还没有登录, 即将跳转到登录页面, 请稍后..."),N.remove(B.tokenKey),location.reload(),Promise.reject(n)):n.code===be.loginExpired?(F.error("登录已失效, 即将跳转到登录页面..."),N.remove(B.tokenKey),location.reload(),Promise.reject(n)):(F.error(n.message),Promise.reject(t))},t=>(typeof t.message=="string"&&t.message==="Network Error"?F.error("网络错误, 请稍后再试!"):F.error("请求失败, 请稍后再试"),console.log("Request error",t),console.groupEnd(),Promise.reject(t)));const fn=(t,n,r)=>{const a=r||{};return a.params=n,H.get(t,a)},gn=(t,n,r)=>H.post(t,n,r),yn=t=>H.request(t),L={get:fn,post:gn,request:yn},w=t=>t.then(n=>Promise.resolve(n.data.data)).catch(n=>Promise.reject(n)),Fr=t=>{const n=L.post("/login",t);return w(n)},bn=t=>w(L.get("/user/info",t)),kn=t=>w(L.post("/user/logout",t)),Cn=(t,n)=>w(L.get("/user/list",{...t,...n})),vn=t=>w(L.post("/user/create",t)),xn=t=>w(L.post("/user/update",t)),Sn=t=>w(L.post("/user/delete",t)),Or=(t,n)=>w(L.get("/article/list",{...t,...n})),Tn=t=>w(L.get("/article/detail",t)),In=t=>w(L.post("/article/create",t)),Pn=t=>w(L.post("/article/update",t)),Ur=t=>w(L.post("/article/delete",t));function Mn(t){const n=t.split(".")[1];if(n)try{return JSON.parse(dt(n))}catch(r){console.warn("Parse Token Error: ",r);return}}function $e(){var r;const t=N.getString(B.tokenKey);if(!t)return!1;const n=Mn(t);return n!==void 0&&((r=n==null?void 0:n.data)==null?void 0:r.uid)>0&&n.exp>new Date().getTime()/1e3}const Pe=({loading:t=!0,title:n="页面加载中",delay:r=50})=>{const{settings:{theme:a}}=o.useContext(K);return e(_e,{size:"large",spinning:t,tip:n,delay:r,wrapperClassName:`page-loading-spin-${a}`,children:e("div",{style:{height:"100%",width:"100%"}})})},Nn=()=>{const[t,n]=ze.useNotification(),r=N.getBoolean("dontShowCompactModeNotify"),{setSetting:a,settings:{compactMode:s}}=o.useContext(K),l=()=>{const d=`open${Date.now()}`,i=f(O,{children:[e(S,{type:"link",size:"small",onClick:()=>t.destroy(),children:"不再提示"}),e(S,{type:"primary",size:"small",onClick:()=>{a({compactMode:!0}),t.destroy(d)},children:"开启"})]});t.info({message:"开启紧凑布局模式",description:"检测到您的屏幕尺寸过小, 是否开启紧凑布局模式? 或者您也可以选择在设置中手动开启",btn:i,key:d,onClose:()=>N.set("dontShowCompactModeNotify",!0)})};return o.useEffect(()=>{!r&&!s&&window.innerWidth<=1440&&l()},[]),n},Ln=[{label:"控制台",icon:"icon-dashboard",path:"/dashboard",permission:"admin"},{label:"示例页面",path:"/example",icon:"icon-example",children:[{label:"列表页",icon:"icon-list",path:"/example/userList",permission:["admin","guest"]},{label:"权限测试页",icon:"icon-list",path:"/example/permission",children:[{label:"菜单权限",icon:"icon-list",path:"/example/permission/menu"},{label:"按钮权限",icon:"icon-list",path:"/example/permission/button"}]},{label:"多级菜单",icon:"icon-list",path:"/multilevel/menu",children:[{label:"二级菜单",icon:"icon-list",path:"/multilevel/menu/2",children:[{label:"三级菜单",icon:"icon-list",path:"/multilevel/menu/2/3"}]}]},{label:"Tabs标签页",icon:"icon-list",path:"/example/tabs",children:[{label:"标签管理",icon:"icon-list",path:"/example/tabs/manage"}]},{label:"空白页",icon:"icon-example",path:"/blank"},{label:"404",icon:"icon-example",path:"/404"}]},{label:"徽标示例",path:"/badge",icon:"icon-example",children:[{label:"红点徽标",icon:"icon-list",badge:"dot",path:"/badge/dot"},{label:"数字徽标",icon:"icon-example",badge:98,path:"/badge/count"}]},{path:"/article",label:"文章管理",icon:"icon-article",permission:"admin",children:[{path:"/article/list",label:"文章列表",icon:"icon-article"},{path:"/article/create",label:"发布文章",hideInMenu:!0,parent:"/article/list"},{path:"/article/update",label:"更新文章",hideInMenu:!0,parent:"/article/list"},{path:"/article/category",label:"分类管理",icon:"icon-list"}]},{path:"/iframe",label:"外部页面",icon:"icon-href",permission:"admin",children:[{path:"https://ant-design.antgroup.com/components/overview-cn",label:"antd文档(外链)",icon:"icon-document",type:"url"},{path:"https://ant-design.antgroup.com/components/overview-cn/",label:"antd文档(内嵌)",icon:"icon-document",type:"iframe"},{path:"https://www.xstnet.com",label:"博客主页(内嵌)",icon:"icon-document",type:"iframe"},{path:"https://baidu.com",label:"百度",icon:"icon-document",type:"iframe"}]},{path:"/document",label:"文档",hideInMenu:!0,icon:"icon-document",children:[{path:"/document/start",label:"开始使用",icon:"icon-document"},{path:"/document/package.json",label:"Package文件说明",icon:"icon-document"}]},{path:"/user/center",label:"个人中心",icon:"icon-user-permissions",permission:t=>t.roles.includes("admin"),children:[{path:"/user/center/index",label:"个人中心",icon:"icon-example"},{path:"/user/center/update",label:"修改信息",icon:"icon-document"}]}],wn=async t=>Ln;function tt(t){return!!(typeof t.children>"u"||Array.isArray(t.children)&&t.children.length===0)}function me(t){return pe(t)?!1:!!(typeof t.children<"u"&&Array.isArray(t.children)&&t.children.length>0)}function he(t){return typeof t.path=="string"&&typeof t.label=="string"}function pe(t){return typeof t.type<"u"&&t.type==="group"}function An(t){return typeof t.type<"u"&&t.type==="divider"}const Rn=void 0,D=o.createContext(Rn),$n=({children:t})=>{const{userInfo:n}=o.useContext(Y),[r,a]=o.useState([]),[s,l]=o.useState(!1);o.useEffect(()=>{async function c(){try{const h=await wn(n);a([...h])}catch(h){console.warn("获取菜单数据失败",h)}}c()},[n]);const{mapPathToMenu:d,processedMenuList:i}=o.useMemo(()=>(()=>{const h=new Map,g=y=>{he(y)&&(y.key=(y==null?void 0:y.key)||y.path);const{permission:T,...p}=y;return p},C=y=>y.map(p=>{var x;const{permission:m=void 0}=p;if(!et(m,n))return null;const k=g(p);return(me(k)||pe(k))&&(k.children=C(k.children||[]),!k.children||!((x=k.children)!=null&&x.length))?null:(he(k)&&h.set(k.path,k),k)}).filter(p=>p);return{processedMenuList:C(r),mapPathToMenu:h}})(),[r]),u=o.useMemo(()=>({menuList:i,setMenuList:a,menuCollapsed:s,setMenuCollapsed:l,mapPathToMenu:d}),[r,s]);return r.length===0?e(D.Provider,{value:u,children:e(Pe,{})}):e(D.Provider,{value:u,children:t})},Fn={addTab:W,removeTab:W,tabs:[],openTab:W,hasTab:()=>!1,setTabs:W,activeTab:"",whiteList:[],tabEvent:je(),addTabWithNavigate:W},fe=o.createContext(Fn),On=({children:t})=>{const[n,r]=o.useState([]),[a,s]=o.useState(""),l=o.useMemo(()=>je(),[]),d=J(),i=o.useCallback(()=>{const g=p=>{p&&p!==a&&s(p)},C=p=>n.findIndex(m=>m.key===p)>-1,b=(p,m=!0)=>{C(p.key)||r(k=>[...k,{...p}]),m&&a!==p.key&&g(p.key)};return{openTab:g,addTab:b,removeTab:p=>{const m=n.findIndex(x=>x.key===p);if(m===-1)return;const k=n[m===0?1:m-1];r(x=>x.filter(M=>M.key!==p)),a===p&&k&&d(k.key),console.log("tabs",n)},hasTab:C,addTabWithNavigate:p=>{b(p,!0);const m=n.find(x=>x.key===p.key)||p;if(!m){console.log("标签页不存在");return}const k=m.key+(m.queryString||"");d(k)}}},[n,a]),u=o.useMemo(()=>i(),[i]),c=["/"],h=o.useMemo(()=>({tabs:n,setTabs:r,activeTab:a,tabEvent:l,whiteList:c,...u}),[n,a]);return e(fe.Provider,{value:h,children:t})},re=()=>{const{token:t}=G.useToken();return t},E="/iframe",nt=t=>`${E}?url=${t}`;const ue=new Map,ke=t=>{t.map(n=>{he(n)&&(n==null?void 0:n.type)==="url"||(pe(n)&&ke(n.children||[]),(me(n)||tt(n))&&(n.path&&ue.set(n.path,n.label),n.children&&ke(n.children||[])))})},Un=()=>{const{menuList:t}=o.useContext(D),n=o.useMemo(()=>(ue.clear(),ke(t),ue),[t]),r=Q(),[a]=se(),s=()=>{if(r.pathname===E){const i=a.get("url");if(i&&ue.has(i))return[e(ce.Item,{children:e(ge,{style:{color:"inherit"},to:nt(i),children:n.get(i)})},i)]}return[]},l=o.useMemo(()=>{const i=r.pathname.split("/").filter(u=>u);return i.map((u,c)=>{const h=`/${i.slice(0,c+1).join("/")}`;return n.has(h)?e(ce.Item,{children:c===i.length-1?e(ge,{style:{color:"inherit"},to:h,children:n.get(h)}):n.get(h)},h):null})},[r]),d=[e(ce.Item,{children:e(ut,{})},"home"),...l,...s()];return e(ce,{className:"breadcrumb",children:d})},rt=_.memo(Un);function En({freeze:t,children:n}){const r=o.useRef({}).current;if(t&&!r.promise)throw r.promise=new Promise(a=>{r.resolve=a}),r.promise;if(t)throw r.promise;return r.promise&&(r.resolve(),r.promise=void 0),e(o.Fragment,{children:n})}function Bn({freeze:t,children:n,placeholder:r=null}){return e(o.Suspense,{fallback:r,children:e(En,{freeze:t,children:n})})}const Dn=({active:t,children:n,id:r,parentRef:a})=>{const[s]=o.useState(()=>document.createElement("div")),l=o.useRef(!0),d=r.indexOf(E)===0,i=o.useMemo(()=>mt.createPortal(n,s),[]);return o.useEffect(()=>{const u=()=>{var h,g;if(t&&s.setAttribute("id",r),d)return c();if(t)(h=a.current)==null||h.appendChild(s);else try{(g=a.current)==null||g.removeChild(s)}catch{}},c=()=>{var h;l.current&&((h=a.current)==null||h.appendChild(s)),s.style.display=t?"block":"none",l.current=!1};u()},[t,s,l.current]),o.useEffect(()=>()=>{var u;try{(u=a.current)==null||u.removeChild(s)}catch{}},[]),d?e(Bn,{freeze:!t,children:i}):i};let Fe=1;const _n=()=>{const t=ht(),{pathname:n,search:r}=Q(),a=n===E?n+r:n,{tabs:s,tabEvent:l,whiteList:d}=o.useContext(fe),i=o.useRef(null),[u,c]=o.useState([]);return o.useEffect(()=>{const h=l.on("reload",g=>{console.log("刷新页面:",g),c(u.map(C=>C.id!==g?C:{...C,key:++Fe}))});return()=>{h()}},[u]),o.useEffect(()=>{if(!a||d.includes(a))return;const h=s.map(g=>g.key);c(g=>(g.find(b=>b.id===a)||g.push({id:a,element:t,key:++Fe}),g.filter(b=>h.includes(b.id))))},[s]),d.includes(a)?t:f(U,{children:[e("div",{ref:i,className:"keep-alive"}),u.map(({id:h,element:g,key:C})=>e(Dn,{active:h===a,parentRef:i,id:h,children:g},C))]})};const zn=()=>{const{pathname:t}=Q(),{tabs:n,activeTab:r,removeTab:a,tabEvent:s,addTabWithNavigate:l}=o.useContext(fe),{colorPrimary:d}=re(),[i,u]=o.useState(!1),{colorBgLayout:c}=re(),h=p=>{p&&p!==t&&l({key:p,label:""})},g=(p,m)=>{m==="remove"&&a(p)},C=()=>{s.emit("reload",t)},b=p=>{const m=p;u(m),s.emit("fullScreen",m)},y=()=>f(O,{size:0,children:[e(de,{title:"刷新当前页面",children:e(S,{onClick:C,type:"link",style:{color:d},icon:e(pt,{})})}),(()=>i?e(de,{title:"退出全屏",children:e(S,{onClick:()=>b(!1),type:"link",style:{color:d},icon:e(qe,{})})}):e(de,{title:"全屏",children:e(S,{onClick:()=>b(!0),type:"link",style:{color:d},icon:e(He,{})})}))()]}),T={backgroundColor:c,left:i?0:void 0};return e(Ve,{className:"tabs-wrapper",type:"editable-card",hideAdd:!0,activeKey:r,items:[...n],onChange:h,onEdit:g,tabBarExtraContent:e(y,{}),style:T})};const jn=({children:t})=>{const{pathname:n,search:r}=Q(),{addTab:a,hasTab:s,openTab:l,tabs:d,tabEvent:i,whiteList:u}=o.useContext(fe),{mapPathToMenu:c}=o.useContext(D),h=o.useRef(null),[g,{toggleFullscreen:C}]=De(h),{colorBgLayout:b}=re(),[y]=se(),T=ft(),p=k=>{var z;let x="";const M=k.split("/").filter(j=>j);for(let j=0;j<M.length;j++){const Me=`/${M.slice(0,j+1).join("/")}`;c.has(Me)&&(x=((z=c.get(Me))==null?void 0:z.label)||x)}return x},m=()=>{if(u.includes(n))return;let k=n;n===E&&(k=y.get("url")||"");const x=c.get(k),M=x?n===E?n+r:x.key:n;if(s(M)){l(M);return}if(!x||!x.path){let z=p(k);if(!z)z="404",n===E&&(z="Iframe 页面");else{const{params:{id:j=void 0}}=T.pop()||{params:{id:void 0}};j&&(z+=": "+j)}a({label:z,key:M,queryString:r,children:null});return}a({label:x.label,key:M,queryString:n===E?"":r,children:null})};return o.useEffect(()=>{m()},[n,r]),o.useEffect(()=>{},[r]),o.useEffect(()=>{const k=i.on("fullScreen",x=>{C()});return()=>{k()}},[]),f(A.Content,{className:"content",ref:h,style:{backgroundColor:b},children:[d.length?e(zn,{}):null,d.length?e(rt,{}):null,e(_n,{})]})},Vn=_.memo(jn),at=()=>{const{settings:{showFooter:t}}=o.useContext(K),{Text:n,Link:r}=$;return t?f(A.Footer,{style:{textAlign:"center",paddingBottom:4},children:[f(n,{type:"secondary",children:["React Admin Template",e(r,{href:"https://github.com/xstnet/react-admin-template",target:"_blank",style:{color:"inherit",marginLeft:5},children:e(gt,{})})]}),e("br",{}),e(r,{href:"https://github.com/xstnet",target:"_blank",children:e(n,{type:"secondary",children:"醉丶春风"})}),f(n,{type:"secondary",children:["©2023 Created by",e(r,{target:"_blank",href:"https://ant-design.antgroup.com/index-cn",style:{margin:"0 6px",color:"inherit"},children:"Ant Design"}),"V5"]})]}):null};const R=yt({scriptUrl:B.iconFontUrl,extraCommonProps:{}}),qn=()=>{const{fullScreen:t,setFullScreen:n}=o.useContext(Y),r=()=>{F.success(t?"已退出全屏模式":"进入全屏模式"),n(!t)};return t?e(qe,{title:"退出全屏模式",className:"action-icon",onClick:r}):e(He,{title:"进入全屏模式",className:"action-icon",onClick:r})},Hn=()=>e($.Link,{className:"action-icon",target:"_blank",style:{color:"inherit"},href:"https://github.com/xstnet/react-admin-template",children:e(bt,{})}),Kn=[[2,1,"刚刚"],[60,1,"%d秒前"],[3600,60,"%d分钟前"],[86400,3600,"%d小时前"],[86400*30,3600*24,"%d天前"],[86400*30*12,3600*24*30,"%d月前"],[1/0,3600*24*30*12,"%d年前"]],Yn=[[-60,1,"%d秒后"],[-3600,60,"%d分钟后"],[-86400,3600,"%d小时后"],[-(86400*30),3600*24,"%d天后"],[-(86400*30*12),3600*24*30,"%d月后"],[-1/0,3600*24*30*12,"%d年后"]],Gn=({time:t,...n})=>{const r=Math.floor(new Date().getTime()/1e3),a=Math.floor(new Date(t).getTime()/1e3),s=r-a;if(isNaN(a))return e(U,{children:"time"});const l=s<-1?Yn:Kn;let d="";for(const[i,u,c]of l)if(Math.abs(s)<Math.abs(i)){const h=Math.floor(Math.abs(s)/u);d=c.replace("%d",String(h));break}return e(de,{title:t,children:e("span",{...n,children:d})})},Wn=()=>e(ee,{size:"small",itemLayout:"horizontal",dataSource:[{title:"张三 评论了你",desc:"评论内容评论内容评论内容",createTime:"2023-04-06 15:39:00"},{title:"您有3个订单待支付",desc:"订单1,订单2,订单3",createTime:"2023-04-05 15:39:00"},{title:"张三 的请假申请需要您的审批",desc:"",createTime:"2023-04-01 12:08:00"},{title:"本周周报待填写",createTime:"2023-03-02 10:55:00",desc:"说明"}],renderItem:n=>e(ee.Item,{children:e(ee.Item.Meta,{avatar:e(ve,{size:48,icon:e(Ke,{})}),title:e("a",{href:"https://ant.design",children:n.title}),description:f("div",{children:[n.desc,n.desc&&e("br",{}),e($.Text,{children:e(Gn,{style:{fontSize:12},time:n.createTime})})]})})})}),Jn=()=>e(ee,{size:"small",itemLayout:"horizontal",dataSource:[{title:"您有一封新的邮件",type:"mail"},{title:"您有3个订单待支付",type:"payment"},{title:"张三 的请假申请需要您的审批",type:"workflow"},{title:"本周周报待填写",type:"common"}],renderItem:n=>e(ee.Item,{children:e(ee.Item.Meta,{avatar:e(R,{style:{fontSize:30},type:`icon-${n.type}`}),title:e("a",{href:"https://ant.design",children:n.title}),description:"3天前"})})}),Qn=()=>f(U,{children:[e(Ve,{centered:!0,style:{width:300},defaultActiveKey:"notify",items:[{key:"notify",label:"通知(3)",children:e(Jn,{})},{key:"message",label:"消息(4)",children:e(Wn,{})}],onChange:void 0,tabBarExtraContent:e(S,{type:"link",style:{marginRight:10},children:"清空"})}),e(q,{style:{margin:"8px 0"}}),f(O,{split:e(q,{type:"vertical"}),style:{width:"100%",justifyContent:"center",marginBottom:0},children:[e(S,{type:"link",children:"全部已读"}),e(S,{type:"link",children:"查看更多"})]})]}),Zn=t=>e(ye,{count:98,children:e(kt,{arrow:!1,content:e(Qn,{}),placement:"bottomRight",trigger:"click",children:e(R,{title:"通知提醒",type:"icon-notify",className:"action-icon"})})}),Xn=()=>e(R,{title:"搜索",type:"icon-search",className:"action-icon"}),er=()=>{const{settings:{theme:t},setSetting:n}=o.useContext(K),r=()=>{n({followSystemTheme:!1,theme:t==="light"?"dark":"light"})};return t==="dark"?e(R,{onClick:r,title:"主题-深色模式",type:"icon-theme-dark",className:"action-icon"}):e(R,{onClick:r,title:"主题-明亮模式",type:"icon-theme-light",className:"action-icon"})};const tr=t=>{const n=["#1890ff","#722ed1","#eb2f96","#00b96b","#52c41a","#13c2c2","#1677ff","#f5222d","#fa8c16","#faad14"],{onChange:r,presetColors:a=n,defaultSelectedColor:s=""}=t,{value:l=s}=t,[d,i]=o.useState(l),u=c=>{i(c),r==null||r(c)};return e("div",{className:"theme-color-wrap",children:a.map(c=>e("div",{onClick:()=>u(c),className:"theme-color-item",style:{backgroundColor:c},title:c,children:d===c&&e(Ct,{className:"checked-icon"})},c))})},nr=t=>{const{open:n,onClose:r=W}=t,{settings:a,setSetting:s}=o.useContext(K),[l]=v.useForm(),[d]=Ze(),i=o.useMemo(()=>({...a,theme:a.followSystemTheme?"followSystem":a.theme}),[a]),u=(c,h)=>{const g={...c},{theme:C,fixedMenu:b,fixedHeader:y}=g;C&&(console.log("themeee",C),g.followSystemTheme=!1,C==="followSystem"&&(g.followSystemTheme=!0,g.theme=d)),b&&(g.fixedHeader=!0),y===!1&&(g.fixedMenu=!1),s(g),console.log("chage",c,h)};return xe(()=>{l==null||l.setFieldsValue(i)},[i]),e(vt,{title:"偏好设置",onClose:r,open:n,children:f(v,{name:"basic",labelCol:{span:5},wrapperCol:{span:19},initialValues:{...i},autoComplete:"off",onValuesChange:u,form:l,children:[e(v.Item,{label:"外观",name:"theme",children:f(V.Group,{buttonStyle:"solid",children:[f(V.Button,{value:"light",children:[e(R,{type:"icon-theme-light"})," 浅色"]}),f(V.Button,{value:"dark",children:[e(R,{type:"icon-theme-dark"})," 深色"]}),f(V.Button,{value:"followSystem",children:[e(R,{type:"icon-followSystem"})," 跟随系统"]})]})}),e(v.Item,{label:"紧凑模式",valuePropName:"checked",name:"compactMode",children:e(ae,{checkedChildren:"开启",unCheckedChildren:"关闭"})}),e(v.Item,{label:"主题色",name:"primaryColor",children:e(tr,{defaultSelectedColor:a.primaryColor})}),e(q,{children:"布局"}),e(v.Item,{label:"多标签页",valuePropName:"checked",name:"multitabMode",children:e(ae,{checkedChildren:"启用",unCheckedChildren:"关闭"})}),e(v.Item,{label:"固定头部",valuePropName:"checked",name:"fixedHeader",children:e(ae,{checkedChildren:"开启",unCheckedChildren:"关闭"})}),e(v.Item,{help:"固定菜单启用时, 头部也会同步固定",label:"固定菜单",valuePropName:"checked",name:"fixedMenu",children:e(ae,{checkedChildren:"开启",unCheckedChildren:"关闭"})}),e(v.Item,{valuePropName:"checked",label:"显示底部",name:"showFooter",children:e(ae,{checkedChildren:"开启",unCheckedChildren:"关闭"})})]})})},rr=t=>{const[n,r]=o.useState(!1);return f("div",{children:[e(nr,{open:n,onClose:()=>{r(!1)}}),e(R,{onClick:()=>{r(!0)},title:"设置",type:"icon-setting",className:"action-icon"})]})},ar=()=>{const{userInfo:t,setUserInfo:n,setIsLogin:r}=o.useContext(Y),{menuCollapsed:a,setMenuCollapsed:s}=o.useContext(D),{token:{colorBgContainer:l}}=G.useToken(),d=J(),i=()=>f("div",{className:"left",children:[f("div",{className:"logo",children:[e(R,{type:"icon-react",className:"logo-img"}),e("span",{className:"logo-text",children:"React Admin Template"})]}),e("div",{children:_.createElement(a?xt:St,{onClick:()=>s(!a)})})]}),u=()=>{const c=()=>f(U,{children:[e(Xn,{}),e(Zn,{}),e(qn,{}),e(Hn,{}),e(er,{}),e(rr,{})]}),h=[{label:e("a",{children:"个人中心"}),icon:e(Ke,{}),key:"userCenter"},{label:e("a",{children:"修改资料"}),key:"update",icon:e(Ye,{})},{type:"divider"},{label:"退出",icon:e(It,{}),key:"logout",onClick:()=>{kn().then(()=>{N.removeToken(),r(!1),n(null),d("/login")})}}];return e("div",{className:"right",children:f(O,{size:"middle",children:[c(),e(Tt,{menu:{items:h},children:f(O,{className:"pointer",children:[e("span",{children:t==null?void 0:t.nickname}),e(ve,{src:t==null?void 0:t.avatar})]})})]})})};return e(A.Header,{className:"header",style:{background:l},children:f(U,{children:[i(),u()]})})},ot=_.memo(ar),or=()=>{const t=J(),{pathname:n}=Q(),[r,a]=o.useState(),{menuList:s,mapPathToMenu:l}=o.useContext(D);let d="/dashboard",i=[],u=!1;const[c]=se();xe(()=>{let C=l.get(n);if(!C){let b="";l.forEach(({path:y})=>{n.startsWith(y)&&y.length>b.length&&(b=y)}),b&&(C=l.get(b))}C&&(C!=null&&C.hideInMenu?a([C.parent]):a([n]))},[n]);const h=C=>{const b=l.get(C.key);if(console.log("clicked menu",C,b),!b){console.warn("未获取到菜单信息");return}if(b.path!==n){if((b==null?void 0:b.type)==="url"){window.open(b.path,"_blank");return}if(document.title=`${B.pageTitlePrefix} - ${b.label}`,(b==null?void 0:b.type)==="iframe"){console.log("打开iframe页面"),t(nt(b.path));return}t(b.path)}},g=o.useMemo(()=>{const C=y=>y.badge?y.badge==="dot"?e(ye,{className:"menu-item-badge",offset:[6,0],dot:!0,children:y.label}):e(ye,{className:"menu-item-badge",offset:[15,0],count:y.badge,children:y.label}):y.label,b=(y,T)=>{const p=[];return!u&&T&&i.push(T.key),y.map(m=>{if(he(m)&&(m.parent&&n.indexOf(m.path)===0&&(console.log("ccccccccccccccccccccc",m.parent),d=m.parent,u=!0),m.type==="iframe"&&(c.get("url")||"")===m.path&&(u=!0,d=m.key),m.hideInMenu))return;let k;if(An(m))k={...m};else if(pe(m))k={...m},m.children&&m.children.length>0&&(k.children=b(m.children));else if(me(m)||tt(m)){let{icon:x}=m;typeof x=="string"&&x.includes("icon-")&&(x=e(R,{type:x})),k={key:"",...m,icon:x,label:C(m),children:me(m)?b(m.children,m):void 0},!u&&m.path===n&&(d=m.key,u=!0)}k&&(k.key=k.key,p.push(k))}),!u&&i.pop(),p};return b(s)},[s]);return e(Pt,{style:{height:"100%"},onClick:h,mode:"inline",defaultSelectedKeys:[d],selectedKeys:r,items:g,defaultOpenKeys:i})},sr=_.memo(or);const st=()=>{const{menuCollapsed:t}=o.useContext(D),{colorBgContainer:n}=re();return e(A.Sider,{style:{background:n},trigger:null,className:"left-sider",collapsible:!0,collapsed:t,children:e(sr,{})})};const lr=()=>{console.log("MultitabLayout render...");const{menuCollapsed:t}=o.useContext(D);return e(On,{children:f(A,{className:"multitab-layout","data-menu-collapsed":t?1:0,children:[e(ot,{}),f(A,{children:[e(st,{}),f(A,{className:"content-layout",children:[e(Vn,{}),e(at,{})]})]})]})})},cr=_.memo(lr);const ir=({children:t})=>e(A.Content,{className:"content",children:t}),dr=_.memo(ir);const ur=()=>{console.log("SingleLaylut render...");const{menuCollapsed:t}=o.useContext(D);return f(A,{className:"single-tab-layout","data-menu-collapsed":t?1:0,children:[e(ot,{}),f(A,{children:[e(st,{}),f(A,{className:"content-layout",children:[e(rt,{}),e(dr,{children:e(Mt,{})}),e(at,{})]})]})]})};const mr=()=>{const[t,n]=o.useState(!0),{setIsLogin:r,setUserInfo:a}=o.useContext(Y),{colorBgContainer:s}=re(),{settings:{multitabMode:l,fixedMenu:d,fixedHeader:i,theme:u}}=o.useContext(K),c=J(),[h]=se();return Q(),console.log("global layout render..."),o.useEffect(()=>{if(!$e()){c("/login");return}bn().then(g=>{if(n(!1),r(!0),a(g),h.has("ghpage")){const C=decodeURIComponent(h.get("ghpage"));c(C);return}}).catch(g=>{g instanceof Nt&&ze.error({message:"网络错误",description:"获取用户信息失败, 无法打开页面",duration:null,closeIcon:null})})},[]),xe(()=>{$e()||(F.error("登录状态已失效, 即将跳转到登录页面..."),setTimeout(()=>{c("/login")},500))}),t?e(Pe,{title:"页面加载中",loading:t}):e($n,{children:f("div",{"data-fixed-menu":d?1:0,"data-fixed-header":i?1:0,style:{background:s},className:`global-layout theme-${u}`,children:[l?e(cr,{}):e(ur,{}),e(Nn,{})]})})},hr=_.memo(mr),Oe=()=>e("span",{children:"UserCenterPage"}),pr=()=>e("span",{children:"UserCenterUpdatePage"});const lt=o.forwardRef(({state:t},n)=>{const[r]=v.useForm(),a=o.useRef(null);return o.useImperativeHandle(n,()=>({form:r,input:a.current}),[r,a]),e("div",{children:f(v,{form:r,labelCol:{span:3},name:"userForm",initialValues:t||void 0,children:[e(v.Item,{name:"username",label:"账号",rules:[{required:!0,message:"请输入账号"}],children:e(P,{placeholder:"请输入账号",ref:a})}),e(v.Item,{name:"password",label:"密码",rules:[{required:!t,message:"请输入密码"}],children:e(P.Password,{placeholder:t?"不修改密码请留空!":"请输入密码"})}),e(v.Item,{name:"nickname",label:"昵称",rules:[{required:!0,message:"请输入昵称"}],children:e(P,{placeholder:"请输入昵称"})}),e(v.Item,{name:"gender",label:"性别",children:f(V.Group,{children:[e(V,{value:1,children:"男"}),e(V,{value:2,children:"女"})]})}),e(v.Item,{name:"mobile",label:"手机号",children:e(P,{placeholder:"请输入手机号"})}),e(v.Item,{name:"email",label:"邮箱",children:e(P,{placeholder:"请输入邮箱"})})]})})}),fr=({refreshList:t})=>{const[n,r]=o.useState(!1),{run:a,loading:s}=te(vn,{manual:!0,debounceWait:100,onSuccess:()=>{var i;r(!1),(i=l.current)==null||i.form.resetFields(),t==null||t()}}),l=o.useRef(null);return f("div",{children:[e(S,{type:"primary",icon:e(Se,{}),onClick:()=>{r(!0),setTimeout(()=>{var i,u;(u=(i=l.current)==null?void 0:i.input)==null||u.focus()},100)},children:"新增用户"}),e(Ge,{open:n,title:"添加用户",okText:"添加",cancelText:"取消",confirmLoading:s,onCancel:()=>r(!1),onOk:()=>{var i;(i=l.current)==null||i.form.validateFields().then(u=>{a(u)}).catch(u=>console.log(u))},children:e(lt,{ref:l})})]})},gr=(t,n)=>{const r=Lt(t,n),{tableProps:a}=r,s={...a.pagination,showTotal:(i,u)=>`第${u[0]}-${u[1]} 条/共 ${i} 条`,hideOnSinglePage:!0};a.pagination=s;const l=a.onChange,d=(...i)=>{var T;let[u,c,h,g]=i,C=u,b,y;Object.keys(h).length>0&&(Array.isArray(h)?(y={},h.map(p=>{var m;y[(m=p.column)==null?void 0:m.dataIndex]=p.order})):y={[(T=h.column)==null?void 0:T.dataIndex]:h.order}),Object.keys(c).length>0&&(b=c,console.log("filterrrrrrrrrrrrr",c)),l(C,b,y)};return a.onChange=d,r.tableProps.size="small",r},yr=({state:t,refreshList:n})=>{const[r,a]=o.useState(!1),{runAsync:s,loading:l}=te(xn,{manual:!0,debounceWait:100}),d=o.useRef(null);return f(U,{children:[e(S,{icon:e(Ye,{}),size:"small",onClick:()=>{a(!0),setTimeout(()=>{var u,c;(c=(u=d.current)==null?void 0:u.input)==null||c.focus()},100)},children:"编辑"}),e(Ge,{open:r,title:"更新用户信息",okText:"保存",cancelText:"取消",confirmLoading:l,onCancel:()=>a(!1),onOk:()=>{var u;(u=d.current)==null||u.form.validateFields().then(c=>{s({...c,id:t.id}).then(()=>{var h;a(!1),(h=d.current)==null||h.form.resetFields(),n==null||n()}).catch(W)}).catch(c=>console.log(c))},children:e(lt,{ref:d,state:t})})]})};const X=t=>{const{children:n,className:r="",style:a={},...s}=t,{colorBgContainer:l}=re(),d="content-box",i={backgroundColor:l};return e("div",{className:`${d} ${r}`,style:{...i,...a},...s,children:n})},br=t=>{const{search:n,form:r,onSearch:a,onReset:s,fields:l,title:d="搜索",...i}=t,u=o.useCallback((y,T,p)=>{switch(typeof T=="string"&&["input","number","select"].includes(y)&&(p.placeholder=(p==null?void 0:p.placeholder)||T),y){case"input":return e(P,{...p});case"number":return e($t,{...p});case"select":return e(Te,{...p});case"radio":return e(V.Group,{...p});case"date":return e(Ne,{...p});case"dateRange":return e(Ne.RangePicker,{...p});case"checkbox":return e(Rt.Group,{...p});case"cascader":return e(At,{...p});case"treeSelect":return e(wt,{...p});default:return e(U,{})}},[]),c=async()=>{await r.validateFields().catch(y=>console.warn(y)),a==null||a(r),n.submit()},h=()=>{s==null||s(r),n.reset()},g={labelCol:{span:5},style:{paddingTop:16}},C=({type:y,name:T,label:p,fieldProps:m={},itemProps:k={}})=>e(ne,{span:6,children:e(v.Item,{name:T,label:p,...k,children:u(y,p,m)})},`${T}-${p}`),b=()=>{const y=n.type==="simple"?0:18-l.length%4*6;return f(ne,{span:6,offset:y,style:{textAlign:"right"},children:[e(S,{onClick:h,children:"重置"}),e(S,{style:{margin:"0 8px"},type:"primary",onClick:c,children:"查询"}),l.length>3&&f("a",{style:{fontSize:12},onClick:n.changeType,children:[n.type==="advance"?e(Ft,{}):e(Ot,{}),n.type==="advance"?"收起":"展开"]})]})};return l.length===0?null:f(X,{children:[e("div",{children:e($.Title,{level:5,children:d})}),e(v,{form:r,...g,...i,children:f(Ie,{gutter:24,children:[n.type==="advance"?l.map(C):l.slice(0,3).map(C),b()]})})]})},kr=()=>{var p;console.log("render ExampleUserListPage");const[t]=v.useForm(),[n,r]=o.useState([]),a=o.useRef();o.useEffect(()=>{a.current=new Map},[]);const{runAsync:s,loading:l}=te(Sn,{manual:!0,debounceWait:100}),{refresh:d,tableProps:i,search:u}=gr(Cn,{form:t}),c=()=>{u.reset(),u.submit()},h=m=>{var k;typeof m=="number"&&((k=a==null?void 0:a.current)==null||k.set(m,!0)),s({id:m}).then(()=>{typeof m=="object"&&r([]),d()}).finally(()=>{var x;return typeof m=="number"&&((x=a==null?void 0:a.current)==null?void 0:x.delete(m))})},g=o.useMemo(()=>[{title:"ID",dataIndex:"id"},{title:"账号",dataIndex:"username",render:(m,{avatar:k,username:x})=>f(U,{children:[" ",e(ve,{src:k})," ",x]})},{title:"昵称",dataIndex:"nickname"},{title:"性别",dataIndex:"gender",render:m=>m===Xe.male?e(Le,{color:"blue",children:"男"}):e(Le,{color:"error",children:"女"})},{title:"邮箱",dataIndex:"email"},{title:"手机号",dataIndex:"mobile",sorter:!0},{title:"注册时间",dataIndex:"create_time",sorter:!0},{title:"操作",key:"operation",fixed:"right",render:(m,k)=>{var M;const{id:x}=k;return f(O,{children:[e(we,{title:"确认要删除这条数据吗?",onConfirm:()=>h(x),children:e(S,{loading:(M=a==null?void 0:a.current)==null?void 0:M.has(x),icon:e(Ut,{}),size:"small",danger:!0,children:"删除"})}),e(yr,{state:k,refreshList:d})]})}}],[]),b={selectedRowKeys:n,onChange:m=>{console.log("selectedRowKeys changed: ",m),r(m)}},y=n.length>0;return f(U,{children:[e(br,{form:t,search:u,fields:[{type:"input",label:"账号",name:"username"},{type:"input",label:"手机号",name:"mobile"},{type:"input",label:"邮箱",name:"email"},{type:"select",label:"性别",name:"gender",fieldProps:{options:[{label:"男",value:"1"},{label:"女",value:"2"}]}}]}),e("br",{}),f(X,{children:[f("div",{className:"table-header",children:[e("div",{className:"left",children:e($.Title,{level:5,children:"用户列表"})}),e("div",{className:"right",children:f(O,{size:"middle",children:[e(we,{title:`确定要删除这${n.length}条数据吗?`,onConfirm:()=>h(n),children:e(S,{type:"primary",danger:!0,disabled:!y,loading:l&&((p=a.current)==null?void 0:p.size)===0,children:"批量删除"})}),e(fr,{refreshList:c}),e(S,{type:"link",title:"点击刷新",onClick:d,icon:e(Et,{})})]})})]}),e(Bt,{rowKey:"id",rowSelection:b,columns:g,...i})]})]})},ie=({title:t="空白页"})=>{const[n,r]=o.useState(0);return se(),console.log("BlankPage: 被调用"),o.useEffect(()=>(console.log("BlankPage: 初次渲染"),()=>{console.log("BlankPage: 被卸载了")}),[]),f(X,{style:{height:"500px"},children:[e($.Title,{level:4,children:t}),f($.Text,{children:["Count: ",n]}),e("br",{}),e(S,{onClick:a=>r(s=>s+1),children:"add"})]})},Cr=()=>{const{pathname:t}=Q();return e(Dt,{status:"404",title:"404",subTitle:`页面不存在, 当前路由: ${t}`,extra:e(S,{type:"primary",children:e(ge,{to:"/",children:"返回首页"})})})};const vr=()=>{const[t]=v.useForm(),n=J(),r="articleDraft",{loading:a,run:s}=te(In,{manual:!0,debounceWait:200,onSuccess:()=>setTimeout(()=>{N.remove(r),n("/article/list")},200)}),l=N.getObject(r)||{},d=async()=>{const c=await t.validateFields();s(c)},i=()=>{const{cover:c,...h}=t.getFieldsValue();N.set(r,h),F.success("已保存到草稿箱")},u=c=>(console.log("Upload event:",c),Array.isArray(c)?c:c&&c.fileList);return f(X,{children:[e($.Title,{level:3,children:"发布文章"}),e(q,{}),e(v,{form:t,name:"createForm",labelCol:{span:3},initialValues:l,children:f(Ie,{gutter:36,children:[f(ne,{span:16,children:[e(v.Item,{name:"title",label:"文章标题",rules:[{required:!0,message:"请输入标题"}],children:e(P,{})}),e(v.Item,{label:"简介",name:"description",children:e(P,{})}),e(v.Item,{label:"内容",name:"content",rules:[{required:!0,message:"请输入内容"}],children:e(P.TextArea,{rows:20})}),e(v.Item,{wrapperCol:{offset:3},children:f(O,{children:[e(S,{icon:e(We,{}),onClick:d,loading:a,type:"primary",children:"发布文章"}),e(S,{icon:e(_t,{}),onClick:i,children:"保存为草稿"})]})})]}),f(ne,{span:8,children:[e(v.Item,{label:"封面",name:"cover",getValueFromEvent:u,valuePropName:"fileList",children:e(Je,{maxCount:1,listType:"picture-card",children:f("div",{children:[e(Se,{}),e("div",{style:{marginTop:8},children:"选择图片"})]})})}),e(v.Item,{label:"标签",name:"tags",children:e(Te,{mode:"tags",placeholder:"文章标签"})}),e(v.Item,{label:"作者",name:"author",rules:[{required:!0,message:"请输入作者"}],children:e(P,{})})]})]})})]})},xr=()=>{const[t]=v.useForm(),n=J(),r=zt(),{loading:a,run:s}=te(Tn,{manual:!0,debounceWait:10,onSuccess:c=>t.setFieldsValue(c)});o.useEffect(()=>{s({id:r.id})},[r.id]);const{loading:l,run:d}=te(Pn,{manual:!0,debounceWait:200,onSuccess:()=>setTimeout(()=>{n("/article/list")},200)}),i=async()=>{const c=await t.validateFields();d(c)},u=c=>(console.log("Upload event:",c),Array.isArray(c)?c:c&&c.fileList);return f(X,{children:[e($.Title,{level:3,children:"更新文章"}),e(q,{}),e(_e,{spinning:a,children:e(v,{form:t,name:"createForm",labelCol:{span:3},children:f(Ie,{gutter:36,children:[f(ne,{span:16,children:[e(v.Item,{name:"title",label:"文章标题",rules:[{required:!0,message:"请输入标题"}],children:e(P,{})}),e(v.Item,{label:"简介",name:"description",children:e(P,{})}),e(v.Item,{label:"内容",name:"content",rules:[{required:!0,message:"请输入内容"}],children:e(P.TextArea,{rows:20})}),e(v.Item,{wrapperCol:{offset:3},children:e(O,{children:e(S,{icon:e(We,{}),onClick:i,loading:l,type:"primary",children:"保存"})})})]}),f(ne,{span:8,children:[e(v.Item,{label:"封面",name:"cover",getValueFromEvent:u,valuePropName:"fileList",children:e(Je,{maxCount:1,listType:"picture-card",children:f("div",{children:[e(Se,{}),e("div",{style:{marginTop:8},children:"选择图片"})]})})}),e(v.Item,{label:"标签",name:"tags",children:e(Te,{mode:"tags",placeholder:"文章标签"})}),e(v.Item,{label:"作者",name:"author",rules:[{required:!0,message:"请输入作者"}],children:e(P,{})})]})]})})})]})},Sr=()=>e("span",{children:"分类管理页面"}),Tr=()=>{const{userInfo:t,setUserInfo:n}=o.useContext(Y),r=a=>{n({...t,roles:[a]})};return f(X,{children:[f($.Text,{children:["当前权限: ",JSON.stringify(t==null?void 0:t.roles)]}),e(q,{}),f(S.Group,{children:[e(S,{type:"primary",onClick:()=>r("admin"),children:"切换为 Admin"}),e(S,{onClick:()=>r("guest"),children:"切换为 Guest"})]})]})},Ue=({children:t,role:n})=>{const{userInfo:r}=o.useContext(Y);return et(n,r)?e(U,{children:t}):null},Ir=()=>{const{userInfo:t,setUserInfo:n}=o.useContext(Y),r=a=>{n({...t,roles:[a]})};return f(X,{children:[f($.Text,{children:["当前权限: ",JSON.stringify(t==null?void 0:t.roles)]}),e(q,{}),f(S.Group,{children:[e(S,{type:"primary",onClick:()=>r("admin"),children:"切换为 Admin"}),e(S,{onClick:()=>r("guest"),children:"切换为 Guest"})]}),e(q,{}),f(O,{children:[e(Ue,{role:"admin",children:e(S,{type:"primary",children:"Admin menu"})}),e(Ue,{role:"guest",children:e(S,{children:"Guest menu"})})]})]})},Pr=o.lazy(()=>le(()=>import("./index-02bbf141.js"),["assets/index-02bbf141.js","assets/vendor-7bffd2da.js"])),Ee=o.lazy(()=>le(()=>import("./index-24429a09.js"),["assets/index-24429a09.js","assets/vendor-7bffd2da.js"])),Mr=o.lazy(()=>le(()=>import("./index-28dcaa19.js"),["assets/index-28dcaa19.js","assets/vendor-7bffd2da.js","assets/index-5c0cb4e1.css"])),Nr=o.lazy(()=>le(()=>import("./index-df05b3ad.js"),["assets/index-df05b3ad.js","assets/vendor-7bffd2da.js","assets/index-19ead691.css"])),Lr=o.lazy(()=>le(()=>import("./index-38f9c00c.js"),["assets/index-38f9c00c.js","assets/vendor-7bffd2da.js","assets/index-c11d3a46.css"])),oe=({children:t})=>e(_.Suspense,{fallback:e(Pe,{}),children:t});function wr(){return[{path:"/login",element:e(oe,{children:e(Mr,{})})},{path:"/",element:e(hr,{}),children:[{path:"/",element:e(dn,{to:"/dashboard"})},{path:"/dashboard",element:e(oe,{children:e(Nr,{})})},{path:"/user",children:[{index:!0,element:e(Oe,{})},{path:"/user/center/index",element:e(Oe,{})},{path:"/user/center/update",element:e(pr,{})}]},{path:"/example",children:[{path:"/example/userList",element:e(kr,{})},{path:"/example/tabs/manage",element:e(oe,{children:e(Pr,{})})},{path:"/example/permission",children:[{path:"/example/permission/menu",element:e(Tr,{})},{path:"/example/permission/button",element:e(Ir,{})}]}]},{path:"/article",children:[{index:!0,element:e(oe,{children:e(Ee,{})})},{path:"/article/list",element:e(Ee,{})},{path:"/article/category",element:e(Sr,{})},{path:"/article/create",element:e(vr,{})},{path:"/article/update/:id",element:e(xr,{})}]},{path:"/blank",element:e(ie,{})},{path:"/badge/dot",element:e(ie,{title:"红点徽标"})},{path:"/badge/count",element:e(ie,{title:"数字徽标"})},{path:E,element:e(oe,{children:e(Lr,{})})},{path:"/multilevel/menu/2/3",element:e(ie,{title:"三级菜单"})},{path:"*",element:e(Cr,{})}]}]}function Ar(){o.useEffect(()=>{},[]);const t=jt(wr(),{basename:"/react-admin-template/"});return e(sn,{children:e(Vt,{router:t})})}function Be(t){const n=JSON.stringify({type:"JWT",alg:"HS256"}),r=Number((new Date().getTime()/1e3).toFixed(0)),a=JSON.stringify({iss:"github.com/xstnet",sub:"react-admin",iat:r,exp:r+86400*14,data:t}),s="H_97UyQUOmURnZdDwI0khuAt4Cmg";return`${Ae(n)}.${Ae(a)}.${s}`}I.mock(/api\/login/,"post",({body:t})=>{const{username:n,password:r}=JSON.parse(t);return n==="admin"?r!=="123456"?{code:-1,message:"密码错误"}:{code:0,message:"登录成功",data:{token:Be({uid:1})}}:{code:0,message:"登录成功",data:{token:Be({uid:Z.Random.natural(2,1e4)})}}});I.setup({timeout:100});I.mock(/api\/user\/info/,"get",t=>({code:0,message:"ok",data:{id:1,username:"admin",nickname:"醉丶春风",avatar:"https://www.xstnet.com/static/images/head.gif",password:"",gender:Z.Random.natural(1,2),email:"shantongxu@qq.com",mobile:"133xxxx3333",roles:["admin"]}}));I.mock(/api\/user\/logout/,"post",t=>({code:0,message:"退出成功"}));I.mock(/api\/user\/list/,"get",t=>{const n=new URLSearchParams(t.url);let r=Number(n.has("pageSize")?n.get("pageSize"):10);const a={code:0,message:"ok",data:{total:100,[`list|${r}`]:[{"id|+1":r,username:"@first@last",nickname:"@cname",avatar:()=>Z.Random.dataImage("200x200"),email:"@email",mobile:()=>I.mock(/^1[3456789]\d{9}$/).replace(/^(\d{3})\d{4}(\d{4})$/,"$1****$2"),"gender|1-2":0,create_time:"@date(yyyy-MM-dd HH:MM:ss)"}]}};return I.mock(a)});I.mock(/api\/user\/create/,"post",t=>({code:0,message:"创建成功",data:{id:Z.Random.natural(100,9999)}}));I.mock(/api\/user\/update/,"post",t=>({code:0,message:"更新成功"}));I.mock(/api\/user\/delete/,"post",t=>({code:0,message:"删除成功"}));I.setup({timeout:100});I.mock(/api\/article\/detail/,"get",t=>(console.log("🚀 ~ file: article.ts:7 ~ Mock.mock ~ options:",t),{code:0,message:"ok",data:{id:1,title:"主题",description:"醉丶春风",author:"醉丶春风",tags:[1,2],content:"content",create_time:Z.Random.datetime()}}));I.mock(/api\/article\/list/,"get",t=>{const n=new URLSearchParams(t.url);let r=Number(n.has("pageSize")?n.get("pageSize"):10);const a={code:0,message:"ok",data:{total:100,[`list|${r}`]:[{"id|+1":r,author:"@first@last",title:()=>I.Random.ctitle(5,20),description:"@cname",cover:()=>Z.Random.dataImage("480x270","封面"),content:"@email",create_time:"@date(yyyy-MM-dd HH:MM:ss)"}]}};return I.mock(a)});I.mock(/api\/article\/create/,"post",t=>({code:0,message:"创建成功",data:{id:Z.Random.natural(100,9999)}}));I.mock(/api\/article\/update/,"post",t=>({code:0,message:"更新成功"}));I.mock(/api\/article\/delete/,"post",t=>({code:0,message:"删除成功"}));qt.createRoot(document.getElementById("root")).render(e(Ar,{}));export{X as C,mn as D,U as F,fe as M,Gn as R,K as S,un as T,e as a,br as b,B as c,N as d,Fr as e,re as f,Or as g,D as h,f as j,Ur as p,$r as r,gr as u,$e as v};
