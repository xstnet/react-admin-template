import{j as Ie,r as s,C as He,z as yt,t as H,u as je,T as oe,d as le,a as j,L as ne,b as Te,c as L,S as N,I as T,B as x,P as se,e as Ke,D as Me,R as Ve,A as kt,f as vt,X as Ct,Y as xt,g as Ye,h as St,i as K,k as I,l as ce,m as ye,n as It,o as Tt,p as Mt,q as Y,s as E,F as b,v as W,w as V,M as qe,x as Pt,E as Pe,y as Ne,G as $e,H as ke,U as We,J as Nt,K as _,N as wt,O as re,Q as Ge,V as Lt,W as Je,Z as Qe,_ as At,$ as we,a0 as Q,a1 as Ft,a2 as fe,a3 as Xe,a4 as $t,a5 as Ze,a6 as Ut,a7 as q,a8 as de,a9 as Dt,aa as Rt,ab as Ot,ac as et,ad as Bt,ae as tt,af as nt,ag as Et,ah as U,ai as _t,aj as zt,ak as Ht,al as te,am as rt,an as ve,ao as jt,ap as Kt,aq as at,ar as Vt,as as ae,at as Yt,au as qt,av as Wt,aw as Gt,ax as Jt,ay as Qt,az as Xt,aA as Zt,aB as en,aC as M,aD as X,aE as Ue,aF as tn}from"./vendor-266726aa.js";(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))a(l);new MutationObserver(l=>{for(const o of l)if(o.type==="childList")for(const d of o.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&a(d)}).observe(document,{childList:!0,subtree:!0});function r(l){const o={};return l.integrity&&(o.integrity=l.integrity),l.referrerPolicy&&(o.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?o.credentials="include":l.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function a(l){if(l.ep)return;l.ep=!0;const o=r(l);fetch(l.href,o)}})();const A=Ie.Fragment,e=Ie.jsx,h=Ie.jsxs,De=[{label:"控制台",type:"group",children:[{label:"控制台",icon:"icon-dashboard",path:"/dashboard"}]},{label:"示例页面",type:"group",children:[{label:"列表页",icon:"icon-list",path:"/example/userList"},{label:"多级菜单",icon:"icon-list",path:"/multilevel/menu",children:[{label:"二级菜单",icon:"icon-list",path:"/multilevel/menu/2",children:[{label:"三级菜单",icon:"icon-list",path:"/multilevel/menu/2/3"}]}]},{label:"Tabs标签页",icon:"icon-list",path:"/example/tabs",children:[{label:"标签管理",icon:"icon-list",path:"/example/tabs/manage"}]},{label:"空白页",icon:"icon-example",path:"/blank"},{label:"404",icon:"icon-example",path:"/404"}]},{label:"徽标示例",type:"group",children:[{label:"红点徽标",icon:"icon-list",badge:"dot",path:"/badge/dot"},{label:"数字徽标",icon:"icon-example",badge:98,path:"/badge/count"}]},{type:"divider"},{path:"/article",label:"文章管理",icon:"icon-article",children:[{path:"/article/list",label:"文章列表",icon:"icon-article"},{path:"/article/create",label:"发布文章",hideInMenu:!0,parent:"/article/list"},{path:"/article/update",label:"更新文章",hideInMenu:!0,parent:"/article/list"},{path:"/article/category",label:"分类管理",icon:"icon-list"}]},{path:"/iframe",label:"外部页面",icon:"icon-href",children:[{path:"https://ant-design.antgroup.com/components/overview-cn/",label:"antd文档(外链)",icon:"icon-document",key:"webpage-antd-document",type:"url"},{path:"https://ant-design.antgroup.com/components/overview-cn/",label:"antd文档(内嵌)",icon:"icon-document",type:"iframe"},{path:"https://www.xstnet.com",label:"博客主页(内嵌)",icon:"icon-document",type:"iframe"}]},{path:"/document",label:"文档",icon:"icon-document",children:[{path:"/document/start",label:"开始使用",icon:"icon-document"},{path:"/document/package.json",label:"Package文件说明",icon:"icon-document"}]},{type:"divider"},{path:"/user/center",label:"个人中心",icon:"icon-user-permissions",children:[{path:"/user/center/index",label:"个人中心",icon:"icon-example"},{path:"/user/center/update",label:"修改信息",icon:"icon-document"}]}];function ot(t){return!!(typeof t.children>"u"||Array.isArray(t.children)&&t.children.length===0)}function me(t){return ge(t)?!1:!!(typeof t.children<"u"&&Array.isArray(t.children)&&t.children.length>0)}function pe(t){return typeof t.path=="string"&&typeof t.label=="string"}function ge(t){return typeof t.type<"u"&&t.type==="group"}function nn(t){return typeof t.type<"u"&&t.type==="divider"}const rn=void 0,Z=s.createContext(rn),an=({children:t})=>{const n=s.useMemo(()=>De,[De]),[r,a]=s.useState(n),[l,o]=s.useState(!1),{mapPathToMenu:d,processedMenuList:i}=s.useMemo(()=>(()=>{const m=new Map,f=C=>(pe(C)&&(C.key=(C==null?void 0:C.key)||C.path),{...C}),v=C=>C.map(k=>{const p=f(k);return(me(p)||ge(p))&&(p.children=v(p.children||[])),pe(p)&&m.set(p.path,p),p});return{processedMenuList:v(r),mapPathToMenu:m}})(),[r]),c=s.useMemo(()=>({menuList:i,setMenuList:a,menuCollapsed:l,setMenuCollapsed:o,mapPathToMenu:d}),[r,l]);return e(Z.Provider,{value:c,children:t})},R={pageTitle:"后台管理系统模板",pageTitlePrefix:"后台管理",tokenKey:"Authorization",apiBaseUrl:"https://xstnet.github.io/react-admin-template/api",iconFontUrl:"//at.alicdn.com/t/c/font_3917407_68ll5mr3jkf.js"};function on(t,n){localStorage.setItem(t,typeof n=="object"?JSON.stringify(n):n)}function ln(t){localStorage.setItem(R.tokenKey,typeof t=="object"?JSON.stringify(t):t)}function lt(t){return localStorage.getItem(t)}function sn(t){const n=localStorage.getItem(t);if(n!==null)return Number(n)}function cn(t){const n=localStorage.getItem(t);if(n!==null)return n==="true"}function dn(t){const n=localStorage.getItem(t);if(n!==null)return JSON.parse(n)}function un(t){return lt(t)!==null}function hn(t){localStorage.removeItem(t)}function mn(){localStorage.removeItem(R.tokenKey)}function pn(){localStorage.clear()}const w={set:on,setToken:ln,has:un,getString:lt,getObject:dn,getBoolean:cn,getNumber:sn,remove:hn,removeToken:mn,clear:pn},st=()=>{const[t,n]=s.useState(window.matchMedia("(prefers-color-scheme: dark)").matches);return s.useEffect(()=>{const a=l=>{console.log("chage",l.matches),l.matches?n(!0):n(!1)};return window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",a),()=>{window.matchMedia("(prefers-color-scheme: dark)").removeEventListener("change",a)}},[]),[t?"dark":"light"]},fn=void 0,gn=s.createContext(fn),bn=({children:t})=>{const{settings:{primaryColor:n,theme:r,compactMode:a,followSystemTheme:l}}=s.useContext(z),[o]=st(),d={},i=()=>{const c=[];return l?c.push(o==="light"?H.defaultAlgorithm:H.darkAlgorithm):c.push(r==="light"?H.defaultAlgorithm:H.darkAlgorithm),console.log("algorighm",r,c),a&&c.push(H.compactAlgorithm),c};return e(gn.Provider,{value:d,children:e(He,{locale:yt,theme:{algorithm:i(),token:{colorPrimary:n},components:{Button:{borderRadius:4,borderRadiusSM:2},Modal:{borderRadius:4,borderRadiusOuter:2}}},children:t})})},yn=void 0,z=s.createContext(yn),kn=({children:t})=>{const n=s.useMemo(()=>{const d=w.getObject("settings")||{};return console.log("settingsCache",d),{theme:"light",compactMode:!1,followSystemTheme:!1,fixedHeader:!0,fixedMenu:!0,showFooter:!0,multitabMode:!1,primaryColor:"#00b96b",...d}},[]),[r,a]=s.useState(n),l=s.useCallback(d=>{const i={...r,...d};a(i),w.set("settings",i)},[r]),o={settings:r,setSetting:l};return e(z.Provider,{value:o,children:e(bn,{children:t})})},vn=void 0,be=s.createContext(vn),Cn=({children:t})=>{const[n,r]=s.useState(!1),[a,{toggleFullscreen:l}]=je(document.body),[o,d]=s.useState(null),i=s.useMemo(()=>({isLogin:n,setIsLogin:r,userInfo:o,setUserInfo:d,fullScreen:a,setFullScreen:l}),[n,o,a]);return e(be.Provider,{value:i,children:e(kn,{children:e(an,{children:t})})})},xn=[[2,1,"刚刚"],[60,1,"%d秒前"],[3600,60,"%d分钟前"],[86400,3600,"%d小时前"],[86400*30,3600*24,"%d天前"],[86400*30*12,3600*24*30,"%d月前"],[1/0,3600*24*30*12,"%d年前"]],Sn=[[-60,1,"%d秒后"],[-3600,60,"%d分钟后"],[-86400,3600,"%d小时后"],[-(86400*30),3600*24,"%d天后"],[-(86400*30*12),3600*24*30,"%d月后"],[-1/0,3600*24*30*12,"%d年后"]],it=({time:t,...n})=>{const r=Math.floor(new Date().getTime()/1e3),a=Math.floor(new Date(t).getTime()/1e3),l=r-a;if(isNaN(a))return e(A,{children:"time"});const o=l<-1?Sn:xn;let d="";for(const[i,c,u]of o)if(Math.abs(l)<Math.abs(i)){const m=Math.floor(Math.abs(l)/c);d=u.replace("%d",String(m));break}return e(oe,{title:t,children:e("span",{...n,children:d})})};var Ce=(t=>(t[t.success=0]="success",t[t.noLogin=-10001]="noLogin",t[t.loginExpired=-10002]="loginExpired",t))(Ce||{}),ct=(t=>(t[t.male=1]="male",t[t.female=2]="female",t))(ct||{}),B=(t=>(t[t.incomplete=1]="incomplete",t[t.completed=2]="completed",t[t.deleted=10]="deleted",t))(B||{}),Le=(t=>(t.day="YYYY-MM-DD",t.second="YYYY-MM-DD HH:mm:ss",t.minute="YYYY-MM-DD HH:mm",t.hour="YYYY-MM-DD HH",t))(Le||{});function dt(){}function G(t,n){return Math.floor(Math.random()*(n-t+1))+t}const In=()=>{const t=[{title:"昵称",dataIndex:"nickname",key:"nickname"},{title:"登录IP",dataIndex:"loginIp",key:"loginIp"},{title:"登录时间",dataIndex:"create_time",key:"create_time",render:r=>e(it,{time:r})}],n=Array(5).fill({id:G(10,1e5),userId:1,loginIp:"127.0.0.1",nickname:"admin",create_time:le().subtract(3,"second").format(Le.second)});return e(j,{title:"登录历史",extra:e(ne,{to:"/",children:"查看更多"}),children:e(Te,{rowKey:()=>G(10,1e5),pagination:!1,size:"small",columns:t,dataSource:n})})},J=()=>{const{token:t}=H.useToken();return t},Tn=L.Text,ee=()=>le().format(Le.second),Mn=()=>{const[t,n]=s.useState(0),{colorError:r}=J(),[a,l]=s.useState([{id:G(100,1e9),name:"全局搜索",status:B.incomplete,create_time:ee(),update_time:ee()},{id:G(100,1e9),name:"多tab布局支持",status:B.completed,create_time:ee(),update_time:ee()},{id:1,name:"这是一个todo例子",status:B.completed,create_time:ee(),update_time:ee()}]),[o,d]=s.useState(""),i=()=>{o&&(l([{name:o,status:B.incomplete,id:G(100,1e9),create_time:le().format("YYYY-MM-DD HH:MM:SS"),update_time:le().format("YYYY-MM-DD HH:MM:SS")},...a]),d(""))},c=(f,v)=>{l(a.map(y=>y.id!==f?y:{...y,status:v?B.completed:B.incomplete}))},u=(f,v)=>{console.log("iii",f,v),l(a.map(y=>y.id!==f?y:{...y,name:v}))},m=f=>{l(a.filter(v=>v.id!==f))};return e(j,{title:"待办事项",children:h(N,{direction:"vertical",style:{width:"100%"},children:[h(N.Compact,{style:{width:"100%",marginBottom:"16px"},children:[e(T,{value:o,onChange:f=>d(f.target.value),placeholder:"添加新事项",onPressEnter:i}),e(x,{onClick:i,type:"primary",icon:e(se,{})})]}),a.map(({id:f,status:v,name:y})=>{const C=v===B.completed,k=t===f&&v===B.incomplete;return e(Ke,{onChange:({target:{checked:p}})=>c(f,p),checked:C,children:e(Tn,{type:C?"secondary":void 0,delete:C,onMouseEnter:()=>n(f),onMouseLeave:()=>n(0),editable:k?{onChange:p=>u(f,p)}:!1,children:h(N,{children:[y,k&&e(oe,{title:"删除",children:e(Me,{onClick:()=>m(f),style:{color:r}})})]})})},f)})]})})},Pn=()=>{const[t,n]=s.useState("pv"),r=[{tab:"访问量",key:"pv"},{tab:"IP",key:"ip"}],a={pv:{stroke:"#8884d8",fill:"#b5b1e6"},ip:{stroke:"#00b96b",fill:"#82ca9d"}},l=Array.from({length:7}).map((o,d)=>({name:le().subtract(d+1,"day").format("MM-DD"),pv:G(1e3,1e4),ip:G(100,1e3)})).reverse();return e(j,{activeTabKey:t,onTabChange:o=>n(o),tabList:r,children:e(Ve,{width:"100%",height:300,children:h(kt,{data:l,children:[e(vt,{strokeDasharray:"3 3"}),e(Ct,{dataKey:"name"}),e(xt,{}),e(Ye,{wrapperStyle:{outline:"none"}}),e(St,{type:"monotone",strokeWidth:2,dataKey:t,stroke:a[t].stroke,fill:a[t].fill})]})})})},Re=[{name:"视频类",value:400},{name:"图文类",value:300},{name:"资讯类",value:300}],Oe=()=>e(A,{children:h("div",{children:[h(K,{gutter:24,children:[e(I,{span:6,children:e(j,{bordered:!1,children:e(ce,{title:"今日销售额",value:126560,precision:2,prefix:"$"})})}),e(I,{span:6,children:e(j,{bordered:!1,children:e(ce,{title:"示例指标",value:11.28,precision:2,prefix:e(ye,{}),suffix:"%"})})}),e(I,{span:6,children:e(j,{bordered:!1,children:e(ce,{title:"示例指标",value:11.28,precision:2,prefix:e(ye,{}),suffix:"%"})})}),e(I,{span:6,children:e(j,{bordered:!1,children:e(ce,{title:"示例指标",value:11.28,precision:2,valueStyle:{color:"#3f8600"},prefix:e(ye,{}),suffix:"%"})})})]}),e("br",{}),h(K,{gutter:16,children:[e(I,{span:18,style:{height:300},children:e(Pn,{})}),e(I,{span:6,children:e(j,{title:"内容占比",children:e(Ve,{width:"100%",height:300,children:h(It,{width:400,height:400,children:[e(Tt,{data:Re,dataKey:"value",nameKey:"name",cx:"50%",cy:"50%",outerRadius:90,label:!0,children:Re.map((t,n)=>e(Mt,{fill:["#0088FE","#00C49F","#FFBB28"][n%3]},`cell-${n}`))}),e(Ye,{wrapperStyle:{outline:"none"}})]})})})})]}),e("br",{}),h(K,{gutter:16,children:[e(I,{span:12,children:e(Mn,{})}),e(I,{span:12,children:e(In,{})})]})]})}),Be=()=>e("span",{children:"UserCenterPage"}),Nn=()=>e("span",{children:"UserCenterUpdatePage"});function wn(t){var r;const{config:n}=t;console.group(`${(r=n.method)==null?void 0:r.toLocaleUpperCase()} ${n.url}`),console.log("Path:",n.url),console.log("Method:",n.method),console.log("Params:",n.params),console.log("StatusCode:",t.status),console.log("Response:",typeof t.data=="object"?Object.assign(Object.create(null),t.data):t.data),console.groupEnd()}const Ln=10*1e3;Y.defaults.baseURL=R.apiBaseUrl;Y.defaults.headers.post["Content-Type"]="application/json; charset=utf-8";Y.defaults.timeout=Ln;Y.interceptors.request.use(t=>(t.headers.Authorization=`Bearer ${w.getString(R.tokenKey)}`,t),t=>Promise.reject(t));Y.interceptors.response.use(t=>{wn(t);const n=t.data;return typeof n.code!="number"?(E.error("系统错误",2),console.warn("api调用失败, 未正常返回数据, url:",t.config.url,"data:",n,"response:",t),Promise.reject(t)):n.code===0?(t.config.method==="post"&&E.success(t.data.message),t):n.code===Ce.noLogin?(E.error("您还没有登录, 即将跳转到登录页面, 请稍后..."),w.remove(R.tokenKey),location.reload(),Promise.reject(n)):n.code===Ce.loginExpired?(E.error("登录已失效, 即将跳转到登录页面..."),w.remove(R.tokenKey),location.reload(),Promise.reject(n)):(E.error(n.message),Promise.reject(t))},t=>(typeof t.message=="string"&&t.message==="Network Error"?E.error("网络错误, 请稍后再试!"):E.error("请求失败, 请稍后再试"),console.log("Request error",t),console.groupEnd(),Promise.reject(t)));const An=(t,n,r)=>{const a=r||{};return a.params=n,Y.get(t,a)},Fn=(t,n,r)=>Y.post(t,n,r),$n=t=>Y.request(t),F={get:An,post:Fn,request:$n},$=t=>t.then(n=>Promise.resolve(n.data.data)).catch(n=>Promise.reject(n)),Un=t=>{const n=F.post("/login",t);return $(n)},Dn=t=>$(F.get("/user/info",t)),Rn=t=>$(F.post("/user/logout",t)),On=(t,n)=>$(F.get("/user/list",{...t,...n})),Bn=t=>$(F.post("/user/create",t)),En=t=>$(F.post("/user/update",t)),_n=t=>$(F.post("/user/delete",t)),zn=(t,n)=>$(F.get("/article/list",{...t,...n})),Hn=t=>$(F.get("/article/detail",t)),jn=t=>$(F.post("/article/create",t)),Kn=t=>$(F.post("/article/update",t)),Vn=t=>$(F.post("/article/delete",t));const ut=s.forwardRef(({state:t},n)=>{const[r]=b.useForm(),a=s.useRef(null);return s.useImperativeHandle(n,()=>({form:r,input:a.current}),[r,a]),e("div",{children:h(b,{form:r,labelCol:{span:3},name:"userForm",initialValues:t||void 0,children:[e(b.Item,{name:"username",label:"账号",rules:[{required:!0,message:"请输入账号"}],children:e(T,{placeholder:"请输入账号",ref:a})}),e(b.Item,{name:"password",label:"密码",rules:[{required:!t,message:"请输入密码"}],children:e(T.Password,{placeholder:t?"不修改密码请留空!":"请输入密码"})}),e(b.Item,{name:"nickname",label:"昵称",rules:[{required:!0,message:"请输入昵称"}],children:e(T,{placeholder:"请输入昵称"})}),e(b.Item,{name:"gender",label:"性别",children:h(W.Group,{children:[e(W,{value:1,children:"男"}),e(W,{value:2,children:"女"})]})}),e(b.Item,{name:"mobile",label:"手机号",children:e(T,{placeholder:"请输入手机号"})}),e(b.Item,{name:"email",label:"邮箱",children:e(T,{placeholder:"请输入邮箱"})})]})})}),Yn=({refreshList:t})=>{const[n,r]=s.useState(!1),{run:a,loading:l}=V(Bn,{manual:!0,debounceWait:100,onSuccess:()=>{var i;r(!1),(i=o.current)==null||i.form.resetFields(),t==null||t()}}),o=s.useRef(null);return h("div",{children:[e(x,{type:"primary",icon:e(se,{}),onClick:()=>{r(!0),setTimeout(()=>{var i,c;(c=(i=o.current)==null?void 0:i.input)==null||c.focus()},100)},children:"新增用户"}),e(qe,{open:n,title:"添加用户",okText:"添加",cancelText:"取消",confirmLoading:l,onCancel:()=>r(!1),onOk:()=>{var i;(i=o.current)==null||i.form.validateFields().then(c=>{a(c)}).catch(c=>console.log(c))},children:e(ut,{ref:o})})]})},qn=({search:t,form:n})=>e(b,{form:n,name:"advanced_search",style:{paddingTop:16},onFinish:a=>{console.log("Received values of form: ",a)},children:h(K,{gutter:24,children:[e(I,{span:6,children:e(b.Item,{name:"username",label:"账号",children:e(T,{placeholder:"账号"})})}),e(I,{span:6,children:e(b.Item,{name:"mobile",label:"手机号",children:e(T,{placeholder:"手机号"})})}),e(I,{span:6,children:e(b.Item,{name:"email",label:"邮箱",children:e(T,{placeholder:"邮箱"})})}),h(I,{span:6,style:{textAlign:"right"},children:[e(x,{onClick:t.reset,children:"重置"}),e(x,{style:{margin:"0 8px"},type:"primary",onClick:t.submit,children:"查询"})]})]})}),ht=(t,n)=>{const r=Pt(t,n),{tableProps:a}=r,l={...a.pagination,showTotal:(i,c)=>`第${c[0]}-${c[1]} 条/共 ${i} 条`,hideOnSinglePage:!0};a.pagination=l;const o=a.onChange,d=(...i)=>{var k;let[c,u,m,f]=i,v=c,y,C;Object.keys(m).length>0&&(Array.isArray(m)?(C={},m.map(p=>{var g;C[(g=p.column)==null?void 0:g.dataIndex]=p.order})):C={[(k=m.column)==null?void 0:k.dataIndex]:m.order}),Object.keys(u).length>0&&(y=u,console.log("filterrrrrrrrrrrrr",u)),o(v,y,C)};return a.onChange=d,r.tableProps.size="small",r},Wn=({state:t,refreshList:n})=>{const[r,a]=s.useState(!1),{runAsync:l,loading:o}=V(En,{manual:!0,debounceWait:100}),d=s.useRef(null);return h(A,{children:[e(x,{icon:e(Pe,{}),size:"small",onClick:()=>{a(!0),setTimeout(()=>{var c,u;(u=(c=d.current)==null?void 0:c.input)==null||u.focus()},100)},children:"编辑"}),e(qe,{open:r,title:"更新用户信息",okText:"保存",cancelText:"取消",confirmLoading:o,onCancel:()=>a(!1),onOk:()=>{var c;(c=d.current)==null||c.form.validateFields().then(u=>{l({...u,id:t.id}).then(()=>{var m;a(!1),(m=d.current)==null||m.form.resetFields(),n==null||n()}).catch(dt)}).catch(u=>console.log(u))},children:e(ut,{ref:d,state:t})})]})};const O=t=>{const{children:n,className:r="",style:a={},...l}=t,{colorBgContainer:o}=J(),d="content-box",i={backgroundColor:o};return e("div",{className:`${d} ${r}`,style:{...i,...a},...l,children:n})},Gn=()=>{var k;console.log("render ExampleUserListPage");const[t]=b.useForm(),[n,r]=s.useState([]),a=s.useRef();s.useEffect(()=>{a.current=new Map},[]);const{runAsync:l,loading:o}=V(_n,{manual:!0,debounceWait:100}),{refresh:d,tableProps:i,search:c}=ht(On,{form:t}),u=()=>{c.reset(),c.submit()},m=p=>{var g;typeof p=="number"&&((g=a==null?void 0:a.current)==null||g.set(p,!0)),l({id:p}).then(()=>{typeof p=="object"&&r([]),d()}).finally(()=>{var S;return typeof p=="number"&&((S=a==null?void 0:a.current)==null?void 0:S.delete(p))})},f=s.useMemo(()=>[{title:"ID",dataIndex:"id"},{title:"账号",dataIndex:"username",render:(p,{avatar:g,username:S})=>h(A,{children:[" ",e(Ne,{src:g})," ",S]})},{title:"昵称",dataIndex:"nickname"},{title:"性别",dataIndex:"gender",render:p=>p===ct.male?e($e,{color:"blue",children:"男"}):e($e,{color:"error",children:"女"})},{title:"邮箱",dataIndex:"email"},{title:"手机号",dataIndex:"mobile",sorter:!0},{title:"注册时间",dataIndex:"create_time",sorter:!0},{title:"操作",key:"operation",fixed:"right",render:(p,g)=>{var P;const{id:S}=g;return h(N,{children:[e(ke,{title:"确认要删除这条数据吗?",onConfirm:()=>m(S),children:e(x,{loading:(P=a==null?void 0:a.current)==null?void 0:P.has(S),icon:e(Me,{}),size:"small",danger:!0,children:"删除"})}),e(Wn,{state:g,refreshList:d})]})}}],[]),y={selectedRowKeys:n,onChange:p=>{console.log("selectedRowKeys changed: ",p),r(p)}},C=n.length>0;return h(A,{children:[h(O,{children:[e("div",{children:e(L.Title,{level:5,children:"搜索"})}),e(qn,{search:c,form:t})]}),e("br",{}),h(O,{children:[h("div",{className:"table-header",children:[e("div",{className:"left",children:e(L.Title,{level:5,children:"用户列表"})}),e("div",{className:"right",children:h(N,{size:"middle",children:[e(ke,{title:`确定要删除这${n.length}条数据吗?`,onConfirm:()=>m(n),children:e(x,{type:"primary",danger:!0,disabled:!C,loading:o&&((k=a.current)==null?void 0:k.size)===0,children:"批量删除"})}),e(Yn,{refreshList:u}),e(x,{type:"link",title:"点击刷新",onClick:d,icon:e(We,{})})]})})]}),e(Te,{rowKey:"id",rowSelection:y,columns:f,...i})]})]})},ue=({title:t="空白页"})=>{const[n,r]=s.useState(0);return h(O,{style:{height:"500px"},children:[e(L.Title,{level:4,children:t}),h(L.Text,{children:["Count: ",n]}),e("br",{}),e(x,{onClick:a=>r(l=>l+1),children:"add"})]})},Jn=({search:t,form:n})=>e(b,{form:n,name:"advanced_search",style:{paddingTop:16},onFinish:a=>{console.log("Received values of form: ",a)},children:h(K,{gutter:24,children:[e(I,{span:6,children:e(b.Item,{name:"title",label:"主题",children:e(T,{placeholder:"标题"})})}),e(I,{span:6,children:e(b.Item,{name:"ahthor",label:"作者",children:e(T,{placeholder:"作者"})})}),e(I,{span:6,children:e(b.Item,{name:"create_time",label:"发布时间",children:e(Nt.RangePicker,{})})}),h(I,{span:6,style:{textAlign:"right"},children:[e(x,{onClick:t.reset,children:"重置"}),e(x,{style:{margin:"0 8px"},type:"primary",onClick:t.submit,children:"查询"})]})]})});const Ee=()=>{console.log("render ArticleIndexPage");const[t]=b.useForm(),n=s.useRef();_(),s.useEffect(()=>{n.current=new Map},[]);const{runAsync:r}=V(Vn,{manual:!0,debounceWait:100}),{refresh:a,tableProps:l,search:o}=ht(zn,{form:t}),d=c=>{var u;(u=n==null?void 0:n.current)==null||u.set(c,!0),r({id:c}).then(a).finally(()=>{var m;return(m=n==null?void 0:n.current)==null?void 0:m.delete(c)})},i=s.useMemo(()=>[{title:"ID",dataIndex:"id"},{title:"封面",dataIndex:"cover",render:c=>e(wt,{width:80,height:45,style:{borderRadius:4},src:c})},{title:"标题",dataIndex:"title"},{title:"简介",dataIndex:"description"},{title:"作者",dataIndex:"author"},{title:"发布时间",dataIndex:"create_time",sorter:!0},{title:"操作",key:"operation",fixed:"right",render:(c,u)=>{var f;const{id:m}=u;return h(N,{children:[e(ke,{title:"确认要删除这条数据吗?",onConfirm:()=>d(m),children:e(x,{loading:(f=n==null?void 0:n.current)==null?void 0:f.has(m),icon:e(Me,{}),size:"small",danger:!0,children:"删除"})}),e(ne,{to:`/article/update/${m}`,children:e(x,{icon:e(Pe,{}),size:"small",children:"编辑"})})]})}}],[]);return h(A,{children:[h(O,{children:[e("div",{children:e(L.Title,{level:5,children:"搜索"})}),e(Jn,{search:o,form:t})]}),e("br",{}),h(O,{children:[h("div",{className:"table-header",children:[e("div",{className:"left",children:e(L.Title,{level:5,children:"文章列表"})}),e("div",{className:"right",children:h(N,{size:"middle",children:[e(ne,{to:"/article/create",children:e(x,{type:"primary",icon:e(se,{}),children:"发布文章"})}),e(x,{type:"link",title:"点击刷新",onClick:a,icon:e(We,{})})]})})]}),e(Te,{rowKey:"id",columns:i,...l})]})]})},Qn=()=>{const[t]=b.useForm(),n=_(),r="articleDraft",{loading:a,run:l}=V(jn,{manual:!0,debounceWait:200,onSuccess:()=>setTimeout(()=>{w.remove(r),n("/article/list")},200)}),o=w.getObject(r)||{},d=async()=>{const u=await t.validateFields();l(u)},i=()=>{const{cover:u,...m}=t.getFieldsValue();w.set(r,m),E.success("已保存到草稿箱")},c=u=>(console.log("Upload event:",u),Array.isArray(u)?u:u&&u.fileList);return h(O,{children:[e(L.Title,{level:3,children:"发布文章"}),e(re,{}),e(b,{form:t,name:"createForm",labelCol:{span:3},initialValues:o,children:h(K,{gutter:36,children:[h(I,{span:16,children:[e(b.Item,{name:"title",label:"文章标题",rules:[{required:!0,message:"请输入标题"}],children:e(T,{})}),e(b.Item,{label:"简介",name:"description",children:e(T,{})}),e(b.Item,{label:"内容",name:"content",rules:[{required:!0,message:"请输入内容"}],children:e(T.TextArea,{rows:20})}),e(b.Item,{wrapperCol:{offset:3},children:h(N,{children:[e(x,{icon:e(Ge,{}),onClick:d,loading:a,type:"primary",children:"发布文章"}),e(x,{icon:e(Lt,{}),onClick:i,children:"保存为草稿"})]})})]}),h(I,{span:8,children:[e(b.Item,{label:"封面",name:"cover",getValueFromEvent:c,valuePropName:"fileList",children:e(Je,{maxCount:1,listType:"picture-card",children:h("div",{children:[e(se,{}),e("div",{style:{marginTop:8},children:"选择图片"})]})})}),e(b.Item,{label:"标签",name:"tags",children:e(Qe,{mode:"tags",placeholder:"文章标签"})}),e(b.Item,{label:"作者",name:"author",rules:[{required:!0,message:"请输入作者"}],children:e(T,{})})]})]})})]})},Xn=()=>{const[t]=b.useForm(),n=_(),r=At(),{loading:a,run:l}=V(Hn,{manual:!0,debounceWait:10,onSuccess:u=>t.setFieldsValue(u)});s.useEffect(()=>{l({id:r.id})},[r.id]);const{loading:o,run:d}=V(Kn,{manual:!0,debounceWait:200,onSuccess:()=>setTimeout(()=>{n("/article/list")},200)}),i=async()=>{const u=await t.validateFields();d(u)},c=u=>(console.log("Upload event:",u),Array.isArray(u)?u:u&&u.fileList);return h(O,{children:[e(L.Title,{level:3,children:"更新文章"}),e(re,{}),e(we,{spinning:a,children:e(b,{form:t,name:"createForm",labelCol:{span:3},children:h(K,{gutter:36,children:[h(I,{span:16,children:[e(b.Item,{name:"title",label:"文章标题",rules:[{required:!0,message:"请输入标题"}],children:e(T,{})}),e(b.Item,{label:"简介",name:"description",children:e(T,{})}),e(b.Item,{label:"内容",name:"content",rules:[{required:!0,message:"请输入内容"}],children:e(T.TextArea,{rows:20})}),e(b.Item,{wrapperCol:{offset:3},children:e(N,{children:e(x,{icon:e(Ge,{}),onClick:i,loading:o,type:"primary",children:"保存"})})})]}),h(I,{span:8,children:[e(b.Item,{label:"封面",name:"cover",getValueFromEvent:c,valuePropName:"fileList",children:e(Je,{maxCount:1,listType:"picture-card",children:h("div",{children:[e(se,{}),e("div",{style:{marginTop:8},children:"选择图片"})]})})}),e(b.Item,{label:"标签",name:"tags",children:e(Qe,{mode:"tags",placeholder:"文章标签"})}),e(b.Item,{label:"作者",name:"author",rules:[{required:!0,message:"请输入作者"}],children:e(T,{})})]})]})})})]})},Zn=()=>{const{pathname:t}=Q();return e(Ft,{status:"404",title:"404",subTitle:`页面不存在, 当前路由: ${t}`,extra:e(x,{type:"primary",children:e(ne,{to:"/",children:"返回首页"})})})};const er=t=>{const{title:n="Iframe Page",name:r="internal-iframe"}=t,a=s.useRef(null),[l,o]=s.useState(!0),[d]=fe();s.useEffect(()=>{o(!0)},[d]);const i=d.get("url"),c=()=>{o(!1)};return i?e(A,{children:e(O,{style:{height:"100%",padding:0},children:e(we,{wrapperClassName:"iframeSpin",spinning:l,tip:"正在加载第三方页面, 请稍后...",children:e("iframe",{ref:a,width:"100%",height:"100%",onLoad:c,title:n,name:r,src:i})})})}):e(O,{children:e(Xe,{message:"无效的url地址",type:"error"})})},Ae="/iframe",mt=t=>`${Ae}?url=${t}`;function tr(t){const n=t.split(".")[1];if(n)try{return JSON.parse($t(n))}catch(r){console.warn("Parse Token Error: ",r);return}}function xe(){var r;const t=w.getString(R.tokenKey);if(!t)return!1;const n=tr(t);return n!==void 0&&((r=n==null?void 0:n.data)==null?void 0:r.uid)>0&&n.exp>new Date().getTime()/1e3}const nr=({loading:t,title:n,delay:r})=>{const{settings:{theme:a}}=s.useContext(z);return e(we,{size:"large",spinning:t,tip:n,delay:r,wrapperClassName:`page-loading-spin-${a}`,children:e("div",{style:{height:"100vh",width:"100vw"}})})},rr=()=>{const[t,n]=Ze.useNotification(),r=w.getBoolean("dontShowCompactModeNotify"),{setSetting:a,settings:{compactMode:l}}=s.useContext(z),o=()=>{const d=`open${Date.now()}`,i=h(N,{children:[e(x,{type:"link",size:"small",onClick:()=>t.destroy(),children:"不再提示"}),e(x,{type:"primary",size:"small",onClick:()=>{a({compactMode:!0}),t.destroy(d)},children:"开启"})]});t.info({message:"开启紧凑布局模式",description:"检测到您的屏幕尺寸过小, 是否开启紧凑布局模式? 或者您也可以选择在设置中手动开启",btn:i,key:d,onClose:()=>w.set("dontShowCompactModeNotify",!0)})};return s.useEffect(()=>{!r&&!l&&window.innerWidth<=1440&&o()},[]),n},ar={},ie=s.createContext(ar),or=({children:t})=>{const[n,r]=s.useState([]),[a,l]=s.useState(""),o=s.useMemo(()=>Ut(),[]),d=_(),i=s.useCallback(()=>{const m=k=>{k&&k!==a&&l(k)},f=k=>n.findIndex(p=>p.key===k)>-1,v=(k,p=!0)=>{f(k.key)||r(g=>[...g,{...k}]),p&&a!==k.key&&m(k.key)};return{openTab:m,addTab:v,removeTab:k=>{const p=n.findIndex(S=>S.key===k);if(p===-1)return;const g=n[p===0?1:p-1];r(S=>S.filter(P=>P.key!==k)),a===k&&g&&d(g.key),console.log("tabs",n)},hasTab:f,addTabWithNavigate:k=>{v(k,!0),d(k.key)}}},[n,a]),c=s.useMemo(()=>i(),[i]),u=s.useMemo(()=>({tabs:n,setTabs:r,activeTab:a,tabEvent:o,...c}),[n,a]);return e(ie.Provider,{value:u,children:t})};const he=new Map,Se=t=>{t.map(n=>{pe(n)&&(n==null?void 0:n.type)==="url"||(ge(n)&&Se(n.children||[]),(me(n)||ot(n))&&(n.path&&he.set(n.path,n.label),n.children&&Se(n.children||[])))})},lr=()=>{const{menuList:t}=s.useContext(Z),n=s.useMemo(()=>(he.clear(),Se(t),he),[t]),r=Q(),[a]=fe(),l=()=>{if(r.pathname===Ae){const i=a.get("url");if(i&&he.has(i))return[e(de.Item,{children:e(ne,{style:{color:"inherit"},to:mt(i),children:n.get(i)})},i)]}return[]},o=s.useMemo(()=>{const i=r.pathname.split("/").filter(c=>c);return i.map((c,u)=>{const m=`/${i.slice(0,u+1).join("/")}`;return n.has(m)?e(de.Item,{children:u===i.length-1?e(ne,{style:{color:"inherit"},to:m,children:n.get(m)}):n.get(m)},m):null})},[r]),d=[e(de.Item,{children:e(Dt,{})},"home"),...o,...l()];return e(de,{className:"breadcrumb",children:d})},pt=q.memo(lr),sr=({active:t,children:n,id:r,parentRef:a})=>{const[l]=s.useState(()=>document.createElement("div")),o=s.useRef(!1);return o.current=o.current||t,s.useEffect(()=>{var d,i;if(t)(d=a.current)==null||d.appendChild(l);else try{(i=a.current)==null||i.removeChild(l)}catch{}},[t,a,l]),s.useEffect(()=>{l.setAttribute("id",r)},[r,l]),s.useEffect(()=>()=>{var d;try{(d=a.current)==null||d.removeChild(l)}catch{}},[]),e(A,{children:o.current&&Rt.createPortal(n,l)})};let _e=1;const ir=()=>{const t=Ot(),{pathname:n}=Q(),r=n,{tabs:a,tabEvent:l}=s.useContext(ie),o=s.useRef(null),[d,i]=s.useState([]);return s.useEffect(()=>{const c=l.on("reload",u=>{console.log("刷新页面:",u),i(d.map(m=>m.id!==u?m:{...m,key:++_e}))});return()=>{c()}}),s.useEffect(()=>{if(console.log("chage",r,a),!r)return;const c=a.map(u=>u.key);i(u=>(u.find(f=>f.id===r)||u.push({id:r,element:t,key:++_e}),u.filter(f=>c.includes(f.id))))},[a]),h(A,{children:[e("div",{ref:o,className:"keep-alive"}),d.map(({id:c,element:u,key:m})=>e(sr,{active:c===r,parentRef:o,id:c,children:u},m))]})};const cr=()=>{const t=_(),{pathname:n}=Q(),{tabs:r,activeTab:a,removeTab:l,tabEvent:o}=s.useContext(ie),{colorPrimary:d}=J(),[i,c]=s.useState(!1),{colorBgLayout:u}=J(),m=k=>{k&&k!==n&&t(k)},f=(k,p)=>{p==="remove"&&l(k)},v=()=>{o.emit("reload",n)},y=k=>{const p=k;c(p),o.emit("fullScreen",p)},C=()=>h(N,{size:0,children:[e(oe,{title:"刷新当前页面",children:e(x,{onClick:v,type:"link",style:{color:d},icon:e(Bt,{})})}),(()=>i?e(oe,{title:"退出全屏",children:e(x,{onClick:()=>y(!1),type:"link",style:{color:d},icon:e(tt,{})})}):e(oe,{title:"全屏",children:e(x,{onClick:()=>y(!0),type:"link",style:{color:d},icon:e(nt,{})})}))()]});return e(et,{className:"tabs-wrapper",type:"editable-card",hideAdd:!0,activeKey:a,items:[...r],onChange:m,onEdit:f,tabBarExtraContent:e(C,{}),style:{backgroundColor:u,left:i?0:200}})};const dr=({children:t})=>{console.log("multitab Content render...");const{pathname:n}=Q(),{addTab:r,hasTab:a,openTab:l,tabs:o,tabEvent:d}=s.useContext(ie),{mapPathToMenu:i}=s.useContext(Z),c=s.useRef(null),[u,{toggleFullscreen:m}]=je(c),{colorBgLayout:f}=J(),v=Et(),y=k=>{var S;let p="";const g=k.split("/").filter(P=>P);for(let P=0;P<g.length;P++){const Fe=`/${g.slice(0,P+1).join("/")}`;i.has(Fe)&&(p=((S=i.get(Fe))==null?void 0:S.label)||p)}return p},C=()=>{console.log("handleAddTab");const k=n;if(a(k)){l(k);return}const p=i.get(n);if(!p||!p.path){let g=y(n);if(!g)g="404";else{const{params:{id:S=void 0}}=v.pop()||{params:{id:void 0}};S&&(g+=": "+S)}r({label:g,key:k,children:null});return}r({label:p.label,key:p.key,children:null})};return s.useEffect(()=>{C()},[n]),s.useEffect(()=>{const k=d.on("fullScreen",p=>{m()});return()=>{k()}},[]),h(U.Content,{className:"content",ref:c,style:{backgroundColor:f},children:[e(cr,{}),o.length?e(pt,{}):null,e(ir,{})]})},ur=q.memo(dr),ft=()=>{const{settings:{showFooter:t}}=s.useContext(z),{Text:n,Link:r}=L;return t?h(U.Footer,{style:{textAlign:"center",paddingBottom:4},children:[h(n,{type:"secondary",children:["React Admin Template",e(r,{href:"https://github.com/xstnet/react-admin-template",target:"_blank",style:{color:"inherit",marginLeft:5},children:e(_t,{})})]}),e("br",{}),e(r,{href:"https://github.com/xstnet",target:"_blank",children:e(n,{type:"secondary",children:"醉丶春风"})}),h(n,{type:"secondary",children:["©2023 Created by",e(r,{target:"_blank",href:"https://ant-design.antgroup.com/index-cn",style:{margin:"0 6px",color:"inherit"},children:"Ant Design"}),"V5"]})]}):null};const D=zt({scriptUrl:R.iconFontUrl,extraCommonProps:{}}),hr=()=>{const{fullScreen:t,setFullScreen:n}=s.useContext(be),r=()=>{E.success(t?"已退出全屏模式":"进入全屏模式"),n(!t)};return t?e(tt,{title:"退出全屏模式",className:"action-icon",onClick:r}):e(nt,{title:"进入全屏模式",className:"action-icon",onClick:r})},mr=()=>e(L.Link,{className:"action-icon",target:"_blank",style:{color:"inherit"},href:"https://github.com/xstnet/react-admin-template",children:e(Ht,{})}),pr=()=>e(te,{size:"small",itemLayout:"horizontal",dataSource:[{title:"张三 评论了你",desc:"评论内容评论内容评论内容",createTime:"2023-04-06 15:39:00"},{title:"您有3个订单待支付",desc:"订单1,订单2,订单3",createTime:"2023-04-05 15:39:00"},{title:"张三 的请假申请需要您的审批",desc:"",createTime:"2023-04-01 12:08:00"},{title:"本周周报待填写",createTime:"2023-03-02 10:55:00",desc:"说明"}],renderItem:n=>e(te.Item,{children:e(te.Item.Meta,{avatar:e(Ne,{size:48,icon:e(rt,{})}),title:e("a",{href:"https://ant.design",children:n.title}),description:h("div",{children:[n.desc,n.desc&&e("br",{}),e(L.Text,{children:e(it,{style:{fontSize:12},time:n.createTime})})]})})})}),fr=()=>e(te,{size:"small",itemLayout:"horizontal",dataSource:[{title:"您有一封新的邮件",type:"mail"},{title:"您有3个订单待支付",type:"payment"},{title:"张三 的请假申请需要您的审批",type:"workflow"},{title:"本周周报待填写",type:"common"}],renderItem:n=>e(te.Item,{children:e(te.Item.Meta,{avatar:e(D,{style:{fontSize:30},type:`icon-${n.type}`}),title:e("a",{href:"https://ant.design",children:n.title}),description:"3天前"})})}),gr=()=>h(A,{children:[e(et,{centered:!0,style:{width:300},defaultActiveKey:"notify",items:[{key:"notify",label:"通知(3)",children:e(fr,{})},{key:"message",label:"消息(4)",children:e(pr,{})}],onChange:void 0,tabBarExtraContent:e(x,{type:"link",style:{marginRight:10},children:"清空"})}),e(re,{style:{margin:"8px 0"}}),h(N,{split:e(re,{type:"vertical"}),style:{width:"100%",justifyContent:"center",marginBottom:0},children:[e(x,{type:"link",children:"全部已读"}),e(x,{type:"link",children:"查看更多"})]})]}),br=t=>e(ve,{count:98,children:e(jt,{arrow:!1,content:e(gr,{}),placement:"bottomRight",trigger:"click",children:e(D,{title:"通知提醒",type:"icon-notify",className:"action-icon"})})}),yr=()=>e(D,{title:"搜索",type:"icon-search",className:"action-icon"}),kr=()=>{const{settings:{theme:t},setSetting:n}=s.useContext(z),r=()=>{n({followSystemTheme:!1,theme:t==="light"?"dark":"light"})};return t==="dark"?e(D,{onClick:r,title:"主题-深色模式",type:"icon-theme-dark",className:"action-icon"}):e(D,{onClick:r,title:"主题-明亮模式",type:"icon-theme-light",className:"action-icon"})};const vr=t=>{const n=["#1890ff","#722ed1","#eb2f96","#00b96b","#52c41a","#13c2c2","#1677ff","#f5222d","#fa8c16","#faad14"],{onChange:r,presetColors:a=n,defaultSelectedColor:l=""}=t,{value:o=l}=t,[d,i]=s.useState(o),c=u=>{i(u),r==null||r(u)};return e("div",{className:"theme-color-wrap",children:a.map(u=>e("div",{onClick:()=>c(u),className:"theme-color-item",style:{backgroundColor:u},title:u,children:d===u&&e(Kt,{className:"checked-icon"})},u))})},Cr=t=>{const{open:n,onClose:r=dt}=t,{settings:a,setSetting:l}=s.useContext(z),[o]=b.useForm(),[d]=st(),i=s.useMemo(()=>({...a,theme:a.followSystemTheme?"followSystem":a.theme}),[a]),c=(u,m)=>{const f={...u},{theme:v,fixedMenu:y,fixedHeader:C}=f;v&&(console.log("themeee",v),f.followSystemTheme=!1,v==="followSystem"&&(f.followSystemTheme=!0,f.theme=d)),y&&(f.fixedHeader=!0),C===!1&&(f.fixedMenu=!1),l(f),console.log("chage",u,m)};return at(()=>{o==null||o.setFieldsValue(i)},[i]),e(Vt,{title:"偏好设置",onClose:r,open:n,children:h(b,{name:"basic",labelCol:{span:5},wrapperCol:{span:19},initialValues:{...i},autoComplete:"off",onValuesChange:c,form:o,children:[e(b.Item,{label:"外观",name:"theme",children:h(W.Group,{buttonStyle:"solid",children:[h(W.Button,{value:"light",children:[e(D,{type:"icon-theme-light"})," 浅色"]}),h(W.Button,{value:"dark",children:[e(D,{type:"icon-theme-dark"})," 深色"]}),h(W.Button,{value:"followSystem",children:[e(D,{type:"icon-followSystem"})," 跟随系统"]})]})}),e(b.Item,{label:"紧凑模式",valuePropName:"checked",name:"compactMode",children:e(ae,{checkedChildren:"开启",unCheckedChildren:"关闭"})}),e(b.Item,{label:"主题色",name:"primaryColor",children:e(vr,{defaultSelectedColor:a.primaryColor})}),e(re,{children:"布局"}),e(b.Item,{help:"功能正在完善中",label:"多标签页",valuePropName:"checked",name:"multitabMode",children:e(ae,{checkedChildren:"启用",unCheckedChildren:"关闭"})}),e(b.Item,{label:"固定头部",valuePropName:"checked",name:"fixedHeader",children:e(ae,{checkedChildren:"开启",unCheckedChildren:"关闭"})}),e(b.Item,{help:"固定菜单启用时, 头部也会同步固定",label:"固定菜单",valuePropName:"checked",name:"fixedMenu",children:e(ae,{checkedChildren:"开启",unCheckedChildren:"关闭"})}),e(b.Item,{valuePropName:"checked",label:"显示底部",name:"showFooter",children:e(ae,{checkedChildren:"开启",unCheckedChildren:"关闭"})})]})})},xr=t=>{const[n,r]=s.useState(!1);return h("div",{children:[e(Cr,{open:n,onClose:()=>{r(!1)}}),e(D,{onClick:()=>{r(!0)},title:"设置",type:"icon-setting",className:"action-icon"})]})},Sr=()=>{const{userInfo:t,setUserInfo:n,setIsLogin:r}=s.useContext(be),{menuCollapsed:a,setMenuCollapsed:l}=s.useContext(Z),{token:{colorBgContainer:o}}=H.useToken(),d=_(),i=()=>h("div",{className:"left",children:[h("div",{className:"logo",children:[e(D,{type:"icon-react",className:"logo-img"}),e("span",{className:"logo-text",children:"React Admin Template"})]}),e("div",{children:q.createElement(a?Yt:qt,{onClick:()=>l(!a)})})]}),c=()=>{const u=()=>h(A,{children:[e(yr,{}),e(br,{}),e(hr,{}),e(mr,{}),e(kr,{}),e(xr,{})]}),m=[{label:e("a",{children:"个人中心"}),icon:e(rt,{}),key:"userCenter"},{label:e("a",{children:"修改资料"}),key:"update",icon:e(Pe,{})},{type:"divider"},{label:"退出",icon:e(Gt,{}),key:"logout",onClick:()=>{Rn().then(()=>{w.removeToken(),r(!1),n(null),d("/login")})}}];return e("div",{className:"right",children:h(N,{size:"middle",children:[u(),e(Wt,{menu:{items:m},children:h(N,{className:"pointer",children:[e("span",{children:t==null?void 0:t.nickname}),e(Ne,{src:t==null?void 0:t.avatar})]})})]})})};return e(U.Header,{className:"header",style:{background:o},children:h(A,{children:[i(),c()]})})},gt=q.memo(Sr),Ir=()=>{const t=_(),{pathname:n}=Q(),[r,a]=s.useState(),{menuList:l,mapPathToMenu:o}=s.useContext(Z);let d="/dashboard",i=[],c=!1;const[u]=fe();at(()=>{let v=o.get(n);if(!v){let y="";o.forEach(({path:C})=>{n.startsWith(C)&&C.length>y.length&&(y=C)}),y&&(v=o.get(y))}v&&(v!=null&&v.hideInMenu?a([v.parent]):a([n]))},[n]);const m=v=>{const y=o.get(v.key);if(console.log("clicked menu",v,y),!y){console.warn("未获取到菜单信息");return}if(y.path!==n){if((y==null?void 0:y.type)==="url"){window.open(y.path,"_blank");return}if(document.title=`${R.pageTitlePrefix} - ${y.label}`,(y==null?void 0:y.type)==="iframe"){console.log("打开iframe页面"),t(mt(y.path));return}t(y.path)}},f=s.useMemo(()=>{const v=C=>C.badge?C.badge==="dot"?e(ve,{className:"menu-item-badge",offset:[6,0],dot:!0,children:C.label}):e(ve,{className:"menu-item-badge",offset:[15,0],count:C.badge,children:C.label}):C.label,y=(C,k)=>{const p=[];return!c&&k&&i.push(k.key),C.map(g=>{if(pe(g)&&(g.parent&&n.indexOf(g.path)===0&&(console.log("ccccccccccccccccccccc",g.parent),d=g.parent,c=!0),g.type==="iframe"&&(u.get("url")||"")===g.path&&(c=!0,d=g.key),g.hideInMenu))return;let S;if(nn(g))S={...g};else if(ge(g))S={...g},g.children&&g.children.length>0&&(S.children=y(g.children));else if(me(g)||ot(g)){let{icon:P}=g;typeof P=="string"&&P.includes("icon-")&&(P=e(D,{type:P})),S={key:"",...g,icon:P,label:v(g),children:me(g)?y(g.children,g):void 0},!c&&g.path===n&&(d=g.key,c=!0)}S&&(S.key=S.key,p.push(S))}),!c&&i.pop(),p};return y(l)},[l]);return e(Jt,{style:{height:"100%"},onClick:m,mode:"inline",defaultSelectedKeys:[d],selectedKeys:r,items:f,defaultOpenKeys:i})},Tr=q.memo(Ir);const bt=()=>{const{menuCollapsed:t}=s.useContext(Z),{colorBgContainer:n}=J();return e(U.Sider,{style:{background:n},trigger:null,className:"left-sider",collapsible:!0,collapsed:t,children:e(Tr,{})})};const Mr=()=>(console.log("MultitabLayout render..."),e(or,{children:h(U,{className:"multitab-layout",children:[e(gt,{}),h(U,{children:[e(bt,{}),h(U,{className:"content-layout",children:[e(ur,{}),e(ft,{})]})]})]})})),Pr=q.memo(Mr);const Nr=({children:t})=>(console.log("Content render..."),console.log("childdddddddd",t),e(U.Content,{className:"content",children:t})),wr=q.memo(Nr);const Lr=()=>(console.log("SingleLaylut render..."),h(U,{className:"single-tab-layout",children:[e(gt,{}),h(U,{children:[e(bt,{}),h(U,{className:"content-layout",children:[e(pt,{}),e(wr,{children:e(Qt,{})}),e(ft,{})]})]})]}));const Ar=()=>{const[t,n]=s.useState(!0),{setIsLogin:r,setUserInfo:a}=s.useContext(be),{colorBgContainer:l}=J(),{settings:{multitabMode:o,fixedMenu:d,fixedHeader:i,theme:c}}=s.useContext(z),{menuCollapsed:u}=s.useContext(Z),m=_(),[f]=fe();return console.log("global layout render..."),s.useEffect(()=>{xe()&&Dn().then(v=>{if(n(!1),r(!0),a(v),f.has("ghpage")){const y=decodeURIComponent(f.get("ghpage"));m(y);return}}).catch(v=>{v instanceof Xt&&Ze.error({message:"网络错误",description:"获取用户信息失败, 无法打开页面",duration:null,closeIcon:null})})},[]),xe()?t?e(nr,{title:"页面加载中",loading:t}):h("div",{"data-fixed-menu":d?1:0,"data-menu-collapsed":u?1:0,"data-fixed-header":i?1:0,style:{background:l},className:`global-layout theme-${c}`,children:[o?e(Pr,{}):e(Lr,{}),e(rr,{})]}):(m("/login"),null)},Fr=q.memo(Ar);const $r=()=>{const t=_(),{loading:n,run:r}=V(Un,{manual:!0,debounceWait:300,onSuccess:o=>{w.setToken(o.token),t("/dashboard")}});document.title=R.pageTitle;const a=o=>{r(o)};s.useEffect(()=>{xe()&&t("/dashboard")},[]);const l={remember:!0,username:"admin",password:"123456"};return e(A,{children:h(He,{theme:{algorithm:[H.defaultAlgorithm]},children:[e("div",{className:"bg-wrap"}),h(K,{className:"login-wrap",children:[e(I,{span:15,className:"login-banner"}),h(I,{span:9,className:"login-form-wrap",children:[e(L.Title,{style:{textAlign:"center"},children:"后台管理系统"}),e("br",{}),h(b,{name:"loginForm",labelCol:{span:5},wrapperCol:{span:19},style:{maxWidth:600},initialValues:l,onFinish:a,autoComplete:"off",children:[e(b.Item,{label:"用户名",name:"username",rules:[{required:!0,message:"请输入用户名!"}],children:e(T,{placeholder:"admin"})}),e(b.Item,{label:"密码",name:"password",rules:[{required:!0,message:"请输入密码!"}],children:e(T.Password,{placeholder:"123456"})}),e(b.Item,{name:"remember",valuePropName:"checked",wrapperCol:{offset:5},children:e(Ke,{children:"记住我"})}),e(b.Item,{wrapperCol:{offset:5,span:16},children:e(x,{loading:n,type:"primary",htmlType:"submit",children:"登录"})})]})]})]})]})})},Ur=()=>{const{removeTab:t,tabs:n,setTabs:r,addTabWithNavigate:a,addTab:l}=s.useContext(ie),{settings:{multitabMode:o}}=s.useContext(z),{pathname:d}=Q(),i=c=>{var m;const u=n.findIndex(f=>f.key===d);if(typeof c=="number"){t((m=n[c])==null?void 0:m.key);return}if(u!==-1){if(c==="other"){r(n.filter(f=>f.key===d));return}if(c==="left"){r(n.filter((f,v)=>v>=u));return}if(c==="right"){r(n.filter((f,v)=>v<=u));return}}};return h(O,{children:[!o&&e(Xe,{type:"error",message:"请开启多标签模式"}),e("br",{}),h(N,{children:[e(x,{disabled:!o,onClick:()=>{a({label:"控制台",key:"/dashboard"})},children:"打开控制台标签页"}),e(x,{disabled:!o,onClick:()=>{l({label:"文章列表",key:"/article/list"},!1)},children:"后台打开文章列表"}),e(x,{disabled:!o,onClick:()=>{a({label:"编辑文章ID: 1",key:"/article/update/1"})},children:"编辑文章ID: 1"}),e(x,{disabled:!o,onClick:()=>{a({label:"编辑文章ID: 2",key:"/article/update/2"})},children:"编辑文章ID: 2"})]}),e(re,{}),h(N,{children:[e(x,{disabled:!o,onClick:i.bind(void 0,1),children:"关闭第二个标签页"}),e(x,{disabled:!o,onClick:i.bind(void 0,"left"),children:"关闭左侧标签页"}),e(x,{disabled:!o,onClick:i.bind(void 0,"right"),children:"关闭右侧标签页"}),e(x,{disabled:!o,onClick:i.bind(void 0,"other"),children:"关闭其他标签页"})]})]})};function Dr(){return[{path:"/login",element:e($r,{})},{path:"/",element:e(Fr,{}),children:[{path:"/",element:e(Oe,{})},{path:"/dashboard",element:e(Oe,{})},{path:"/user",children:[{index:!0,element:e(Be,{})},{path:"/user/center/index",element:e(Be,{})},{path:"/user/center/update",element:e(Nn,{})}]},{path:"/example",children:[{path:"/example/userList",element:e(Gn,{})},{path:"/example/tabs/manage",element:e(Ur,{})}]},{path:"/article",children:[{index:!0,element:e(Ee,{})},{path:"/article/list",element:e(Ee,{})},{path:"/article/create",element:e(Qn,{})},{path:"/article/update/:id",element:e(Xn,{})}]},{path:"/blank",element:e(ue,{})},{path:"/badge/dot",element:e(ue,{title:"红点徽标"})},{path:"/badge/count",element:e(ue,{title:"数字徽标"})},{path:Ae,element:e(er,{})},{path:"/multilevel/menu/2/3",element:e(ue,{title:"三级菜单"})},{path:"*",element:e(Zn,{})}]}]}function Rr(){s.useEffect(()=>{},[]);const t=Zt(Dr(),{basename:"/react-admin-template/"});return e(Cn,{children:e(en,{router:t})})}function ze(t){const n=JSON.stringify({type:"JWT",alg:"HS256"}),r=Number((new Date().getTime()/1e3).toFixed(0)),a=JSON.stringify({iss:"github.com/xstnet",sub:"react-admin",iat:r,exp:r+86400*14,data:t}),l="H_97UyQUOmURnZdDwI0khuAt4Cmg";return`${Ue(n)}.${Ue(a)}.${l}`}M.mock(/api\/login/,"post",({body:t})=>{const{username:n,password:r}=JSON.parse(t);return n==="admin"?r!=="123456"?{code:-1,message:"密码错误"}:{code:0,message:"登录成功",data:{token:ze({uid:1})}}:{code:0,message:"登录成功",data:{token:ze({uid:X.Random.natural(2,1e4)})}}});M.setup({timeout:100});M.mock(/api\/user\/info/,"get",t=>({code:0,message:"ok",data:{id:1,username:"admin",nickname:"醉丶春风",avatar:"https://www.xstnet.com/static/images/head.gif",password:"",gender:X.Random.natural(1,2),email:"shantongxu@qq.com",mobile:"133xxxx3333"}}));M.mock(/api\/user\/logout/,"post",t=>({code:0,message:"退出成功"}));M.mock(/api\/user\/list/,"get",t=>{const n=new URLSearchParams(t.url);let r=Number(n.has("pageSize")?n.get("pageSize"):10);const a={code:0,message:"ok",data:{total:100,[`list|${r}`]:[{"id|+1":r,username:"@first@last",nickname:"@cname",avatar:()=>X.Random.dataImage("200x200"),email:"@email",mobile:()=>M.mock(/^1[3456789]\d{9}$/).replace(/^(\d{3})\d{4}(\d{4})$/,"$1****$2"),"gender|1-2":0,create_time:"@date(yyyy-MM-dd HH:MM:ss)"}]}};return M.mock(a)});M.mock(/api\/user\/create/,"post",t=>({code:0,message:"创建成功",data:{id:X.Random.natural(100,9999)}}));M.mock(/api\/user\/update/,"post",t=>({code:0,message:"更新成功"}));M.mock(/api\/user\/delete/,"post",t=>({code:0,message:"删除成功"}));M.setup({timeout:100});M.mock(/api\/article\/detail/,"get",t=>(console.log("🚀 ~ file: article.ts:7 ~ Mock.mock ~ options:",t),{code:0,message:"ok",data:{id:1,title:"主题",description:"醉丶春风",author:"醉丶春风",tags:[1,2],content:"content",create_time:X.Random.datetime()}}));M.mock(/api\/article\/list/,"get",t=>{const n=new URLSearchParams(t.url);let r=Number(n.has("pageSize")?n.get("pageSize"):10);const a={code:0,message:"ok",data:{total:100,[`list|${r}`]:[{"id|+1":r,author:"@first@last",title:()=>M.Random.ctitle(5,20),description:"@cname",cover:()=>X.Random.dataImage("480x270","封面"),content:"@email",create_time:"@date(yyyy-MM-dd HH:MM:ss)"}]}};return M.mock(a)});M.mock(/api\/article\/create/,"post",t=>({code:0,message:"创建成功",data:{id:X.Random.natural(100,9999)}}));M.mock(/api\/article\/update/,"post",t=>({code:0,message:"更新成功"}));M.mock(/api\/article\/delete/,"post",t=>({code:0,message:"删除成功"}));tn.createRoot(document.getElementById("root")).render(e(Rr,{}));
