import{a as e,F as P,j as r,C as A,p as N,u as R,g as w}from"./index-4b9c1418.js";import{r as g,ap as z,aq as B,ar as j,as as I,N as q,ag as L,at as _,a0 as $,v as T,J as v,a4 as E,a5 as k,B as u,au as G,av as M,a1 as U,aw as J,c as C,a8 as K,a9 as W,L as F,X,a2 as H,aa as Q,ab as V}from"./vendor-2fae8136.js";const Y=a=>{const{search:l,form:s,onSearch:d,onReset:h,fields:m,title:f="搜索",...y}=a,x=g.useCallback((i,b,t)=>{switch(typeof b=="string"&&["input","number","select"].includes(i)&&(t.placeholder=(t==null?void 0:t.placeholder)||b),i){case"input":return e($,{...t});case"number":return e(_,{...t});case"select":return e(L,{...t});case"radio":return e(q.Group,{...t});case"date":return e(I,{...t});case"dateRange":return e(I.RangePicker,{...t});case"checkbox":return e(j.Group,{...t});case"cascader":return e(B,{...t});case"treeSelect":return e(z,{...t});default:return e(P,{})}},[]),n=async()=>{await s.validateFields().catch(i=>console.warn(i)),d==null||d(s),l.submit()},o=()=>{h==null||h(s),l.reset()},c={labelCol:{span:5},style:{paddingTop:16}},p=({type:i,name:b,label:t,fieldProps:D={},itemProps:O={}})=>e(k,{span:6,children:e(v.Item,{name:b,label:t,...O,children:x(i,t,D)})},`${b}-${t}`),S=()=>{const i=l.type==="simple"?0:18-m.length%4*6;return r(k,{span:6,offset:i,style:{textAlign:"right"},children:[e(u,{onClick:o,children:"重置"}),e(u,{style:{margin:"0 8px"},type:"primary",onClick:n,children:"查询"}),r("a",{style:{fontSize:12},onClick:l.changeType,children:[l.type==="advance"?e(G,{}):e(M,{}),l.type==="advance"?"收起":"展开"]})]})};return r(A,{children:[e("div",{children:e(T.Title,{level:5,children:f})}),e(v,{form:s,...c,...y,children:r(E,{gutter:24,children:[l.type==="advance"?m.map(p):m.slice(0,3).map(p),S()]})})]})},te=()=>{console.log("render ArticleIndexPage");const a=g.useRef(new Map),{runAsync:l}=U(N,{manual:!0,debounceWait:100}),[s]=v.useForm(),{refresh:d,tableProps:h,search:m}=R(w,{form:s}),f=n=>{var o;(o=a==null?void 0:a.current)==null||o.set(n,!0),l({id:n}).then(d).finally(()=>{var c;return(c=a==null?void 0:a.current)==null?void 0:c.delete(n)})},y=g.useMemo(()=>[{title:"ID",dataIndex:"id"},{title:"封面",dataIndex:"cover",render:n=>e(J,{width:80,height:45,style:{borderRadius:4},src:n})},{title:"标题",dataIndex:"title"},{title:"简介",dataIndex:"description"},{title:"作者",dataIndex:"author"},{title:"发布时间",dataIndex:"create_time",sorter:!0},{title:"操作",key:"operation",fixed:"right",render:(n,o)=>{var p;const{id:c}=o;return r(C,{children:[e(K,{title:"确认要删除这条数据吗?",onConfirm:()=>f(c),children:e(u,{loading:(p=a==null?void 0:a.current)==null?void 0:p.has(c),icon:e(W,{}),size:"small",danger:!0,children:"删除"})}),e(F,{to:`/article/update/${c}`,children:e(u,{icon:e(X,{}),size:"small",children:"编辑"})})]})}}],[]);return r(P,{children:[e(Y,{search:m,form:s,fields:[{type:"input",label:"标题",name:"title"},{type:"input",label:"作者",name:"author"},{type:"input",label:"简介",name:"desc"},{type:"radio",label:"单选",name:"radio",fieldProps:{options:[{label:"1111",value:"222"},{label:"2222",value:"333"}]}},{type:"checkbox",label:"多选",name:"checkbox",fieldProps:{options:[{label:"1111",value:"2223452"},{label:"1111",value:"2222"},{label:"1111",value:"222"}]}},{type:"select",label:"状态",name:"status",fieldProps:{options:[{label:"已发布",value:"published"},{label:"草稿",value:"draft"}]}},{type:"dateRange",label:"发布时间",name:"create_time"}],title:"查询"}),e("br",{}),r(A,{children:[r("div",{className:"table-header",children:[e("div",{className:"left",children:e(T.Title,{level:5,children:"文章列表"})}),e("div",{className:"right",children:r(C,{size:"middle",children:[e(F,{to:"/article/create",children:e(u,{type:"primary",icon:e(H,{}),children:"发布文章"})}),e(u,{type:"link",title:"点击刷新",onClick:d,icon:e(Q,{})})]})})]}),e(V,{rowKey:"id",columns:y,...h})]})]})};export{te as default};
