import{j as Ne,r as s,C as Ve,z as Ct,t as j,u as Ye,T as ce,d as de,a as K,L as le,b as we,c as L,S as N,I,B as x,P as ue,e as We,D as Le,R as Ge,A as xt,f as St,X as Tt,Y as It,g as Je,h as Mt,i as V,k as T,l as pe,m as xe,n as Pt,o as Nt,p as wt,q as W,s as B,F as y,v as Z,w as Y,M as Qe,x as Lt,E as Ae,y as $e,G as Oe,H as Se,U as Xe,J as At,K as G,N as $t,O as se,Q as Ze,V as Ft,W as et,Z as tt,_ as Ut,$ as Fe,a0 as ne,a1 as Dt,a2 as he,a3 as nt,a4 as Rt,a5 as at,a6 as rt,a7 as J,a8 as fe,a9 as Ot,aa as Et,ab as Bt,ac as ot,ad as _t,ae as lt,af as st,ag as qt,ah as U,ai as zt,aj as Ht,ak as jt,al as oe,am as it,an as Te,ao as Kt,ap as Vt,aq as Ue,ar as Yt,as as ie,at as Wt,au as Gt,av as Jt,aw as Qt,ax as Xt,ay as Zt,az as en,aA as tn,aB as nn,aC as P,aD as ae,aE as Ee,aF as an}from"./vendor-266726aa.js";(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function a(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(o){if(o.ep)return;o.ep=!0;const l=a(o);fetch(o.href,l)}})();const A=Ne.Fragment,e=Ne.jsx,h=Ne.jsxs,Be=[{label:"æ§åˆ¶å°",type:"group",children:[{label:"æ§åˆ¶å°",icon:"icon-dashboard",path:"/dashboard"}]},{label:"ç¤ºä¾‹é¡µé¢",type:"group",children:[{label:"åˆ—è¡¨é¡µ",icon:"icon-list",path:"/example/userList"},{label:"å¤šçº§èœå•",icon:"icon-list",path:"/multilevel/menu",children:[{label:"äºŒçº§èœå•",icon:"icon-list",path:"/multilevel/menu/2",children:[{label:"ä¸‰çº§èœå•",icon:"icon-list",path:"/multilevel/menu/2/3"}]}]},{label:"Tabsæ ‡ç­¾é¡µ",icon:"icon-list",path:"/example/tabs",children:[{label:"æ ‡ç­¾ç®¡ç†",icon:"icon-list",path:"/example/tabs/manage"}]},{label:"ç©ºç™½é¡µ",icon:"icon-example",path:"/blank"},{label:"404",icon:"icon-example",path:"/404"}]},{label:"å¾½æ ‡ç¤ºä¾‹",type:"group",children:[{label:"çº¢ç‚¹å¾½æ ‡",icon:"icon-list",badge:"dot",path:"/badge/dot"},{label:"æ•°å­—å¾½æ ‡",icon:"icon-example",badge:98,path:"/badge/count"}]},{type:"divider"},{path:"/article",label:"æ–‡ç« ç®¡ç†",icon:"icon-article",children:[{path:"/article/list",label:"æ–‡ç« åˆ—è¡¨",icon:"icon-article"},{path:"/article/create",label:"å‘å¸ƒæ–‡ç« ",hideInMenu:!0,parent:"/article/list"},{path:"/article/update",label:"æ›´æ–°æ–‡ç« ",hideInMenu:!0,parent:"/article/list"},{path:"/article/category",label:"åˆ†ç±»ç®¡ç†",icon:"icon-list"}]},{path:"/iframe",label:"å¤–éƒ¨é¡µé¢",icon:"icon-href",children:[{path:"https://ant-design.antgroup.com/components/overview-cn",label:"antdæ–‡æ¡£(å¤–é“¾)",icon:"icon-document",key:"webpage-antd-document",type:"url"},{path:"https://ant-design.antgroup.com/components/overview-cn/",label:"antdæ–‡æ¡£(å†…åµŒ)",icon:"icon-document",type:"iframe"},{path:"https://www.xstnet.com",label:"åšå®¢ä¸»é¡µ(å†…åµŒ)",icon:"icon-document",type:"iframe"},{path:"https://baidu.com",label:"ç™¾åº¦",icon:"icon-document",type:"iframe"}]},{path:"/document",label:"æ–‡æ¡£",icon:"icon-document",children:[{path:"/document/start",label:"å¼€å§‹ä½¿ç”¨",icon:"icon-document"},{path:"/document/package.json",label:"Packageæ–‡ä»¶è¯´æ˜",icon:"icon-document"}]},{type:"divider"},{path:"/user/center",label:"ä¸ªäººä¸­å¿ƒ",icon:"icon-user-permissions",children:[{path:"/user/center/index",label:"ä¸ªäººä¸­å¿ƒ",icon:"icon-example"},{path:"/user/center/update",label:"ä¿®æ”¹ä¿¡æ¯",icon:"icon-document"}]}];function ct(t){return!!(typeof t.children>"u"||Array.isArray(t.children)&&t.children.length===0)}function ye(t){return ve(t)?!1:!!(typeof t.children<"u"&&Array.isArray(t.children)&&t.children.length>0)}function ke(t){return typeof t.path=="string"&&typeof t.label=="string"}function ve(t){return typeof t.type<"u"&&t.type==="group"}function rn(t){return typeof t.type<"u"&&t.type==="divider"}const on=void 0,Q=s.createContext(on),ln=({children:t})=>{const n=s.useMemo(()=>Be,[Be]),[a,r]=s.useState(n),[o,l]=s.useState(!1),{mapPathToMenu:c,processedMenuList:i}=s.useMemo(()=>(()=>{const m=new Map,p=C=>(ke(C)&&(C.key=(C==null?void 0:C.key)||C.path),{...C}),b=C=>C.map(v=>{const f=p(v);return(ye(f)||ve(f))&&(f.children=b(f.children||[])),ke(f)&&m.set(f.path,f),f});return{processedMenuList:b(a),mapPathToMenu:m}})(),[a]),d=s.useMemo(()=>({menuList:i,setMenuList:r,menuCollapsed:o,setMenuCollapsed:l,mapPathToMenu:c}),[a,o]);return e(Q.Provider,{value:d,children:t})},R={pageTitle:"åå°ç®¡ç†ç³»ç»Ÿæ¨¡æ¿",pageTitlePrefix:"åå°ç®¡ç†",tokenKey:"Authorization",apiBaseUrl:"https://xstnet.github.io/react-admin-template/api",iconFontUrl:"//at.alicdn.com/t/c/font_3917407_68ll5mr3jkf.js"};function sn(t,n){localStorage.setItem(t,typeof n=="object"?JSON.stringify(n):n)}function cn(t){localStorage.setItem(R.tokenKey,typeof t=="object"?JSON.stringify(t):t)}function dt(t){return localStorage.getItem(t)}function dn(t){const n=localStorage.getItem(t);if(n!==null)return Number(n)}function un(t){const n=localStorage.getItem(t);if(n!==null)return n==="true"}function hn(t){const n=localStorage.getItem(t);if(n!==null)return JSON.parse(n)}function mn(t){return dt(t)!==null}function pn(t){localStorage.removeItem(t)}function fn(){localStorage.removeItem(R.tokenKey)}function gn(){localStorage.clear()}const w={set:sn,setToken:cn,has:mn,getString:dt,getObject:hn,getBoolean:un,getNumber:dn,remove:pn,removeToken:fn,clear:gn},ut=()=>{const[t,n]=s.useState(window.matchMedia("(prefers-color-scheme: dark)").matches);return s.useEffect(()=>{const r=o=>{console.log("chage",o.matches),o.matches?n(!0):n(!1)};return window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",r),()=>{window.matchMedia("(prefers-color-scheme: dark)").removeEventListener("change",r)}},[]),[t?"dark":"light"]},bn=void 0,yn=s.createContext(bn),kn=({children:t})=>{const{settings:{primaryColor:n,theme:a,compactMode:r,followSystemTheme:o}}=s.useContext(q),[l]=ut(),c={},i=()=>{const d=[];return o?d.push(l==="light"?j.defaultAlgorithm:j.darkAlgorithm):d.push(a==="light"?j.defaultAlgorithm:j.darkAlgorithm),console.log("algorighm",a,d),r&&d.push(j.compactAlgorithm),d};return e(yn.Provider,{value:c,children:e(Ve,{locale:Ct,theme:{algorithm:i(),token:{colorPrimary:n},components:{Button:{borderRadius:4,borderRadiusSM:2},Modal:{borderRadius:4,borderRadiusOuter:2}}},children:t})})},vn=void 0,q=s.createContext(vn),Cn=({children:t})=>{const n=s.useMemo(()=>{const c=w.getObject("settings")||{};return console.log("settingsCache",c),{theme:"light",compactMode:!1,followSystemTheme:!1,fixedHeader:!0,fixedMenu:!0,showFooter:!0,multitabMode:!1,primaryColor:"#00b96b",...c}},[]),[a,r]=s.useState(n),o=s.useCallback(c=>{const i={...a,...c};r(i),w.set("settings",i)},[a]),l={settings:a,setSetting:o};return e(q.Provider,{value:l,children:e(kn,{children:t})})},xn=void 0,Ce=s.createContext(xn),Sn=({children:t})=>{const[n,a]=s.useState(!1),[r,{toggleFullscreen:o}]=Ye(document.body),[l,c]=s.useState(null),i=s.useMemo(()=>({isLogin:n,setIsLogin:a,userInfo:l,setUserInfo:c,fullScreen:r,setFullScreen:o}),[n,l,r]);return e(Ce.Provider,{value:i,children:e(Cn,{children:e(ln,{children:t})})})},Tn=[[2,1,"åˆšåˆš"],[60,1,"%dç§’å‰"],[3600,60,"%dåˆ†é’Ÿå‰"],[86400,3600,"%då°æ—¶å‰"],[86400*30,3600*24,"%då¤©å‰"],[86400*30*12,3600*24*30,"%dæœˆå‰"],[1/0,3600*24*30*12,"%då¹´å‰"]],In=[[-60,1,"%dç§’å"],[-3600,60,"%dåˆ†é’Ÿå"],[-86400,3600,"%då°æ—¶å"],[-(86400*30),3600*24,"%då¤©å"],[-(86400*30*12),3600*24*30,"%dæœˆå"],[-1/0,3600*24*30*12,"%då¹´å"]],ht=({time:t,...n})=>{const a=Math.floor(new Date().getTime()/1e3),r=Math.floor(new Date(t).getTime()/1e3),o=a-r;if(isNaN(r))return e(A,{children:"time"});const l=o<-1?In:Tn;let c="";for(const[i,d,u]of l)if(Math.abs(o)<Math.abs(i)){const m=Math.floor(Math.abs(o)/d);c=u.replace("%d",String(m));break}return e(ce,{title:t,children:e("span",{...n,children:c})})};var Ie=(t=>(t[t.success=0]="success",t[t.noLogin=-10001]="noLogin",t[t.loginExpired=-10002]="loginExpired",t))(Ie||{}),mt=(t=>(t[t.male=1]="male",t[t.female=2]="female",t))(mt||{}),E=(t=>(t[t.incomplete=1]="incomplete",t[t.completed=2]="completed",t[t.deleted=10]="deleted",t))(E||{}),De=(t=>(t.day="YYYY-MM-DD",t.second="YYYY-MM-DD HH:mm:ss",t.minute="YYYY-MM-DD HH:mm",t.hour="YYYY-MM-DD HH",t))(De||{});function X(){}function ee(t,n){return Math.floor(Math.random()*(n-t+1))+t}const Mn=()=>{const t=[{title:"æ˜µç§°",dataIndex:"nickname",key:"nickname"},{title:"ç™»å½•IP",dataIndex:"loginIp",key:"loginIp"},{title:"ç™»å½•æ—¶é—´",dataIndex:"create_time",key:"create_time",render:a=>e(ht,{time:a})}],n=Array(5).fill({id:ee(10,1e5),userId:1,loginIp:"127.0.0.1",nickname:"admin",create_time:de().subtract(3,"second").format(De.second)});return e(K,{title:"ç™»å½•å†å²",extra:e(le,{to:"/",children:"æŸ¥çœ‹æ›´å¤š"}),children:e(we,{rowKey:()=>ee(10,1e5),pagination:!1,size:"small",columns:t,dataSource:n})})},te=()=>{const{token:t}=j.useToken();return t},Pn=L.Text,re=()=>de().format(De.second),Nn=()=>{const[t,n]=s.useState(0),{colorError:a}=te(),[r,o]=s.useState([{id:ee(100,1e9),name:"å…¨å±€æœç´¢",status:E.incomplete,create_time:re(),update_time:re()},{id:ee(100,1e9),name:"å¤štabå¸ƒå±€æ”¯æŒ",status:E.completed,create_time:re(),update_time:re()},{id:1,name:"è¿™æ˜¯ä¸€ä¸ªtodoä¾‹å­",status:E.completed,create_time:re(),update_time:re()}]),[l,c]=s.useState(""),i=()=>{l&&(o([{name:l,status:E.incomplete,id:ee(100,1e9),create_time:de().format("YYYY-MM-DD HH:MM:SS"),update_time:de().format("YYYY-MM-DD HH:MM:SS")},...r]),c(""))},d=(p,b)=>{o(r.map(k=>k.id!==p?k:{...k,status:b?E.completed:E.incomplete}))},u=(p,b)=>{console.log("iii",p,b),o(r.map(k=>k.id!==p?k:{...k,name:b}))},m=p=>{o(r.filter(b=>b.id!==p))};return e(K,{title:"å¾…åŠäº‹é¡¹",children:h(N,{direction:"vertical",style:{width:"100%"},children:[h(N.Compact,{style:{width:"100%",marginBottom:"16px"},children:[e(I,{value:l,onChange:p=>c(p.target.value),placeholder:"æ·»åŠ æ–°äº‹é¡¹",onPressEnter:i}),e(x,{onClick:i,type:"primary",icon:e(ue,{})})]}),r.map(({id:p,status:b,name:k})=>{const C=b===E.completed,v=t===p&&b===E.incomplete;return e(We,{onChange:({target:{checked:f}})=>d(p,f),checked:C,children:e(Pn,{type:C?"secondary":void 0,delete:C,onMouseEnter:()=>n(p),onMouseLeave:()=>n(0),editable:v?{onChange:f=>u(p,f)}:!1,children:h(N,{children:[k,v&&e(ce,{title:"åˆ é™¤",children:e(Le,{onClick:()=>m(p),style:{color:a}})})]})})},p)})]})})},wn=()=>{const[t,n]=s.useState("pv"),a=[{tab:"è®¿é—®é‡",key:"pv"},{tab:"IP",key:"ip"}],r={pv:{stroke:"#8884d8",fill:"#b5b1e6"},ip:{stroke:"#00b96b",fill:"#82ca9d"}},o=Array.from({length:7}).map((l,c)=>({name:de().subtract(c+1,"day").format("MM-DD"),pv:ee(1e3,1e4),ip:ee(100,1e3)})).reverse();return e(K,{activeTabKey:t,onTabChange:l=>n(l),tabList:a,children:e(Ge,{width:"100%",height:300,children:h(xt,{data:o,children:[e(St,{strokeDasharray:"3 3"}),e(Tt,{dataKey:"name"}),e(It,{}),e(Je,{wrapperStyle:{outline:"none"}}),e(Mt,{type:"monotone",strokeWidth:2,dataKey:t,stroke:r[t].stroke,fill:r[t].fill})]})})})},_e=[{name:"è§†é¢‘ç±»",value:400},{name:"å›¾æ–‡ç±»",value:300},{name:"èµ„è®¯ç±»",value:300}],qe=()=>e(A,{children:h("div",{children:[h(V,{gutter:24,children:[e(T,{span:6,children:e(K,{bordered:!1,children:e(pe,{title:"ä»Šæ—¥é”€å”®é¢",value:126560,precision:2,prefix:"$"})})}),e(T,{span:6,children:e(K,{bordered:!1,children:e(pe,{title:"ç¤ºä¾‹æŒ‡æ ‡",value:11.28,precision:2,prefix:e(xe,{}),suffix:"%"})})}),e(T,{span:6,children:e(K,{bordered:!1,children:e(pe,{title:"ç¤ºä¾‹æŒ‡æ ‡",value:11.28,precision:2,prefix:e(xe,{}),suffix:"%"})})}),e(T,{span:6,children:e(K,{bordered:!1,children:e(pe,{title:"ç¤ºä¾‹æŒ‡æ ‡",value:11.28,precision:2,valueStyle:{color:"#3f8600"},prefix:e(xe,{}),suffix:"%"})})})]}),e("br",{}),h(V,{gutter:16,children:[e(T,{span:18,style:{height:300},children:e(wn,{})}),e(T,{span:6,children:e(K,{title:"å†…å®¹å æ¯”",children:e(Ge,{width:"100%",height:300,children:h(Pt,{width:400,height:400,children:[e(Nt,{data:_e,dataKey:"value",nameKey:"name",cx:"50%",cy:"50%",outerRadius:90,label:!0,children:_e.map((t,n)=>e(wt,{fill:["#0088FE","#00C49F","#FFBB28"][n%3]},`cell-${n}`))}),e(Je,{wrapperStyle:{outline:"none"}})]})})})})]}),e("br",{}),h(V,{gutter:16,children:[e(T,{span:12,children:e(Nn,{})}),e(T,{span:12,children:e(Mn,{})})]})]})}),ze=()=>e("span",{children:"UserCenterPage"}),Ln=()=>e("span",{children:"UserCenterUpdatePage"});function An(t){var a;const{config:n}=t;console.group(`${(a=n.method)==null?void 0:a.toLocaleUpperCase()} ${n.url}`),console.log("Path:",n.url),console.log("Method:",n.method),console.log("Params:",n.params),console.log("StatusCode:",t.status),console.log("Response:",typeof t.data=="object"?Object.assign(Object.create(null),t.data):t.data),console.groupEnd()}const $n=10*1e3;W.defaults.baseURL=R.apiBaseUrl;W.defaults.headers.post["Content-Type"]="application/json; charset=utf-8";W.defaults.timeout=$n;W.interceptors.request.use(t=>(t.headers.Authorization=`Bearer ${w.getString(R.tokenKey)}`,t),t=>Promise.reject(t));W.interceptors.response.use(t=>{An(t);const n=t.data;return typeof n.code!="number"?(B.error("ç³»ç»Ÿé”™è¯¯",2),console.warn("apiè°ƒç”¨å¤±è´¥, æœªæ­£å¸¸è¿”å›æ•°æ®, url:",t.config.url,"data:",n,"response:",t),Promise.reject(t)):n.code===0?(t.config.method==="post"&&B.success(t.data.message),t):n.code===Ie.noLogin?(B.error("æ‚¨è¿˜æ²¡æœ‰ç™»å½•, å³å°†è·³è½¬åˆ°ç™»å½•é¡µé¢, è¯·ç¨å..."),w.remove(R.tokenKey),location.reload(),Promise.reject(n)):n.code===Ie.loginExpired?(B.error("ç™»å½•å·²å¤±æ•ˆ, å³å°†è·³è½¬åˆ°ç™»å½•é¡µé¢..."),w.remove(R.tokenKey),location.reload(),Promise.reject(n)):(B.error(n.message),Promise.reject(t))},t=>(typeof t.message=="string"&&t.message==="Network Error"?B.error("ç½‘ç»œé”™è¯¯, è¯·ç¨åå†è¯•!"):B.error("è¯·æ±‚å¤±è´¥, è¯·ç¨åå†è¯•"),console.log("Request error",t),console.groupEnd(),Promise.reject(t)));const Fn=(t,n,a)=>{const r=a||{};return r.params=n,W.get(t,r)},Un=(t,n,a)=>W.post(t,n,a),Dn=t=>W.request(t),$={get:Fn,post:Un,request:Dn},F=t=>t.then(n=>Promise.resolve(n.data.data)).catch(n=>Promise.reject(n)),Rn=t=>{const n=$.post("/login",t);return F(n)},On=t=>F($.get("/user/info",t)),En=t=>F($.post("/user/logout",t)),Bn=(t,n)=>F($.get("/user/list",{...t,...n})),_n=t=>F($.post("/user/create",t)),qn=t=>F($.post("/user/update",t)),zn=t=>F($.post("/user/delete",t)),Hn=(t,n)=>F($.get("/article/list",{...t,...n})),jn=t=>F($.get("/article/detail",t)),Kn=t=>F($.post("/article/create",t)),Vn=t=>F($.post("/article/update",t)),Yn=t=>F($.post("/article/delete",t));const pt=s.forwardRef(({state:t},n)=>{const[a]=y.useForm(),r=s.useRef(null);return s.useImperativeHandle(n,()=>({form:a,input:r.current}),[a,r]),e("div",{children:h(y,{form:a,labelCol:{span:3},name:"userForm",initialValues:t||void 0,children:[e(y.Item,{name:"username",label:"è´¦å·",rules:[{required:!0,message:"è¯·è¾“å…¥è´¦å·"}],children:e(I,{placeholder:"è¯·è¾“å…¥è´¦å·",ref:r})}),e(y.Item,{name:"password",label:"å¯†ç ",rules:[{required:!t,message:"è¯·è¾“å…¥å¯†ç "}],children:e(I.Password,{placeholder:t?"ä¸ä¿®æ”¹å¯†ç è¯·ç•™ç©º!":"è¯·è¾“å…¥å¯†ç "})}),e(y.Item,{name:"nickname",label:"æ˜µç§°",rules:[{required:!0,message:"è¯·è¾“å…¥æ˜µç§°"}],children:e(I,{placeholder:"è¯·è¾“å…¥æ˜µç§°"})}),e(y.Item,{name:"gender",label:"æ€§åˆ«",children:h(Z.Group,{children:[e(Z,{value:1,children:"ç”·"}),e(Z,{value:2,children:"å¥³"})]})}),e(y.Item,{name:"mobile",label:"æ‰‹æœºå·",children:e(I,{placeholder:"è¯·è¾“å…¥æ‰‹æœºå·"})}),e(y.Item,{name:"email",label:"é‚®ç®±",children:e(I,{placeholder:"è¯·è¾“å…¥é‚®ç®±"})})]})})}),Wn=({refreshList:t})=>{const[n,a]=s.useState(!1),{run:r,loading:o}=Y(_n,{manual:!0,debounceWait:100,onSuccess:()=>{var i;a(!1),(i=l.current)==null||i.form.resetFields(),t==null||t()}}),l=s.useRef(null);return h("div",{children:[e(x,{type:"primary",icon:e(ue,{}),onClick:()=>{a(!0),setTimeout(()=>{var i,d;(d=(i=l.current)==null?void 0:i.input)==null||d.focus()},100)},children:"æ–°å¢ç”¨æˆ·"}),e(Qe,{open:n,title:"æ·»åŠ ç”¨æˆ·",okText:"æ·»åŠ ",cancelText:"å–æ¶ˆ",confirmLoading:o,onCancel:()=>a(!1),onOk:()=>{var i;(i=l.current)==null||i.form.validateFields().then(d=>{r(d)}).catch(d=>console.log(d))},children:e(pt,{ref:l})})]})},Gn=({search:t,form:n})=>e(y,{form:n,name:"advanced_search",style:{paddingTop:16},onFinish:r=>{console.log("Received values of form: ",r)},children:h(V,{gutter:24,children:[e(T,{span:6,children:e(y.Item,{name:"username",label:"è´¦å·",children:e(I,{placeholder:"è´¦å·"})})}),e(T,{span:6,children:e(y.Item,{name:"mobile",label:"æ‰‹æœºå·",children:e(I,{placeholder:"æ‰‹æœºå·"})})}),e(T,{span:6,children:e(y.Item,{name:"email",label:"é‚®ç®±",children:e(I,{placeholder:"é‚®ç®±"})})}),h(T,{span:6,style:{textAlign:"right"},children:[e(x,{onClick:t.reset,children:"é‡ç½®"}),e(x,{style:{margin:"0 8px"},type:"primary",onClick:t.submit,children:"æŸ¥è¯¢"})]})]})}),ft=(t,n)=>{const a=Lt(t,n),{tableProps:r}=a,o={...r.pagination,showTotal:(i,d)=>`ç¬¬${d[0]}-${d[1]} æ¡/å…± ${i} æ¡`,hideOnSinglePage:!0};r.pagination=o;const l=r.onChange,c=(...i)=>{var v;let[d,u,m,p]=i,b=d,k,C;Object.keys(m).length>0&&(Array.isArray(m)?(C={},m.map(f=>{var g;C[(g=f.column)==null?void 0:g.dataIndex]=f.order})):C={[(v=m.column)==null?void 0:v.dataIndex]:m.order}),Object.keys(u).length>0&&(k=u,console.log("filterrrrrrrrrrrrr",u)),l(b,k,C)};return r.onChange=c,a.tableProps.size="small",a},Jn=({state:t,refreshList:n})=>{const[a,r]=s.useState(!1),{runAsync:o,loading:l}=Y(qn,{manual:!0,debounceWait:100}),c=s.useRef(null);return h(A,{children:[e(x,{icon:e(Ae,{}),size:"small",onClick:()=>{r(!0),setTimeout(()=>{var d,u;(u=(d=c.current)==null?void 0:d.input)==null||u.focus()},100)},children:"ç¼–è¾‘"}),e(Qe,{open:a,title:"æ›´æ–°ç”¨æˆ·ä¿¡æ¯",okText:"ä¿å­˜",cancelText:"å–æ¶ˆ",confirmLoading:l,onCancel:()=>r(!1),onOk:()=>{var d;(d=c.current)==null||d.form.validateFields().then(u=>{o({...u,id:t.id}).then(()=>{var m;r(!1),(m=c.current)==null||m.form.resetFields(),n==null||n()}).catch(X)}).catch(u=>console.log(u))},children:e(pt,{ref:c,state:t})})]})};const O=t=>{const{children:n,className:a="",style:r={},...o}=t,{colorBgContainer:l}=te(),c="content-box",i={backgroundColor:l};return e("div",{className:`${c} ${a}`,style:{...i,...r},...o,children:n})},Qn=()=>{var v;console.log("render ExampleUserListPage");const[t]=y.useForm(),[n,a]=s.useState([]),r=s.useRef();s.useEffect(()=>{r.current=new Map},[]);const{runAsync:o,loading:l}=Y(zn,{manual:!0,debounceWait:100}),{refresh:c,tableProps:i,search:d}=ft(Bn,{form:t}),u=()=>{d.reset(),d.submit()},m=f=>{var g;typeof f=="number"&&((g=r==null?void 0:r.current)==null||g.set(f,!0)),o({id:f}).then(()=>{typeof f=="object"&&a([]),c()}).finally(()=>{var S;return typeof f=="number"&&((S=r==null?void 0:r.current)==null?void 0:S.delete(f))})},p=s.useMemo(()=>[{title:"ID",dataIndex:"id"},{title:"è´¦å·",dataIndex:"username",render:(f,{avatar:g,username:S})=>h(A,{children:[" ",e($e,{src:g})," ",S]})},{title:"æ˜µç§°",dataIndex:"nickname"},{title:"æ€§åˆ«",dataIndex:"gender",render:f=>f===mt.male?e(Oe,{color:"blue",children:"ç”·"}):e(Oe,{color:"error",children:"å¥³"})},{title:"é‚®ç®±",dataIndex:"email"},{title:"æ‰‹æœºå·",dataIndex:"mobile",sorter:!0},{title:"æ³¨å†Œæ—¶é—´",dataIndex:"create_time",sorter:!0},{title:"æ“ä½œ",key:"operation",fixed:"right",render:(f,g)=>{var M;const{id:S}=g;return h(N,{children:[e(Se,{title:"ç¡®è®¤è¦åˆ é™¤è¿™æ¡æ•°æ®å—?",onConfirm:()=>m(S),children:e(x,{loading:(M=r==null?void 0:r.current)==null?void 0:M.has(S),icon:e(Le,{}),size:"small",danger:!0,children:"åˆ é™¤"})}),e(Jn,{state:g,refreshList:c})]})}}],[]),k={selectedRowKeys:n,onChange:f=>{console.log("selectedRowKeys changed: ",f),a(f)}},C=n.length>0;return h(A,{children:[h(O,{children:[e("div",{children:e(L.Title,{level:5,children:"æœç´¢"})}),e(Gn,{search:d,form:t})]}),e("br",{}),h(O,{children:[h("div",{className:"table-header",children:[e("div",{className:"left",children:e(L.Title,{level:5,children:"ç”¨æˆ·åˆ—è¡¨"})}),e("div",{className:"right",children:h(N,{size:"middle",children:[e(Se,{title:`ç¡®å®šè¦åˆ é™¤è¿™${n.length}æ¡æ•°æ®å—?`,onConfirm:()=>m(n),children:e(x,{type:"primary",danger:!0,disabled:!C,loading:l&&((v=r.current)==null?void 0:v.size)===0,children:"æ‰¹é‡åˆ é™¤"})}),e(Wn,{refreshList:u}),e(x,{type:"link",title:"ç‚¹å‡»åˆ·æ–°",onClick:c,icon:e(Xe,{})})]})})]}),e(we,{rowKey:"id",rowSelection:k,columns:p,...i})]})]})},ge=({title:t="ç©ºç™½é¡µ"})=>{const[n,a]=s.useState(0);return h(O,{style:{height:"500px"},children:[e(L.Title,{level:4,children:t}),h(L.Text,{children:["Count: ",n]}),e("br",{}),e(x,{onClick:r=>a(o=>o+1),children:"add"})]})},Xn=({search:t,form:n})=>e(y,{form:n,name:"advanced_search",style:{paddingTop:16},onFinish:r=>{console.log("Received values of form: ",r)},children:h(V,{gutter:24,children:[e(T,{span:6,children:e(y.Item,{name:"title",label:"ä¸»é¢˜",children:e(I,{placeholder:"æ ‡é¢˜"})})}),e(T,{span:6,children:e(y.Item,{name:"ahthor",label:"ä½œè€…",children:e(I,{placeholder:"ä½œè€…"})})}),e(T,{span:6,children:e(y.Item,{name:"create_time",label:"å‘å¸ƒæ—¶é—´",children:e(At.RangePicker,{})})}),h(T,{span:6,style:{textAlign:"right"},children:[e(x,{onClick:t.reset,children:"é‡ç½®"}),e(x,{style:{margin:"0 8px"},type:"primary",onClick:t.submit,children:"æŸ¥è¯¢"})]})]})});const He=()=>{console.log("render ArticleIndexPage");const[t]=y.useForm(),n=s.useRef();G(),s.useEffect(()=>{n.current=new Map},[]);const{runAsync:a}=Y(Yn,{manual:!0,debounceWait:100}),{refresh:r,tableProps:o,search:l}=ft(Hn,{form:t}),c=d=>{var u;(u=n==null?void 0:n.current)==null||u.set(d,!0),a({id:d}).then(r).finally(()=>{var m;return(m=n==null?void 0:n.current)==null?void 0:m.delete(d)})},i=s.useMemo(()=>[{title:"ID",dataIndex:"id"},{title:"å°é¢",dataIndex:"cover",render:d=>e($t,{width:80,height:45,style:{borderRadius:4},src:d})},{title:"æ ‡é¢˜",dataIndex:"title"},{title:"ç®€ä»‹",dataIndex:"description"},{title:"ä½œè€…",dataIndex:"author"},{title:"å‘å¸ƒæ—¶é—´",dataIndex:"create_time",sorter:!0},{title:"æ“ä½œ",key:"operation",fixed:"right",render:(d,u)=>{var p;const{id:m}=u;return h(N,{children:[e(Se,{title:"ç¡®è®¤è¦åˆ é™¤è¿™æ¡æ•°æ®å—?",onConfirm:()=>c(m),children:e(x,{loading:(p=n==null?void 0:n.current)==null?void 0:p.has(m),icon:e(Le,{}),size:"small",danger:!0,children:"åˆ é™¤"})}),e(le,{to:`/article/update/${m}`,children:e(x,{icon:e(Ae,{}),size:"small",children:"ç¼–è¾‘"})})]})}}],[]);return h(A,{children:[h(O,{children:[e("div",{children:e(L.Title,{level:5,children:"æœç´¢"})}),e(Xn,{search:l,form:t})]}),e("br",{}),h(O,{children:[h("div",{className:"table-header",children:[e("div",{className:"left",children:e(L.Title,{level:5,children:"æ–‡ç« åˆ—è¡¨"})}),e("div",{className:"right",children:h(N,{size:"middle",children:[e(le,{to:"/article/create",children:e(x,{type:"primary",icon:e(ue,{}),children:"å‘å¸ƒæ–‡ç« "})}),e(x,{type:"link",title:"ç‚¹å‡»åˆ·æ–°",onClick:r,icon:e(Xe,{})})]})})]}),e(we,{rowKey:"id",columns:i,...o})]})]})},Zn=()=>{const[t]=y.useForm(),n=G(),a="articleDraft",{loading:r,run:o}=Y(Kn,{manual:!0,debounceWait:200,onSuccess:()=>setTimeout(()=>{w.remove(a),n("/article/list")},200)}),l=w.getObject(a)||{},c=async()=>{const u=await t.validateFields();o(u)},i=()=>{const{cover:u,...m}=t.getFieldsValue();w.set(a,m),B.success("å·²ä¿å­˜åˆ°è‰ç¨¿ç®±")},d=u=>(console.log("Upload event:",u),Array.isArray(u)?u:u&&u.fileList);return h(O,{children:[e(L.Title,{level:3,children:"å‘å¸ƒæ–‡ç« "}),e(se,{}),e(y,{form:t,name:"createForm",labelCol:{span:3},initialValues:l,children:h(V,{gutter:36,children:[h(T,{span:16,children:[e(y.Item,{name:"title",label:"æ–‡ç« æ ‡é¢˜",rules:[{required:!0,message:"è¯·è¾“å…¥æ ‡é¢˜"}],children:e(I,{})}),e(y.Item,{label:"ç®€ä»‹",name:"description",children:e(I,{})}),e(y.Item,{label:"å†…å®¹",name:"content",rules:[{required:!0,message:"è¯·è¾“å…¥å†…å®¹"}],children:e(I.TextArea,{rows:20})}),e(y.Item,{wrapperCol:{offset:3},children:h(N,{children:[e(x,{icon:e(Ze,{}),onClick:c,loading:r,type:"primary",children:"å‘å¸ƒæ–‡ç« "}),e(x,{icon:e(Ft,{}),onClick:i,children:"ä¿å­˜ä¸ºè‰ç¨¿"})]})})]}),h(T,{span:8,children:[e(y.Item,{label:"å°é¢",name:"cover",getValueFromEvent:d,valuePropName:"fileList",children:e(et,{maxCount:1,listType:"picture-card",children:h("div",{children:[e(ue,{}),e("div",{style:{marginTop:8},children:"é€‰æ‹©å›¾ç‰‡"})]})})}),e(y.Item,{label:"æ ‡ç­¾",name:"tags",children:e(tt,{mode:"tags",placeholder:"æ–‡ç« æ ‡ç­¾"})}),e(y.Item,{label:"ä½œè€…",name:"author",rules:[{required:!0,message:"è¯·è¾“å…¥ä½œè€…"}],children:e(I,{})})]})]})})]})},ea=()=>{const[t]=y.useForm(),n=G(),a=Ut(),{loading:r,run:o}=Y(jn,{manual:!0,debounceWait:10,onSuccess:u=>t.setFieldsValue(u)});s.useEffect(()=>{o({id:a.id})},[a.id]);const{loading:l,run:c}=Y(Vn,{manual:!0,debounceWait:200,onSuccess:()=>setTimeout(()=>{n("/article/list")},200)}),i=async()=>{const u=await t.validateFields();c(u)},d=u=>(console.log("Upload event:",u),Array.isArray(u)?u:u&&u.fileList);return h(O,{children:[e(L.Title,{level:3,children:"æ›´æ–°æ–‡ç« "}),e(se,{}),e(Fe,{spinning:r,children:e(y,{form:t,name:"createForm",labelCol:{span:3},children:h(V,{gutter:36,children:[h(T,{span:16,children:[e(y.Item,{name:"title",label:"æ–‡ç« æ ‡é¢˜",rules:[{required:!0,message:"è¯·è¾“å…¥æ ‡é¢˜"}],children:e(I,{})}),e(y.Item,{label:"ç®€ä»‹",name:"description",children:e(I,{})}),e(y.Item,{label:"å†…å®¹",name:"content",rules:[{required:!0,message:"è¯·è¾“å…¥å†…å®¹"}],children:e(I.TextArea,{rows:20})}),e(y.Item,{wrapperCol:{offset:3},children:e(N,{children:e(x,{icon:e(Ze,{}),onClick:i,loading:l,type:"primary",children:"ä¿å­˜"})})})]}),h(T,{span:8,children:[e(y.Item,{label:"å°é¢",name:"cover",getValueFromEvent:d,valuePropName:"fileList",children:e(et,{maxCount:1,listType:"picture-card",children:h("div",{children:[e(ue,{}),e("div",{style:{marginTop:8},children:"é€‰æ‹©å›¾ç‰‡"})]})})}),e(y.Item,{label:"æ ‡ç­¾",name:"tags",children:e(tt,{mode:"tags",placeholder:"æ–‡ç« æ ‡ç­¾"})}),e(y.Item,{label:"ä½œè€…",name:"author",rules:[{required:!0,message:"è¯·è¾“å…¥ä½œè€…"}],children:e(I,{})})]})]})})})]})},ta=()=>{const{pathname:t}=ne();return e(Dt,{status:"404",title:"404",subTitle:`é¡µé¢ä¸å­˜åœ¨, å½“å‰è·¯ç”±: ${t}`,extra:e(x,{type:"primary",children:e(le,{to:"/",children:"è¿”å›é¦–é¡µ"})})})};const na=t=>{var p;const{title:n="Iframe Page",name:a="internal-iframe"}=t,r=s.useRef(null),[o,l]=s.useState(!0),[c]=he();s.useEffect(()=>{l(!0)},[c]);const i=c.get("url"),d=()=>{l(!1)},{mapPathToMenu:u}=s.useContext(Q),m=((p=u.get(i||""))==null?void 0:p.label)||"ç¬¬ä¸‰æ–¹é¡µé¢";return i?e(A,{children:e(O,{style:{height:"100%",padding:0},children:e(Fe,{wrapperClassName:"iframeSpin",spinning:o,tip:`æ­£åœ¨åŠ è½½${m}, è¯·ç¨å...`,children:e("iframe",{ref:r,width:"100%",height:"100%",onLoad:d,title:n,name:a,src:i})})})}):e(O,{children:e(nt,{message:"æ— æ•ˆçš„urlåœ°å€",type:"error"})})},_="/iframe",gt=t=>`${_}?url=${t}`;function aa(t){const n=t.split(".")[1];if(n)try{return JSON.parse(Rt(n))}catch(a){console.warn("Parse Token Error: ",a);return}}function Me(){var a;const t=w.getString(R.tokenKey);if(!t)return!1;const n=aa(t);return n!==void 0&&((a=n==null?void 0:n.data)==null?void 0:a.uid)>0&&n.exp>new Date().getTime()/1e3}const ra=({loading:t,title:n,delay:a})=>{const{settings:{theme:r}}=s.useContext(q);return e(Fe,{size:"large",spinning:t,tip:n,delay:a,wrapperClassName:`page-loading-spin-${r}`,children:e("div",{style:{height:"100vh",width:"100vw"}})})},oa=()=>{const[t,n]=at.useNotification(),a=w.getBoolean("dontShowCompactModeNotify"),{setSetting:r,settings:{compactMode:o}}=s.useContext(q),l=()=>{const c=`open${Date.now()}`,i=h(N,{children:[e(x,{type:"link",size:"small",onClick:()=>t.destroy(),children:"ä¸å†æç¤º"}),e(x,{type:"primary",size:"small",onClick:()=>{r({compactMode:!0}),t.destroy(c)},children:"å¼€å¯"})]});t.info({message:"å¼€å¯ç´§å‡‘å¸ƒå±€æ¨¡å¼",description:"æ£€æµ‹åˆ°æ‚¨çš„å±å¹•å°ºå¯¸è¿‡å°, æ˜¯å¦å¼€å¯ç´§å‡‘å¸ƒå±€æ¨¡å¼? æˆ–è€…æ‚¨ä¹Ÿå¯ä»¥é€‰æ‹©åœ¨è®¾ç½®ä¸­æ‰‹åŠ¨å¼€å¯",btn:i,key:c,onClose:()=>w.set("dontShowCompactModeNotify",!0)})};return s.useEffect(()=>{!a&&!o&&window.innerWidth<=1440&&l()},[]),n},la={addTab:X,removeTab:X,tabs:[],openTab:X,hasTab:()=>!1,setTabs:X,activeTab:"",tabEvent:rt(),addTabWithNavigate:X},me=s.createContext(la),sa=({children:t})=>{const[n,a]=s.useState([]),[r,o]=s.useState(""),l=s.useMemo(()=>rt(),[]),c=G(),i=s.useCallback(()=>{const m=v=>{v&&v!==r&&o(v)},p=v=>n.findIndex(f=>f.key===v)>-1,b=(v,f=!0)=>{p(v.key)||a(g=>[...g,{...v}]),f&&r!==v.key&&m(v.key)};return{openTab:m,addTab:b,removeTab:v=>{const f=n.findIndex(S=>S.key===v);if(f===-1)return;const g=n[f===0?1:f-1];a(S=>S.filter(M=>M.key!==v)),r===v&&g&&c(g.key),console.log("tabs",n)},hasTab:p,addTabWithNavigate:v=>{b(v,!0);const f=n.find(S=>S.key===v.key)||v;if(!f){console.log("æ ‡ç­¾é¡µä¸å­˜åœ¨");return}const g=f.key+(f.queryString||"");c(g)}}},[n,r]),d=s.useMemo(()=>i(),[i]),u=s.useMemo(()=>({tabs:n,setTabs:a,activeTab:r,tabEvent:l,...d}),[n,r]);return e(me.Provider,{value:u,children:t})};const be=new Map,Pe=t=>{t.map(n=>{ke(n)&&(n==null?void 0:n.type)==="url"||(ve(n)&&Pe(n.children||[]),(ye(n)||ct(n))&&(n.path&&be.set(n.path,n.label),n.children&&Pe(n.children||[])))})},ia=()=>{const{menuList:t}=s.useContext(Q),n=s.useMemo(()=>(be.clear(),Pe(t),be),[t]),a=ne(),[r]=he(),o=()=>{if(a.pathname===_){const i=r.get("url");if(i&&be.has(i))return[e(fe.Item,{children:e(le,{style:{color:"inherit"},to:gt(i),children:n.get(i)})},i)]}return[]},l=s.useMemo(()=>{const i=a.pathname.split("/").filter(d=>d);return i.map((d,u)=>{const m=`/${i.slice(0,u+1).join("/")}`;return n.has(m)?e(fe.Item,{children:u===i.length-1?e(le,{style:{color:"inherit"},to:m,children:n.get(m)}):n.get(m)},m):null})},[a]),c=[e(fe.Item,{children:e(Ot,{})},"home"),...l,...o()];return e(fe,{className:"breadcrumb",children:c})},bt=J.memo(ia),ca=({active:t,children:n,id:a,parentRef:r})=>{const[o]=s.useState(()=>document.createElement("div")),l=s.useRef(!1);return l.current=l.current||t,s.useEffect(()=>{var c,i;if(t)(c=r.current)==null||c.appendChild(o);else try{(i=r.current)==null||i.removeChild(o)}catch{}},[t,r,o]),s.useEffect(()=>{o.setAttribute("id",a)},[a,o]),s.useEffect(()=>()=>{var c;try{(c=r.current)==null||c.removeChild(o)}catch{}},[]),e(A,{children:l.current&&Et.createPortal(n,o)})};let je=1;const da=()=>{const t=Bt(),{pathname:n,search:a}=ne(),r=n===_?n+a:n,{tabs:o,tabEvent:l}=s.useContext(me),c=s.useRef(null),[i,d]=s.useState([]);return s.useEffect(()=>{const u=l.on("reload",m=>{console.log("åˆ·æ–°é¡µé¢:",m),d(i.map(p=>p.id!==m?p:{...p,key:++je}))});return()=>{u()}}),s.useEffect(()=>{if(console.log("chage",r,o),!r)return;const u=o.map(m=>m.key);d(m=>(m.find(b=>b.id===r)||m.push({id:r,element:t,key:++je}),m.filter(b=>u.includes(b.id)))),console.log("tabs",o,i)},[o]),h(A,{children:[e("div",{ref:c,className:"keep-alive"}),i.map(({id:u,element:m,key:p})=>e(ca,{active:u===r,parentRef:c,id:u,children:m},p))]})};const ua=()=>{const{pathname:t}=ne(),{tabs:n,activeTab:a,removeTab:r,tabEvent:o,addTabWithNavigate:l}=s.useContext(me),{colorPrimary:c}=te(),[i,d]=s.useState(!1),{colorBgLayout:u}=te(),m=v=>{v&&v!==t&&l({key:v,label:""})},p=(v,f)=>{f==="remove"&&r(v)},b=()=>{o.emit("reload",t)},k=v=>{const f=v;d(f),o.emit("fullScreen",f)},C=()=>h(N,{size:0,children:[e(ce,{title:"åˆ·æ–°å½“å‰é¡µé¢",children:e(x,{onClick:b,type:"link",style:{color:c},icon:e(_t,{})})}),(()=>i?e(ce,{title:"é€€å‡ºå…¨å±",children:e(x,{onClick:()=>k(!1),type:"link",style:{color:c},icon:e(lt,{})})}):e(ce,{title:"å…¨å±",children:e(x,{onClick:()=>k(!0),type:"link",style:{color:c},icon:e(st,{})})}))()]});return e(ot,{className:"tabs-wrapper",type:"editable-card",hideAdd:!0,activeKey:a,items:[...n],onChange:m,onEdit:p,tabBarExtraContent:e(C,{}),style:{backgroundColor:u,left:i?0:200}})};const ha=({children:t})=>{console.log("multitab Content render...");const{pathname:n,search:a}=ne(),{addTab:r,hasTab:o,openTab:l,tabs:c,tabEvent:i}=s.useContext(me),{mapPathToMenu:d}=s.useContext(Q),u=s.useRef(null),[m,{toggleFullscreen:p}]=Ye(u),{colorBgLayout:b}=te(),[k]=he(),C=qt(),v=g=>{var z;console.log("eeeeeeee",d);let S="";const M=g.split("/").filter(H=>H);for(let H=0;H<M.length;H++){const Re=`/${M.slice(0,H+1).join("/")}`;d.has(Re)&&(S=((z=d.get(Re))==null?void 0:z.label)||S)}return S},f=()=>{console.log("handleAddTab");let g=n;n===_&&(g=k.get("url")||"");const S=d.get(g),M=S?n===_?n+a:S.key:n;if(o(M)){l(M);return}if(!S||!S.path){let z=v(g);if(!z)z="404",n===_&&(z="Iframe é¡µé¢");else{const{params:{id:H=void 0}}=C.pop()||{params:{id:void 0}};H&&(z+=": "+H)}r({label:z,key:M,queryString:a,children:null});return}r({label:S.label,key:M,queryString:n===_?"":a,children:null})};return s.useEffect(()=>{if(n===_){f();return}f(),console.log("addddd",n)},[n,a]),s.useEffect(()=>{console.log("qqqqqqq",a)},[a]),s.useEffect(()=>{const g=i.on("fullScreen",S=>{p()});return()=>{g()}},[]),h(U.Content,{className:"content",ref:u,style:{backgroundColor:b},children:[c.length?e(ua,{}):null,c.length?e(bt,{}):null,e(da,{})]})},ma=J.memo(ha),yt=()=>{const{settings:{showFooter:t}}=s.useContext(q),{Text:n,Link:a}=L;return t?h(U.Footer,{style:{textAlign:"center",paddingBottom:4},children:[h(n,{type:"secondary",children:["React Admin Template",e(a,{href:"https://github.com/xstnet/react-admin-template",target:"_blank",style:{color:"inherit",marginLeft:5},children:e(zt,{})})]}),e("br",{}),e(a,{href:"https://github.com/xstnet",target:"_blank",children:e(n,{type:"secondary",children:"é†‰ä¸¶æ˜¥é£"})}),h(n,{type:"secondary",children:["Â©2023 Created by",e(a,{target:"_blank",href:"https://ant-design.antgroup.com/index-cn",style:{margin:"0 6px",color:"inherit"},children:"Ant Design"}),"V5"]})]}):null};const D=Ht({scriptUrl:R.iconFontUrl,extraCommonProps:{}}),pa=()=>{const{fullScreen:t,setFullScreen:n}=s.useContext(Ce),a=()=>{B.success(t?"å·²é€€å‡ºå…¨å±æ¨¡å¼":"è¿›å…¥å…¨å±æ¨¡å¼"),n(!t)};return t?e(lt,{title:"é€€å‡ºå…¨å±æ¨¡å¼",className:"action-icon",onClick:a}):e(st,{title:"è¿›å…¥å…¨å±æ¨¡å¼",className:"action-icon",onClick:a})},fa=()=>e(L.Link,{className:"action-icon",target:"_blank",style:{color:"inherit"},href:"https://github.com/xstnet/react-admin-template",children:e(jt,{})}),ga=()=>e(oe,{size:"small",itemLayout:"horizontal",dataSource:[{title:"å¼ ä¸‰ è¯„è®ºäº†ä½ ",desc:"è¯„è®ºå†…å®¹è¯„è®ºå†…å®¹è¯„è®ºå†…å®¹",createTime:"2023-04-06 15:39:00"},{title:"æ‚¨æœ‰3ä¸ªè®¢å•å¾…æ”¯ä»˜",desc:"è®¢å•1,è®¢å•2,è®¢å•3",createTime:"2023-04-05 15:39:00"},{title:"å¼ ä¸‰ çš„è¯·å‡ç”³è¯·éœ€è¦æ‚¨çš„å®¡æ‰¹",desc:"",createTime:"2023-04-01 12:08:00"},{title:"æœ¬å‘¨å‘¨æŠ¥å¾…å¡«å†™",createTime:"2023-03-02 10:55:00",desc:"è¯´æ˜"}],renderItem:n=>e(oe.Item,{children:e(oe.Item.Meta,{avatar:e($e,{size:48,icon:e(it,{})}),title:e("a",{href:"https://ant.design",children:n.title}),description:h("div",{children:[n.desc,n.desc&&e("br",{}),e(L.Text,{children:e(ht,{style:{fontSize:12},time:n.createTime})})]})})})}),ba=()=>e(oe,{size:"small",itemLayout:"horizontal",dataSource:[{title:"æ‚¨æœ‰ä¸€å°æ–°çš„é‚®ä»¶",type:"mail"},{title:"æ‚¨æœ‰3ä¸ªè®¢å•å¾…æ”¯ä»˜",type:"payment"},{title:"å¼ ä¸‰ çš„è¯·å‡ç”³è¯·éœ€è¦æ‚¨çš„å®¡æ‰¹",type:"workflow"},{title:"æœ¬å‘¨å‘¨æŠ¥å¾…å¡«å†™",type:"common"}],renderItem:n=>e(oe.Item,{children:e(oe.Item.Meta,{avatar:e(D,{style:{fontSize:30},type:`icon-${n.type}`}),title:e("a",{href:"https://ant.design",children:n.title}),description:"3å¤©å‰"})})}),ya=()=>h(A,{children:[e(ot,{centered:!0,style:{width:300},defaultActiveKey:"notify",items:[{key:"notify",label:"é€šçŸ¥(3)",children:e(ba,{})},{key:"message",label:"æ¶ˆæ¯(4)",children:e(ga,{})}],onChange:void 0,tabBarExtraContent:e(x,{type:"link",style:{marginRight:10},children:"æ¸…ç©º"})}),e(se,{style:{margin:"8px 0"}}),h(N,{split:e(se,{type:"vertical"}),style:{width:"100%",justifyContent:"center",marginBottom:0},children:[e(x,{type:"link",children:"å…¨éƒ¨å·²è¯»"}),e(x,{type:"link",children:"æŸ¥çœ‹æ›´å¤š"})]})]}),ka=t=>e(Te,{count:98,children:e(Kt,{arrow:!1,content:e(ya,{}),placement:"bottomRight",trigger:"click",children:e(D,{title:"é€šçŸ¥æé†’",type:"icon-notify",className:"action-icon"})})}),va=()=>e(D,{title:"æœç´¢",type:"icon-search",className:"action-icon"}),Ca=()=>{const{settings:{theme:t},setSetting:n}=s.useContext(q),a=()=>{n({followSystemTheme:!1,theme:t==="light"?"dark":"light"})};return t==="dark"?e(D,{onClick:a,title:"ä¸»é¢˜-æ·±è‰²æ¨¡å¼",type:"icon-theme-dark",className:"action-icon"}):e(D,{onClick:a,title:"ä¸»é¢˜-æ˜äº®æ¨¡å¼",type:"icon-theme-light",className:"action-icon"})};const xa=t=>{const n=["#1890ff","#722ed1","#eb2f96","#00b96b","#52c41a","#13c2c2","#1677ff","#f5222d","#fa8c16","#faad14"],{onChange:a,presetColors:r=n,defaultSelectedColor:o=""}=t,{value:l=o}=t,[c,i]=s.useState(l),d=u=>{i(u),a==null||a(u)};return e("div",{className:"theme-color-wrap",children:r.map(u=>e("div",{onClick:()=>d(u),className:"theme-color-item",style:{backgroundColor:u},title:u,children:c===u&&e(Vt,{className:"checked-icon"})},u))})},Sa=t=>{const{open:n,onClose:a=X}=t,{settings:r,setSetting:o}=s.useContext(q),[l]=y.useForm(),[c]=ut(),i=s.useMemo(()=>({...r,theme:r.followSystemTheme?"followSystem":r.theme}),[r]),d=(u,m)=>{const p={...u},{theme:b,fixedMenu:k,fixedHeader:C}=p;b&&(console.log("themeee",b),p.followSystemTheme=!1,b==="followSystem"&&(p.followSystemTheme=!0,p.theme=c)),k&&(p.fixedHeader=!0),C===!1&&(p.fixedMenu=!1),o(p),console.log("chage",u,m)};return Ue(()=>{l==null||l.setFieldsValue(i)},[i]),e(Yt,{title:"åå¥½è®¾ç½®",onClose:a,open:n,children:h(y,{name:"basic",labelCol:{span:5},wrapperCol:{span:19},initialValues:{...i},autoComplete:"off",onValuesChange:d,form:l,children:[e(y.Item,{label:"å¤–è§‚",name:"theme",children:h(Z.Group,{buttonStyle:"solid",children:[h(Z.Button,{value:"light",children:[e(D,{type:"icon-theme-light"})," æµ…è‰²"]}),h(Z.Button,{value:"dark",children:[e(D,{type:"icon-theme-dark"})," æ·±è‰²"]}),h(Z.Button,{value:"followSystem",children:[e(D,{type:"icon-followSystem"})," è·Ÿéšç³»ç»Ÿ"]})]})}),e(y.Item,{label:"ç´§å‡‘æ¨¡å¼",valuePropName:"checked",name:"compactMode",children:e(ie,{checkedChildren:"å¼€å¯",unCheckedChildren:"å…³é—­"})}),e(y.Item,{label:"ä¸»é¢˜è‰²",name:"primaryColor",children:e(xa,{defaultSelectedColor:r.primaryColor})}),e(se,{children:"å¸ƒå±€"}),e(y.Item,{help:"åŠŸèƒ½æ­£åœ¨å®Œå–„ä¸­",label:"å¤šæ ‡ç­¾é¡µ",valuePropName:"checked",name:"multitabMode",children:e(ie,{checkedChildren:"å¯ç”¨",unCheckedChildren:"å…³é—­"})}),e(y.Item,{label:"å›ºå®šå¤´éƒ¨",valuePropName:"checked",name:"fixedHeader",children:e(ie,{checkedChildren:"å¼€å¯",unCheckedChildren:"å…³é—­"})}),e(y.Item,{help:"å›ºå®šèœå•å¯ç”¨æ—¶, å¤´éƒ¨ä¹Ÿä¼šåŒæ­¥å›ºå®š",label:"å›ºå®šèœå•",valuePropName:"checked",name:"fixedMenu",children:e(ie,{checkedChildren:"å¼€å¯",unCheckedChildren:"å…³é—­"})}),e(y.Item,{valuePropName:"checked",label:"æ˜¾ç¤ºåº•éƒ¨",name:"showFooter",children:e(ie,{checkedChildren:"å¼€å¯",unCheckedChildren:"å…³é—­"})})]})})},Ta=t=>{const[n,a]=s.useState(!1);return h("div",{children:[e(Sa,{open:n,onClose:()=>{a(!1)}}),e(D,{onClick:()=>{a(!0)},title:"è®¾ç½®",type:"icon-setting",className:"action-icon"})]})},Ia=()=>{const{userInfo:t,setUserInfo:n,setIsLogin:a}=s.useContext(Ce),{menuCollapsed:r,setMenuCollapsed:o}=s.useContext(Q),{token:{colorBgContainer:l}}=j.useToken(),c=G(),i=()=>h("div",{className:"left",children:[h("div",{className:"logo",children:[e(D,{type:"icon-react",className:"logo-img"}),e("span",{className:"logo-text",children:"React Admin Template"})]}),e("div",{children:J.createElement(r?Wt:Gt,{onClick:()=>o(!r)})})]}),d=()=>{const u=()=>h(A,{children:[e(va,{}),e(ka,{}),e(pa,{}),e(fa,{}),e(Ca,{}),e(Ta,{})]}),m=[{label:e("a",{children:"ä¸ªäººä¸­å¿ƒ"}),icon:e(it,{}),key:"userCenter"},{label:e("a",{children:"ä¿®æ”¹èµ„æ–™"}),key:"update",icon:e(Ae,{})},{type:"divider"},{label:"é€€å‡º",icon:e(Qt,{}),key:"logout",onClick:()=>{En().then(()=>{w.removeToken(),a(!1),n(null),c("/login")})}}];return e("div",{className:"right",children:h(N,{size:"middle",children:[u(),e(Jt,{menu:{items:m},children:h(N,{className:"pointer",children:[e("span",{children:t==null?void 0:t.nickname}),e($e,{src:t==null?void 0:t.avatar})]})})]})})};return e(U.Header,{className:"header",style:{background:l},children:h(A,{children:[i(),d()]})})},kt=J.memo(Ia),Ma=()=>{const t=G(),{pathname:n}=ne(),[a,r]=s.useState(),{menuList:o,mapPathToMenu:l}=s.useContext(Q);let c="/dashboard",i=[],d=!1;const[u]=he();Ue(()=>{let b=l.get(n);if(!b){let k="";l.forEach(({path:C})=>{n.startsWith(C)&&C.length>k.length&&(k=C)}),k&&(b=l.get(k))}b&&(b!=null&&b.hideInMenu?r([b.parent]):r([n]))},[n]);const m=b=>{const k=l.get(b.key);if(console.log("clicked menu",b,k),!k){console.warn("æœªè·å–åˆ°èœå•ä¿¡æ¯");return}if(k.path!==n){if((k==null?void 0:k.type)==="url"){window.open(k.path,"_blank");return}if(document.title=`${R.pageTitlePrefix} - ${k.label}`,(k==null?void 0:k.type)==="iframe"){console.log("æ‰“å¼€iframeé¡µé¢"),t(gt(k.path));return}t(k.path)}},p=s.useMemo(()=>{const b=C=>C.badge?C.badge==="dot"?e(Te,{className:"menu-item-badge",offset:[6,0],dot:!0,children:C.label}):e(Te,{className:"menu-item-badge",offset:[15,0],count:C.badge,children:C.label}):C.label,k=(C,v)=>{const f=[];return!d&&v&&i.push(v.key),C.map(g=>{if(ke(g)&&(g.parent&&n.indexOf(g.path)===0&&(console.log("ccccccccccccccccccccc",g.parent),c=g.parent,d=!0),g.type==="iframe"&&(u.get("url")||"")===g.path&&(d=!0,c=g.key),g.hideInMenu))return;let S;if(rn(g))S={...g};else if(ve(g))S={...g},g.children&&g.children.length>0&&(S.children=k(g.children));else if(ye(g)||ct(g)){let{icon:M}=g;typeof M=="string"&&M.includes("icon-")&&(M=e(D,{type:M})),S={key:"",...g,icon:M,label:b(g),children:ye(g)?k(g.children,g):void 0},!d&&g.path===n&&(c=g.key,d=!0)}S&&(S.key=S.key,f.push(S))}),!d&&i.pop(),f};return k(o)},[o]);return e(Xt,{style:{height:"100%"},onClick:m,mode:"inline",defaultSelectedKeys:[c],selectedKeys:a,items:p,defaultOpenKeys:i})},Pa=J.memo(Ma);const vt=()=>{const{menuCollapsed:t}=s.useContext(Q),{colorBgContainer:n}=te();return e(U.Sider,{style:{background:n},trigger:null,className:"left-sider",collapsible:!0,collapsed:t,children:e(Pa,{})})};const Na=()=>(console.log("MultitabLayout render..."),e(sa,{children:h(U,{className:"multitab-layout",children:[e(kt,{}),h(U,{children:[e(vt,{}),h(U,{className:"content-layout",children:[e(ma,{}),e(yt,{})]})]})]})})),wa=J.memo(Na);const La=({children:t})=>(console.log("Tab Wrap Content render..."),e(U.Content,{className:"content",children:t})),Aa=J.memo(La);const $a=()=>(console.log("SingleLaylut render..."),h(U,{className:"single-tab-layout",children:[e(kt,{}),h(U,{children:[e(vt,{}),h(U,{className:"content-layout",children:[e(bt,{}),e(Aa,{children:e(Zt,{})}),e(yt,{})]})]})]}));const Fa=()=>{const[t,n]=s.useState(!0),{setIsLogin:a,setUserInfo:r}=s.useContext(Ce),{colorBgContainer:o}=te(),{settings:{multitabMode:l,fixedMenu:c,fixedHeader:i,theme:d}}=s.useContext(q),{menuCollapsed:u}=s.useContext(Q),m=G(),[p]=he();return console.log("global layout render..."),s.useEffect(()=>{if(!Me()){m("/login");return}console.log("effect validateToken"),On().then(b=>{if(n(!1),a(!0),r(b),p.has("ghpage")){const k=decodeURIComponent(p.get("ghpage"));m(k);return}}).catch(b=>{b instanceof en&&at.error({message:"ç½‘ç»œé”™è¯¯",description:"è·å–ç”¨æˆ·ä¿¡æ¯å¤±è´¥, æ— æ³•æ‰“å¼€é¡µé¢",duration:null,closeIcon:null})})},[]),Ue(()=>{Me()||m("/login")}),t?e(ra,{title:"é¡µé¢åŠ è½½ä¸­",loading:t}):h("div",{"data-fixed-menu":c?1:0,"data-menu-collapsed":u?1:0,"data-fixed-header":i?1:0,style:{background:o},className:`global-layout theme-${d}`,children:[l?e(wa,{}):e($a,{}),e(oa,{})]})},Ua=J.memo(Fa);const Da=()=>{const t=G(),{loading:n,run:a}=Y(Rn,{manual:!0,debounceWait:300,onSuccess:l=>{w.setToken(l.token),t("/dashboard")}});document.title=R.pageTitle;const r=l=>{a(l)};s.useEffect(()=>{Me()&&t("/dashboard")},[]);const o={remember:!0,username:"admin",password:"123456"};return e(A,{children:h(Ve,{theme:{algorithm:[j.defaultAlgorithm]},children:[e("div",{className:"bg-wrap"}),h(V,{className:"login-wrap",children:[e(T,{span:15,className:"login-banner"}),h(T,{span:9,className:"login-form-wrap",children:[e(L.Title,{style:{textAlign:"center"},children:"åå°ç®¡ç†ç³»ç»Ÿ"}),e("br",{}),h(y,{name:"loginForm",labelCol:{span:5},wrapperCol:{span:19},style:{maxWidth:600},initialValues:o,onFinish:r,autoComplete:"off",children:[e(y.Item,{label:"ç”¨æˆ·å",name:"username",rules:[{required:!0,message:"è¯·è¾“å…¥ç”¨æˆ·å!"}],children:e(I,{placeholder:"admin"})}),e(y.Item,{label:"å¯†ç ",name:"password",rules:[{required:!0,message:"è¯·è¾“å…¥å¯†ç !"}],children:e(I.Password,{placeholder:"123456"})}),e(y.Item,{name:"remember",valuePropName:"checked",wrapperCol:{offset:5},children:e(We,{children:"è®°ä½æˆ‘"})}),e(y.Item,{wrapperCol:{offset:5,span:16},children:e(x,{loading:n,type:"primary",htmlType:"submit",children:"ç™»å½•"})})]})]})]})]})})},Ra=()=>{const{removeTab:t,tabs:n,setTabs:a,addTabWithNavigate:r,addTab:o}=s.useContext(me),{settings:{multitabMode:l}}=s.useContext(q),{pathname:c}=ne(),i=d=>{var m;const u=n.findIndex(p=>p.key===c);if(typeof d=="number"){t((m=n[d])==null?void 0:m.key);return}if(u!==-1){if(d==="other"){a(n.filter(p=>p.key===c));return}if(d==="left"){a(n.filter((p,b)=>b>=u));return}if(d==="right"){a(n.filter((p,b)=>b<=u));return}}};return h(O,{children:[!l&&e(nt,{type:"error",message:"è¯·å¼€å¯å¤šæ ‡ç­¾æ¨¡å¼"}),e("br",{}),h(N,{children:[e(x,{disabled:!l,onClick:()=>{r({label:"æ§åˆ¶å°",key:"/dashboard"})},children:"æ‰“å¼€æ§åˆ¶å°æ ‡ç­¾é¡µ"}),e(x,{disabled:!l,onClick:()=>{o({label:"æ–‡ç« åˆ—è¡¨",key:"/article/list"},!1)},children:"åå°æ‰“å¼€æ–‡ç« åˆ—è¡¨"}),e(x,{disabled:!l,onClick:()=>{r({label:"ç¼–è¾‘æ–‡ç« ID: 1",key:"/article/update/1"})},children:"ç¼–è¾‘æ–‡ç« ID: 1"}),e(x,{disabled:!l,onClick:()=>{r({label:"ç¼–è¾‘æ–‡ç« ID: 2",key:"/article/update/2"})},children:"ç¼–è¾‘æ–‡ç« ID: 2"})]}),e(se,{}),h(N,{children:[e(x,{disabled:!l,onClick:i.bind(void 0,1),children:"å…³é—­ç¬¬äºŒä¸ªæ ‡ç­¾é¡µ"}),e(x,{disabled:!l,onClick:i.bind(void 0,"left"),children:"å…³é—­å·¦ä¾§æ ‡ç­¾é¡µ"}),e(x,{disabled:!l,onClick:i.bind(void 0,"right"),children:"å…³é—­å³ä¾§æ ‡ç­¾é¡µ"}),e(x,{disabled:!l,onClick:i.bind(void 0,"other"),children:"å…³é—­å…¶ä»–æ ‡ç­¾é¡µ"})]})]})};function Oa(){return[{path:"/login",element:e(Da,{})},{path:"/",element:e(Ua,{}),children:[{path:"/",element:e(qe,{})},{path:"/dashboard",element:e(qe,{})},{path:"/user",children:[{index:!0,element:e(ze,{})},{path:"/user/center/index",element:e(ze,{})},{path:"/user/center/update",element:e(Ln,{})}]},{path:"/example",children:[{path:"/example/userList",element:e(Qn,{})},{path:"/example/tabs/manage",element:e(Ra,{})}]},{path:"/article",children:[{index:!0,element:e(He,{})},{path:"/article/list",element:e(He,{})},{path:"/article/create",element:e(Zn,{})},{path:"/article/update/:id",element:e(ea,{})}]},{path:"/blank",element:e(ge,{})},{path:"/badge/dot",element:e(ge,{title:"çº¢ç‚¹å¾½æ ‡"})},{path:"/badge/count",element:e(ge,{title:"æ•°å­—å¾½æ ‡"})},{path:_,element:e(na,{})},{path:"/multilevel/menu/2/3",element:e(ge,{title:"ä¸‰çº§èœå•"})},{path:"*",element:e(ta,{})}]}]}function Ea(){s.useEffect(()=>{},[]);const t=tn(Oa(),{basename:"/react-admin-template/"});return e(Sn,{children:e(nn,{router:t})})}function Ke(t){const n=JSON.stringify({type:"JWT",alg:"HS256"}),a=Number((new Date().getTime()/1e3).toFixed(0)),r=JSON.stringify({iss:"github.com/xstnet",sub:"react-admin",iat:a,exp:a+86400*14,data:t}),o="H_97UyQUOmURnZdDwI0khuAt4Cmg";return`${Ee(n)}.${Ee(r)}.${o}`}P.mock(/api\/login/,"post",({body:t})=>{const{username:n,password:a}=JSON.parse(t);return n==="admin"?a!=="123456"?{code:-1,message:"å¯†ç é”™è¯¯"}:{code:0,message:"ç™»å½•æˆåŠŸ",data:{token:Ke({uid:1})}}:{code:0,message:"ç™»å½•æˆåŠŸ",data:{token:Ke({uid:ae.Random.natural(2,1e4)})}}});P.setup({timeout:100});P.mock(/api\/user\/info/,"get",t=>({code:0,message:"ok",data:{id:1,username:"admin",nickname:"é†‰ä¸¶æ˜¥é£",avatar:"https://www.xstnet.com/static/images/head.gif",password:"",gender:ae.Random.natural(1,2),email:"shantongxu@qq.com",mobile:"133xxxx3333"}}));P.mock(/api\/user\/logout/,"post",t=>({code:0,message:"é€€å‡ºæˆåŠŸ"}));P.mock(/api\/user\/list/,"get",t=>{const n=new URLSearchParams(t.url);let a=Number(n.has("pageSize")?n.get("pageSize"):10);const r={code:0,message:"ok",data:{total:100,[`list|${a}`]:[{"id|+1":a,username:"@first@last",nickname:"@cname",avatar:()=>ae.Random.dataImage("200x200"),email:"@email",mobile:()=>P.mock(/^1[3456789]\d{9}$/).replace(/^(\d{3})\d{4}(\d{4})$/,"$1****$2"),"gender|1-2":0,create_time:"@date(yyyy-MM-dd HH:MM:ss)"}]}};return P.mock(r)});P.mock(/api\/user\/create/,"post",t=>({code:0,message:"åˆ›å»ºæˆåŠŸ",data:{id:ae.Random.natural(100,9999)}}));P.mock(/api\/user\/update/,"post",t=>({code:0,message:"æ›´æ–°æˆåŠŸ"}));P.mock(/api\/user\/delete/,"post",t=>({code:0,message:"åˆ é™¤æˆåŠŸ"}));P.setup({timeout:100});P.mock(/api\/article\/detail/,"get",t=>(console.log("ğŸš€ ~ file: article.ts:7 ~ Mock.mock ~ options:",t),{code:0,message:"ok",data:{id:1,title:"ä¸»é¢˜",description:"é†‰ä¸¶æ˜¥é£",author:"é†‰ä¸¶æ˜¥é£",tags:[1,2],content:"content",create_time:ae.Random.datetime()}}));P.mock(/api\/article\/list/,"get",t=>{const n=new URLSearchParams(t.url);let a=Number(n.has("pageSize")?n.get("pageSize"):10);const r={code:0,message:"ok",data:{total:100,[`list|${a}`]:[{"id|+1":a,author:"@first@last",title:()=>P.Random.ctitle(5,20),description:"@cname",cover:()=>ae.Random.dataImage("480x270","å°é¢"),content:"@email",create_time:"@date(yyyy-MM-dd HH:MM:ss)"}]}};return P.mock(r)});P.mock(/api\/article\/create/,"post",t=>({code:0,message:"åˆ›å»ºæˆåŠŸ",data:{id:ae.Random.natural(100,9999)}}));P.mock(/api\/article\/update/,"post",t=>({code:0,message:"æ›´æ–°æˆåŠŸ"}));P.mock(/api\/article\/delete/,"post",t=>({code:0,message:"åˆ é™¤æˆåŠŸ"}));an.createRoot(document.getElementById("root")).render(e(Ea,{}));
