import{a as e,j as r,p as A,u as F,F as C,C as p,g as P}from"./index-c6a340d8.js";import{J as s,a4 as T,a5 as o,a0 as f,ap as D,B as l,r as h,e as N,a1 as O,aq as _,b as g,a8 as j,a9 as q,L as x,X as z,v as y,a2 as B,aa as E,ab as L}from"./vendor-697186c6.js";const R=({search:i,form:t})=>e(s,{form:t,name:"advanced_search",style:{paddingTop:16},onFinish:c=>{console.log("Received values of form: ",c)},children:r(T,{gutter:24,children:[e(o,{span:6,children:e(s.Item,{name:"title",label:"主题",children:e(f,{placeholder:"标题"})})}),e(o,{span:6,children:e(s.Item,{name:"ahthor",label:"作者",children:e(f,{placeholder:"作者"})})}),e(o,{span:6,children:e(s.Item,{name:"create_time",label:"发布时间",children:e(D.RangePicker,{})})}),r(o,{span:6,style:{textAlign:"right"},children:[e(l,{onClick:i.reset,children:"重置"}),e(l,{style:{margin:"0 8px"},type:"primary",onClick:i.submit,children:"查询"})]})]})}),J=()=>{console.log("render ArticleIndexPage");const[i]=s.useForm(),t=h.useRef();N(),h.useEffect(()=>{t.current=new Map},[]);const{runAsync:u}=O(A,{manual:!0,debounceWait:100}),{refresh:c,tableProps:I,search:b}=F(P,{form:i}),v=a=>{var d;(d=t==null?void 0:t.current)==null||d.set(a,!0),u({id:a}).then(c).finally(()=>{var n;return(n=t==null?void 0:t.current)==null?void 0:n.delete(a)})},k=h.useMemo(()=>[{title:"ID",dataIndex:"id"},{title:"封面",dataIndex:"cover",render:a=>e(_,{width:80,height:45,style:{borderRadius:4},src:a})},{title:"标题",dataIndex:"title"},{title:"简介",dataIndex:"description"},{title:"作者",dataIndex:"author"},{title:"发布时间",dataIndex:"create_time",sorter:!0},{title:"操作",key:"operation",fixed:"right",render:(a,d)=>{var m;const{id:n}=d;return r(g,{children:[e(j,{title:"确认要删除这条数据吗?",onConfirm:()=>v(n),children:e(l,{loading:(m=t==null?void 0:t.current)==null?void 0:m.has(n),icon:e(q,{}),size:"small",danger:!0,children:"删除"})}),e(x,{to:`/article/update/${n}`,children:e(l,{icon:e(z,{}),size:"small",children:"编辑"})})]})}}],[]);return r(C,{children:[r(p,{children:[e("div",{children:e(y.Title,{level:5,children:"搜索"})}),e(R,{search:b,form:i})]}),e("br",{}),r(p,{children:[r("div",{className:"table-header",children:[e("div",{className:"left",children:e(y.Title,{level:5,children:"文章列表"})}),e("div",{className:"right",children:r(g,{size:"middle",children:[e(x,{to:"/article/create",children:e(l,{type:"primary",icon:e(B,{}),children:"发布文章"})}),e(l,{type:"link",title:"点击刷新",onClick:c,icon:e(E,{})})]})})]}),e(L,{rowKey:"id",columns:k,...I})]})]})};export{J as default};
