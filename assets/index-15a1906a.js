import{j as Se,r as s,C as _e,z as pt,t as z,u as gt,T as Ie,d as re,a as j,L as te,b as Te,c as w,S as P,I,B as C,P as oe,e as He,D as Me,R as ze,A as ft,f as bt,X as yt,Y as kt,g as je,h as vt,i as K,k as S,l as ie,m as be,n as Ct,o as xt,p as St,q as Y,s as E,F as g,v as W,w as V,M as Ke,x as It,E as Pe,y as Ne,G as $e,H as ye,U as Ve,J as Tt,K as _,N as Mt,O as ne,Q as Ye,V as Pt,W as qe,Z as We,_ as Nt,$ as we,a0 as J,a1 as wt,a2 as pe,a3 as Ge,a4 as Lt,a5 as Je,a6 as At,a7 as $t,a8 as Ft,a9 as Qe,aa as q,ab as U,ac as Ut,ad as Dt,ae as Ot,af as Rt,ag as Bt,ah as ee,ai as Xe,aj as Ze,ak as ke,al as Et,am as _t,an as et,ao as Ht,ap as ae,aq as zt,ar as jt,as as Kt,at as Vt,au as Yt,av as ce,aw as qt,ax as Wt,ay as Gt,az as Jt,aA as Qt,aB as Xt,aC as M,aD as Q,aE as Fe,aF as Zt}from"./vendor-12ff5331.js";(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))r(l);new MutationObserver(l=>{for(const o of l)if(o.type==="childList")for(const u of o.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function a(l){const o={};return l.integrity&&(o.integrity=l.integrity),l.referrerPolicy&&(o.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?o.credentials="include":l.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(l){if(l.ep)return;l.ep=!0;const o=a(l);fetch(l.href,o)}})();const L=Se.Fragment,e=Se.jsx,m=Se.jsxs,Ue=[{label:"控制台",type:"group",children:[{label:"控制台",icon:"icon-dashboard",path:"/dashboard"}]},{label:"示例页面",type:"group",children:[{label:"列表页",icon:"icon-list",path:"/example/userList"},{label:"多级菜单",icon:"icon-list",path:"/multilevel/menu",children:[{label:"二级菜单",icon:"icon-list",path:"/multilevel/menu/2",children:[{label:"三级菜单",icon:"icon-list",path:"/multilevel/menu/2/3"}]}]},{label:"Tabs标签页",icon:"icon-list",path:"/example/tabs",children:[{label:"标签管理",icon:"icon-list",path:"/example/tabs/manage"}]},{label:"空白页",icon:"icon-example",path:"/blank"},{label:"404",icon:"icon-example",path:"/404"}]},{label:"徽标示例",type:"group",children:[{label:"红点徽标",icon:"icon-list",badge:"dot",path:"/badge/dot"},{label:"数字徽标",icon:"icon-example",badge:98,path:"/badge/count"}]},{type:"divider"},{path:"/article",label:"文章管理",icon:"icon-article",children:[{path:"/article/list",label:"文章列表",icon:"icon-article"},{path:"/article/create",label:"发布文章",hideInMenu:!0,parent:"/article/list"},{path:"/article/update",label:"更新文章",hideInMenu:!0,parent:"/article/list"},{path:"/article/category",label:"分类管理",icon:"icon-list"}]},{path:"/iframe",label:"外部页面",icon:"icon-href",children:[{path:"https://ant-design.antgroup.com/components/overview-cn/",label:"antd文档(外链)",icon:"icon-document",key:"webpage-antd-document",type:"url"},{path:"https://ant-design.antgroup.com/components/overview-cn/",label:"antd文档(内嵌)",icon:"icon-document",type:"iframe"},{path:"https://www.xstnet.com",label:"博客主页(内嵌)",icon:"icon-document",type:"iframe"}]},{path:"/document",label:"文档",icon:"icon-document",children:[{path:"/document/start",label:"开始使用",icon:"icon-document"},{path:"/document/package.json",label:"Package文件说明",icon:"icon-document"}]},{type:"divider"},{path:"/user/center",label:"个人中心",icon:"icon-user-permissions",children:[{path:"/user/center/index",label:"个人中心",icon:"icon-example"},{path:"/user/center/update",label:"修改信息",icon:"icon-document"}]}];function tt(t){return!!(typeof t.children>"u"||Array.isArray(t.children)&&t.children.length===0)}function me(t){return ge(t)?!1:!!(typeof t.children<"u"&&Array.isArray(t.children)&&t.children.length>0)}function he(t){return typeof t.path=="string"&&typeof t.label=="string"}function ge(t){return typeof t.type<"u"&&t.type==="group"}function en(t){return typeof t.type<"u"&&t.type==="divider"}const tn=void 0,X=s.createContext(tn),nn=({children:t})=>{const n=s.useMemo(()=>Ue,[Ue]),[a,r]=s.useState(n),[l,o]=s.useState(!1),{mapPathToMenu:u,processedMenuList:c}=s.useMemo(()=>(()=>{const h=new Map,p=v=>(he(v)&&(v.key=(v==null?void 0:v.key)||v.path),{...v}),f=v=>v.map(x=>{const k=p(x);return(me(k)||ge(k))&&(k.children=f(k.children||[])),he(k)&&h.set(k.path,k),k});return{processedMenuList:f(a),mapPathToMenu:h}})(),[a]),d=s.useMemo(()=>({menuList:c,setMenuList:r,menuCollapsed:l,setMenuCollapsed:o,mapPathToMenu:u}),[a,l]);return e(X.Provider,{value:d,children:t})},O={pageTitle:"后台管理系统模板",pageTitlePrefix:"后台管理",tokenKey:"Authorization",apiBaseUrl:"https://xstnet.github.io/react-admin-template/api",iconFontUrl:"//at.alicdn.com/t/c/font_3917407_68ll5mr3jkf.js"};function an(t,n){localStorage.setItem(t,typeof n=="object"?JSON.stringify(n):n)}function rn(t){localStorage.setItem(O.tokenKey,typeof t=="object"?JSON.stringify(t):t)}function nt(t){return localStorage.getItem(t)}function on(t){const n=localStorage.getItem(t);if(n!==null)return Number(n)}function ln(t){const n=localStorage.getItem(t);if(n!==null)return n==="true"}function sn(t){const n=localStorage.getItem(t);if(n!==null)return JSON.parse(n)}function cn(t){return nt(t)!==null}function dn(t){localStorage.removeItem(t)}function un(){localStorage.removeItem(O.tokenKey)}function mn(){localStorage.clear()}const N={set:an,setToken:rn,has:cn,getString:nt,getObject:sn,getBoolean:ln,getNumber:on,remove:dn,removeToken:un,clear:mn},at=()=>{const[t,n]=s.useState(window.matchMedia("(prefers-color-scheme: dark)").matches);return s.useEffect(()=>{const r=l=>{console.log("chage",l.matches),l.matches?n(!0):n(!1)};return window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",r),()=>{window.matchMedia("(prefers-color-scheme: dark)").removeEventListener("change",r)}},[]),[t?"dark":"light"]},hn=void 0,pn=s.createContext(hn),gn=({children:t})=>{const{settings:{primaryColor:n,theme:a,compactMode:r,followSystemTheme:l}}=s.useContext(H),[o]=at(),u={},c=()=>{const d=[];return l?d.push(o==="light"?z.defaultAlgorithm:z.darkAlgorithm):d.push(a==="light"?z.defaultAlgorithm:z.darkAlgorithm),console.log("algorighm",a,d),r&&d.push(z.compactAlgorithm),d};return e(pn.Provider,{value:u,children:e(_e,{locale:pt,theme:{algorithm:c(),token:{colorPrimary:n},components:{Button:{borderRadius:4,borderRadiusSM:2},Modal:{borderRadius:4,borderRadiusOuter:2}}},children:t})})},fn=void 0,H=s.createContext(fn),bn=({children:t})=>{const n=s.useMemo(()=>{const u=N.getObject("settings")||{};return console.log("settingsCache",u),{theme:"light",compactMode:!1,followSystemTheme:!1,fixedHeader:!0,fixedMenu:!0,showFooter:!0,multitabMode:!1,primaryColor:"#00b96b",...u}},[]),[a,r]=s.useState(n),l=s.useCallback(u=>{const c={...a,...u};r(c),N.set("settings",c)},[a]),o={settings:a,setSetting:l};return e(H.Provider,{value:o,children:e(gn,{children:t})})},yn=void 0,fe=s.createContext(yn),kn=({children:t})=>{const[n,a]=s.useState(!1),[r,{toggleFullscreen:l}]=gt(document.body),[o,u]=s.useState(null),c=s.useMemo(()=>({isLogin:n,setIsLogin:a,userInfo:o,setUserInfo:u,fullScreen:r,setFullScreen:l}),[n,o,r]);return e(fe.Provider,{value:c,children:e(bn,{children:e(nn,{children:t})})})},vn=[[2,1,"刚刚"],[60,1,"%d秒前"],[3600,60,"%d分钟前"],[86400,3600,"%d小时前"],[86400*30,3600*24,"%d天前"],[86400*30*12,3600*24*30,"%d月前"],[1/0,3600*24*30*12,"%d年前"]],Cn=[[-60,1,"%d秒后"],[-3600,60,"%d分钟后"],[-86400,3600,"%d小时后"],[-(86400*30),3600*24,"%d天后"],[-(86400*30*12),3600*24*30,"%d月后"],[-1/0,3600*24*30*12,"%d年后"]],rt=({time:t,...n})=>{const a=Math.floor(new Date().getTime()/1e3),r=Math.floor(new Date(t).getTime()/1e3),l=a-r;if(isNaN(r))return e(L,{children:"time"});const o=l<-1?Cn:vn;let u="";for(const[c,d,i]of o)if(Math.abs(l)<Math.abs(c)){const h=Math.floor(Math.abs(l)/d);u=i.replace("%d",String(h));break}return e(Ie,{title:t,children:e("span",{...n,children:u})})};var ve=(t=>(t[t.success=0]="success",t[t.noLogin=-10001]="noLogin",t[t.loginExpired=-10002]="loginExpired",t))(ve||{}),ot=(t=>(t[t.male=1]="male",t[t.female=2]="female",t))(ot||{}),B=(t=>(t[t.incomplete=1]="incomplete",t[t.completed=2]="completed",t[t.deleted=10]="deleted",t))(B||{}),Le=(t=>(t.day="YYYY-MM-DD",t.second="YYYY-MM-DD HH:mm:ss",t.minute="YYYY-MM-DD HH:mm",t.hour="YYYY-MM-DD HH",t))(Le||{});function lt(){}function G(t,n){return Math.floor(Math.random()*(n-t+1))+t}const xn=()=>{const t=[{title:"昵称",dataIndex:"nickname",key:"nickname"},{title:"登录IP",dataIndex:"loginIp",key:"loginIp"},{title:"登录时间",dataIndex:"create_time",key:"create_time",render:a=>e(rt,{time:a})}],n=Array(5).fill({id:G(10,1e5),userId:1,loginIp:"127.0.0.1",nickname:"admin",create_time:re().subtract(3,"second").format(Le.second)});return e(j,{title:"登录历史",extra:e(te,{to:"/",children:"查看更多"}),children:e(Te,{rowKey:()=>G(10,1e5),pagination:!1,size:"small",columns:t,dataSource:n})})},le=()=>{const{token:t}=z.useToken();return t},Sn=w.Text,Z=()=>re().format(Le.second),In=()=>{const[t,n]=s.useState(0),{colorError:a}=le(),[r,l]=s.useState([{id:G(100,1e9),name:"全局搜索",status:B.incomplete,create_time:Z(),update_time:Z()},{id:G(100,1e9),name:"多tab布局支持",status:B.completed,create_time:Z(),update_time:Z()},{id:1,name:"这是一个todo例子",status:B.completed,create_time:Z(),update_time:Z()}]),[o,u]=s.useState(""),c=()=>{o&&(l([{name:o,status:B.incomplete,id:G(100,1e9),create_time:re().format("YYYY-MM-DD HH:MM:SS"),update_time:re().format("YYYY-MM-DD HH:MM:SS")},...r]),u(""))},d=(p,f)=>{l(r.map(b=>b.id!==p?b:{...b,status:f?B.completed:B.incomplete}))},i=(p,f)=>{console.log("iii",p,f),l(r.map(b=>b.id!==p?b:{...b,name:f}))},h=p=>{l(r.filter(f=>f.id!==p))};return e(j,{title:"待办事项",children:m(P,{direction:"vertical",style:{width:"100%"},children:[m(P.Compact,{style:{width:"100%",marginBottom:"16px"},children:[e(I,{value:o,onChange:p=>u(p.target.value),placeholder:"添加新事项",onPressEnter:c}),e(C,{onClick:c,type:"primary",icon:e(oe,{})})]}),r.map(({id:p,status:f,name:b})=>{const v=f===B.completed,x=t===p&&f===B.incomplete;return e(He,{onChange:({target:{checked:k}})=>d(p,k),checked:v,children:e(Sn,{type:v?"secondary":void 0,delete:v,onMouseEnter:()=>n(p),onMouseLeave:()=>n(0),editable:x?{onChange:k=>i(p,k)}:!1,children:m(P,{children:[b,x&&e(Ie,{title:"删除",children:e(Me,{onClick:()=>h(p),style:{color:a}})})]})})},p)})]})})},Tn=()=>{const[t,n]=s.useState("pv"),a=[{tab:"访问量",key:"pv"},{tab:"IP",key:"ip"}],r={pv:{stroke:"#8884d8",fill:"#b5b1e6"},ip:{stroke:"#00b96b",fill:"#82ca9d"}},l=Array.from({length:7}).map((o,u)=>({name:re().subtract(u+1,"day").format("MM-DD"),pv:G(1e3,1e4),ip:G(100,1e3)})).reverse();return e(j,{activeTabKey:t,onTabChange:o=>n(o),tabList:a,children:e(ze,{width:"100%",height:300,children:m(ft,{data:l,children:[e(bt,{strokeDasharray:"3 3"}),e(yt,{dataKey:"name"}),e(kt,{}),e(je,{wrapperStyle:{outline:"none"}}),e(vt,{type:"monotone",strokeWidth:2,dataKey:t,stroke:r[t].stroke,fill:r[t].fill})]})})})},De=[{name:"视频类",value:400},{name:"图文类",value:300},{name:"资讯类",value:300}],Oe=()=>e(L,{children:m("div",{children:[m(K,{gutter:24,children:[e(S,{span:6,children:e(j,{bordered:!1,children:e(ie,{title:"今日销售额",value:126560,precision:2,prefix:"$"})})}),e(S,{span:6,children:e(j,{bordered:!1,children:e(ie,{title:"示例指标",value:11.28,precision:2,prefix:e(be,{}),suffix:"%"})})}),e(S,{span:6,children:e(j,{bordered:!1,children:e(ie,{title:"示例指标",value:11.28,precision:2,prefix:e(be,{}),suffix:"%"})})}),e(S,{span:6,children:e(j,{bordered:!1,children:e(ie,{title:"示例指标",value:11.28,precision:2,valueStyle:{color:"#3f8600"},prefix:e(be,{}),suffix:"%"})})})]}),e("br",{}),m(K,{gutter:16,children:[e(S,{span:18,style:{height:300},children:e(Tn,{})}),e(S,{span:6,children:e(j,{title:"内容占比",children:e(ze,{width:"100%",height:300,children:m(Ct,{width:400,height:400,children:[e(xt,{data:De,dataKey:"value",nameKey:"name",cx:"50%",cy:"50%",outerRadius:90,label:!0,children:De.map((t,n)=>e(St,{fill:["#0088FE","#00C49F","#FFBB28"][n%3]},`cell-${n}`))}),e(je,{wrapperStyle:{outline:"none"}})]})})})})]}),e("br",{}),m(K,{gutter:16,children:[e(S,{span:12,children:e(In,{})}),e(S,{span:12,children:e(xn,{})})]})]})}),Re=()=>e("span",{children:"UserCenterPage"}),Mn=()=>e("span",{children:"UserCenterUpdatePage"});function Pn(t){var a;const{config:n}=t;console.group(`${(a=n.method)==null?void 0:a.toLocaleUpperCase()} ${n.url}`),console.log("Path:",n.url),console.log("Method:",n.method),console.log("Params:",n.params),console.log("StatusCode:",t.status),console.log("Response:",typeof t.data=="object"?Object.assign(Object.create(null),t.data):t.data),console.groupEnd()}const Nn=10*1e3;Y.defaults.baseURL=O.apiBaseUrl;Y.defaults.headers.post["Content-Type"]="application/json; charset=utf-8";Y.defaults.timeout=Nn;Y.interceptors.request.use(t=>(t.headers.Authorization=`Bearer ${N.getString(O.tokenKey)}`,t),t=>Promise.reject(t));Y.interceptors.response.use(t=>{Pn(t);const n=t.data;return typeof n.code!="number"?(E.error("系统错误",2),console.warn("api调用失败, 未正常返回数据, url:",t.config.url,"data:",n,"response:",t),Promise.reject(t)):n.code===0?(t.config.method==="post"&&E.success(t.data.message),t):n.code===ve.noLogin?(E.error("您还没有登录, 即将跳转到登录页面, 请稍后..."),N.remove(O.tokenKey),location.reload(),Promise.reject(n)):n.code===ve.loginExpired?(E.error("登录已失效, 即将跳转到登录页面..."),N.remove(O.tokenKey),location.reload(),Promise.reject(n)):(E.error(n.message),Promise.reject(t))},t=>(typeof t.message=="string"&&t.message==="Network Error"?E.error("网络错误, 请稍后再试!"):E.error("请求失败, 请稍后再试"),console.log("Request error",t),console.groupEnd(),Promise.reject(t)));const wn=(t,n,a)=>{const r=a||{};return r.params=n,Y.get(t,r)},Ln=(t,n,a)=>Y.post(t,n,a),An=t=>Y.request(t),A={get:wn,post:Ln,request:An},$=t=>t.then(n=>Promise.resolve(n.data.data)).catch(n=>Promise.reject(n)),$n=t=>{const n=A.post("/login",t);return $(n)},Fn=t=>$(A.get("/user/info",t)),Un=t=>$(A.post("/user/logout",t)),Dn=(t,n)=>$(A.get("/user/list",{...t,...n})),On=t=>$(A.post("/user/create",t)),Rn=t=>$(A.post("/user/update",t)),Bn=t=>$(A.post("/user/delete",t)),En=(t,n)=>$(A.get("/article/list",{...t,...n})),_n=t=>$(A.get("/article/detail",t)),Hn=t=>$(A.post("/article/create",t)),zn=t=>$(A.post("/article/update",t)),jn=t=>$(A.post("/article/delete",t));const st=s.forwardRef(({state:t},n)=>{const[a]=g.useForm(),r=s.useRef(null);return s.useImperativeHandle(n,()=>({form:a,input:r.current}),[a,r]),e("div",{children:m(g,{form:a,labelCol:{span:3},name:"userForm",initialValues:t||void 0,children:[e(g.Item,{name:"username",label:"账号",rules:[{required:!0,message:"请输入账号"}],children:e(I,{placeholder:"请输入账号",ref:r})}),e(g.Item,{name:"password",label:"密码",rules:[{required:!t,message:"请输入密码"}],children:e(I.Password,{placeholder:t?"不修改密码请留空!":"请输入密码"})}),e(g.Item,{name:"nickname",label:"昵称",rules:[{required:!0,message:"请输入昵称"}],children:e(I,{placeholder:"请输入昵称"})}),e(g.Item,{name:"gender",label:"性别",children:m(W.Group,{children:[e(W,{value:1,children:"男"}),e(W,{value:2,children:"女"})]})}),e(g.Item,{name:"mobile",label:"手机号",children:e(I,{placeholder:"请输入手机号"})}),e(g.Item,{name:"email",label:"邮箱",children:e(I,{placeholder:"请输入邮箱"})})]})})}),Kn=({refreshList:t})=>{const[n,a]=s.useState(!1),{run:r,loading:l}=V(On,{manual:!0,debounceWait:100,onSuccess:()=>{var c;a(!1),(c=o.current)==null||c.form.resetFields(),t==null||t()}}),o=s.useRef(null);return m("div",{children:[e(C,{type:"primary",icon:e(oe,{}),onClick:()=>{a(!0),setTimeout(()=>{var c,d;(d=(c=o.current)==null?void 0:c.input)==null||d.focus()},100)},children:"新增用户"}),e(Ke,{open:n,title:"添加用户",okText:"添加",cancelText:"取消",confirmLoading:l,onCancel:()=>a(!1),onOk:()=>{var c;(c=o.current)==null||c.form.validateFields().then(d=>{r(d)}).catch(d=>console.log(d))},children:e(st,{ref:o})})]})},Vn=({search:t,form:n})=>e(g,{form:n,name:"advanced_search",style:{paddingTop:16},onFinish:r=>{console.log("Received values of form: ",r)},children:m(K,{gutter:24,children:[e(S,{span:6,children:e(g.Item,{name:"username",label:"账号",children:e(I,{placeholder:"账号"})})}),e(S,{span:6,children:e(g.Item,{name:"mobile",label:"手机号",children:e(I,{placeholder:"手机号"})})}),e(S,{span:6,children:e(g.Item,{name:"email",label:"邮箱",children:e(I,{placeholder:"邮箱"})})}),m(S,{span:6,style:{textAlign:"right"},children:[e(C,{onClick:t.reset,children:"重置"}),e(C,{style:{margin:"0 8px"},type:"primary",onClick:t.submit,children:"查询"})]})]})}),it=(t,n)=>{const a=It(t,n),{tableProps:r}=a,l={...r.pagination,showTotal:(c,d)=>`第${d[0]}-${d[1]} 条/共 ${c} 条`,hideOnSinglePage:!0};r.pagination=l;const o=r.onChange,u=(...c)=>{var x;let[d,i,h,p]=c,f=d,b,v;Object.keys(h).length>0&&(Array.isArray(h)?(v={},h.map(k=>{var y;v[(y=k.column)==null?void 0:y.dataIndex]=k.order})):v={[(x=h.column)==null?void 0:x.dataIndex]:h.order}),Object.keys(i).length>0&&(b=i,console.log("filterrrrrrrrrrrrr",i)),o(f,b,v)};return r.onChange=u,a.tableProps.size="small",a},Yn=({state:t,refreshList:n})=>{const[a,r]=s.useState(!1),{runAsync:l,loading:o}=V(Rn,{manual:!0,debounceWait:100}),u=s.useRef(null);return m(L,{children:[e(C,{icon:e(Pe,{}),size:"small",onClick:()=>{r(!0),setTimeout(()=>{var d,i;(i=(d=u.current)==null?void 0:d.input)==null||i.focus()},100)},children:"编辑"}),e(Ke,{open:a,title:"更新用户信息",okText:"保存",cancelText:"取消",confirmLoading:o,onCancel:()=>r(!1),onOk:()=>{var d;(d=u.current)==null||d.form.validateFields().then(i=>{l({...i,id:t.id}).then(()=>{var h;r(!1),(h=u.current)==null||h.form.resetFields(),n==null||n()}).catch(lt)}).catch(i=>console.log(i))},children:e(st,{ref:u,state:t})})]})};const R=t=>{const{children:n,className:a="",style:r={},...l}=t,{colorBgContainer:o}=le(),u="content-box",c={backgroundColor:o};return e("div",{className:`${u} ${a}`,style:{...c,...r},...l,children:n})},qn=()=>{var x;console.log("render ExampleUserListPage");const[t]=g.useForm(),[n,a]=s.useState([]),r=s.useRef();s.useEffect(()=>{r.current=new Map},[]);const{runAsync:l,loading:o}=V(Bn,{manual:!0,debounceWait:100}),{refresh:u,tableProps:c,search:d}=it(Dn,{form:t}),i=()=>{d.reset(),d.submit()},h=k=>{var y;typeof k=="number"&&((y=r==null?void 0:r.current)==null||y.set(k,!0)),l({id:k}).then(()=>{typeof k=="object"&&a([]),u()}).finally(()=>{var T;return typeof k=="number"&&((T=r==null?void 0:r.current)==null?void 0:T.delete(k))})},p=s.useMemo(()=>[{title:"ID",dataIndex:"id"},{title:"账号",dataIndex:"username",render:(k,{avatar:y,username:T})=>m(L,{children:[" ",e(Ne,{src:y})," ",T]})},{title:"昵称",dataIndex:"nickname"},{title:"性别",dataIndex:"gender",render:k=>k===ot.male?e($e,{color:"blue",children:"男"}):e($e,{color:"error",children:"女"})},{title:"邮箱",dataIndex:"email"},{title:"手机号",dataIndex:"mobile",sorter:!0},{title:"注册时间",dataIndex:"create_time",sorter:!0},{title:"操作",key:"operation",fixed:"right",render:(k,y)=>{var F;const{id:T}=y;return m(P,{children:[e(ye,{title:"确认要删除这条数据吗?",onConfirm:()=>h(T),children:e(C,{loading:(F=r==null?void 0:r.current)==null?void 0:F.has(T),icon:e(Me,{}),size:"small",danger:!0,children:"删除"})}),e(Yn,{state:y,refreshList:u})]})}}],[]),b={selectedRowKeys:n,onChange:k=>{console.log("selectedRowKeys changed: ",k),a(k)}},v=n.length>0;return m(L,{children:[m(R,{children:[e("div",{children:e(w.Title,{level:5,children:"搜索"})}),e(Vn,{search:d,form:t})]}),e("br",{}),m(R,{children:[m("div",{className:"table-header",children:[e("div",{className:"left",children:e(w.Title,{level:5,children:"用户列表"})}),e("div",{className:"right",children:m(P,{size:"middle",children:[e(ye,{title:`确定要删除这${n.length}条数据吗?`,onConfirm:()=>h(n),children:e(C,{type:"primary",danger:!0,disabled:!v,loading:o&&((x=r.current)==null?void 0:x.size)===0,children:"批量删除"})}),e(Kn,{refreshList:i}),e(C,{type:"link",title:"点击刷新",onClick:u,icon:e(Ve,{})})]})})]}),e(Te,{rowKey:"id",rowSelection:b,columns:p,...c})]})]})},de=({title:t="空白页"})=>{const[n,a]=s.useState(0);return m(R,{style:{height:"500px"},children:[e(w.Title,{level:4,children:t}),m(w.Text,{children:["Count: ",n]}),e("br",{}),e(C,{onClick:r=>a(l=>l+1),children:"add"})]})},Wn=({search:t,form:n})=>e(g,{form:n,name:"advanced_search",style:{paddingTop:16},onFinish:r=>{console.log("Received values of form: ",r)},children:m(K,{gutter:24,children:[e(S,{span:6,children:e(g.Item,{name:"title",label:"主题",children:e(I,{placeholder:"标题"})})}),e(S,{span:6,children:e(g.Item,{name:"ahthor",label:"作者",children:e(I,{placeholder:"作者"})})}),e(S,{span:6,children:e(g.Item,{name:"create_time",label:"发布时间",children:e(Tt.RangePicker,{})})}),m(S,{span:6,style:{textAlign:"right"},children:[e(C,{onClick:t.reset,children:"重置"}),e(C,{style:{margin:"0 8px"},type:"primary",onClick:t.submit,children:"查询"})]})]})});const Be=()=>{console.log("render ArticleIndexPage");const[t]=g.useForm(),n=s.useRef();_(),s.useEffect(()=>{n.current=new Map},[]);const{runAsync:a}=V(jn,{manual:!0,debounceWait:100}),{refresh:r,tableProps:l,search:o}=it(En,{form:t}),u=d=>{var i;(i=n==null?void 0:n.current)==null||i.set(d,!0),a({id:d}).then(r).finally(()=>{var h;return(h=n==null?void 0:n.current)==null?void 0:h.delete(d)})},c=s.useMemo(()=>[{title:"ID",dataIndex:"id"},{title:"封面",dataIndex:"cover",render:d=>e(Mt,{width:80,height:45,style:{borderRadius:4},src:d})},{title:"标题",dataIndex:"title"},{title:"简介",dataIndex:"description"},{title:"作者",dataIndex:"author"},{title:"发布时间",dataIndex:"create_time",sorter:!0},{title:"操作",key:"operation",fixed:"right",render:(d,i)=>{var p;const{id:h}=i;return m(P,{children:[e(ye,{title:"确认要删除这条数据吗?",onConfirm:()=>u(h),children:e(C,{loading:(p=n==null?void 0:n.current)==null?void 0:p.has(h),icon:e(Me,{}),size:"small",danger:!0,children:"删除"})}),e(te,{to:`/article/update/${h}`,children:e(C,{icon:e(Pe,{}),size:"small",children:"编辑"})})]})}}],[]);return m(L,{children:[m(R,{children:[e("div",{children:e(w.Title,{level:5,children:"搜索"})}),e(Wn,{search:o,form:t})]}),e("br",{}),m(R,{children:[m("div",{className:"table-header",children:[e("div",{className:"left",children:e(w.Title,{level:5,children:"文章列表"})}),e("div",{className:"right",children:m(P,{size:"middle",children:[e(te,{to:"/article/create",children:e(C,{type:"primary",icon:e(oe,{}),children:"发布文章"})}),e(C,{type:"link",title:"点击刷新",onClick:r,icon:e(Ve,{})})]})})]}),e(Te,{rowKey:"id",columns:c,...l})]})]})},Gn=()=>{const[t]=g.useForm(),n=_(),a="articleDraft",{loading:r,run:l}=V(Hn,{manual:!0,debounceWait:200,onSuccess:()=>setTimeout(()=>{N.remove(a),n("/article/list")},200)}),o=N.getObject(a)||{},u=async()=>{const i=await t.validateFields();l(i)},c=()=>{const{cover:i,...h}=t.getFieldsValue();N.set(a,h),E.success("已保存到草稿箱")},d=i=>(console.log("Upload event:",i),Array.isArray(i)?i:i&&i.fileList);return m(R,{children:[e(w.Title,{level:3,children:"发布文章"}),e(ne,{}),e(g,{form:t,name:"createForm",labelCol:{span:3},initialValues:o,children:m(K,{gutter:36,children:[m(S,{span:16,children:[e(g.Item,{name:"title",label:"文章标题",rules:[{required:!0,message:"请输入标题"}],children:e(I,{})}),e(g.Item,{label:"简介",name:"description",children:e(I,{})}),e(g.Item,{label:"内容",name:"content",rules:[{required:!0,message:"请输入内容"}],children:e(I.TextArea,{rows:20})}),e(g.Item,{wrapperCol:{offset:3},children:m(P,{children:[e(C,{icon:e(Ye,{}),onClick:u,loading:r,type:"primary",children:"发布文章"}),e(C,{icon:e(Pt,{}),onClick:c,children:"保存为草稿"})]})})]}),m(S,{span:8,children:[e(g.Item,{label:"封面",name:"cover",getValueFromEvent:d,valuePropName:"fileList",children:e(qe,{maxCount:1,listType:"picture-card",children:m("div",{children:[e(oe,{}),e("div",{style:{marginTop:8},children:"选择图片"})]})})}),e(g.Item,{label:"标签",name:"tags",children:e(We,{mode:"tags",placeholder:"文章标签"})}),e(g.Item,{label:"作者",name:"author",rules:[{required:!0,message:"请输入作者"}],children:e(I,{})})]})]})})]})},Jn=()=>{const[t]=g.useForm(),n=_(),a=Nt(),{loading:r,run:l}=V(_n,{manual:!0,debounceWait:10,onSuccess:i=>t.setFieldsValue(i)});s.useEffect(()=>{l({id:a.id})},[a.id]);const{loading:o,run:u}=V(zn,{manual:!0,debounceWait:200,onSuccess:()=>setTimeout(()=>{n("/article/list")},200)}),c=async()=>{const i=await t.validateFields();u(i)},d=i=>(console.log("Upload event:",i),Array.isArray(i)?i:i&&i.fileList);return m(R,{children:[e(w.Title,{level:3,children:"更新文章"}),e(ne,{}),e(we,{spinning:r,children:e(g,{form:t,name:"createForm",labelCol:{span:3},children:m(K,{gutter:36,children:[m(S,{span:16,children:[e(g.Item,{name:"title",label:"文章标题",rules:[{required:!0,message:"请输入标题"}],children:e(I,{})}),e(g.Item,{label:"简介",name:"description",children:e(I,{})}),e(g.Item,{label:"内容",name:"content",rules:[{required:!0,message:"请输入内容"}],children:e(I.TextArea,{rows:20})}),e(g.Item,{wrapperCol:{offset:3},children:e(P,{children:e(C,{icon:e(Ye,{}),onClick:c,loading:o,type:"primary",children:"保存"})})})]}),m(S,{span:8,children:[e(g.Item,{label:"封面",name:"cover",getValueFromEvent:d,valuePropName:"fileList",children:e(qe,{maxCount:1,listType:"picture-card",children:m("div",{children:[e(oe,{}),e("div",{style:{marginTop:8},children:"选择图片"})]})})}),e(g.Item,{label:"标签",name:"tags",children:e(We,{mode:"tags",placeholder:"文章标签"})}),e(g.Item,{label:"作者",name:"author",rules:[{required:!0,message:"请输入作者"}],children:e(I,{})})]})]})})})]})},Qn=()=>{const{pathname:t}=J();return e(wt,{status:"404",title:"404",subTitle:`页面不存在, 当前路由: ${t}`,extra:e(C,{type:"primary",children:e(te,{to:"/",children:"返回首页"})})})};const Xn=t=>{const{title:n="Iframe Page",name:a="internal-iframe"}=t,r=s.useRef(null),[l,o]=s.useState(!0),[u]=pe();s.useEffect(()=>{o(!0)},[u]);const c=u.get("url"),d=()=>{o(!1)};return c?e(L,{children:e(R,{style:{height:"100%",padding:0},children:e(we,{wrapperClassName:"iframeSpin",spinning:l,tip:"正在加载第三方页面, 请稍后...",children:e("iframe",{ref:r,width:"100%",height:"100%",onLoad:d,title:n,name:a,src:c})})})}):e(R,{children:e(Ge,{message:"无效的url地址",type:"error"})})},Ae="/iframe",ct=t=>`${Ae}?url=${t}`;function Zn(t){const n=t.split(".")[1];if(n)try{return JSON.parse(Lt(n))}catch(a){console.warn("Parse Token Error: ",a);return}}function Ce(){var a;const t=N.getString(O.tokenKey);if(!t)return!1;const n=Zn(t);return n!==void 0&&((a=n==null?void 0:n.data)==null?void 0:a.uid)>0&&n.exp>new Date().getTime()/1e3}const ea=({loading:t,title:n,delay:a})=>{const{settings:{theme:r}}=s.useContext(H);return e(we,{size:"large",spinning:t,tip:n,delay:a,wrapperClassName:`page-loading-spin-${r}`,children:e("div",{style:{height:"100vh",width:"100vw"}})})},ta=()=>{const[t,n]=Je.useNotification(),a=N.getBoolean("dontShowCompactModeNotify"),{setSetting:r,settings:{compactMode:l}}=s.useContext(H),o=()=>{const u=`open${Date.now()}`,c=m(P,{children:[e(C,{type:"link",size:"small",onClick:()=>t.destroy(),children:"不再提示"}),e(C,{type:"primary",size:"small",onClick:()=>{r({compactMode:!0}),t.destroy(u)},children:"开启"})]});t.info({message:"开启紧凑布局模式",description:"检测到您的屏幕尺寸过小, 是否开启紧凑布局模式? 或者您也可以选择在设置中手动开启",btn:c,key:u,onClose:()=>N.set("dontShowCompactModeNotify",!0)})};return s.useEffect(()=>{!a&&!l&&window.innerWidth<=1440&&o()},[]),n},na={},se=s.createContext(na),aa=({children:t})=>{const[n,a]=s.useState([]),[r,l]=s.useState(""),o=s.useMemo(()=>At(),[]),u=_(),c=s.useCallback(()=>{const h=x=>{x&&x!==r&&l(x)},p=x=>n.findIndex(k=>k.key===x)>-1,f=(x,k=!0)=>{p(x.key)||a(y=>[...y,{...x}]),k&&r!==x.key&&h(x.key)};return{openTab:h,addTab:f,removeTab:x=>{const k=n.findIndex(T=>T.key===x);if(k===-1)return;const y=n[k===0?1:k-1];a(T=>T.filter(F=>F.key!==x)),r===x&&y&&u(y.key),console.log("tabs",n)},hasTab:p,addTabWithNavigate:x=>{f(x,!0),u(x.key)}}},[n,r]),d=s.useMemo(()=>c(),[c]),i=s.useMemo(()=>({tabs:n,setTabs:a,activeTab:r,event:o,...d}),[n,r]);return e(se.Provider,{value:i,children:t})},ra=({active:t,children:n,id:a,parentRef:r})=>{const[l]=s.useState(()=>document.createElement("div")),o=s.useRef(!1);return o.current=o.current||t,s.useEffect(()=>{var u,c;if(t)(u=r.current)==null||u.appendChild(l);else try{(c=r.current)==null||c.removeChild(l)}catch{}},[t,r,l]),s.useEffect(()=>{l.setAttribute("id",a)},[a,l]),e(L,{children:o.current&&$t.createPortal(n,l)})};const oa=()=>{const t=Ft();console.log("elementelement",t);const n=Qe();console.log("matches",n);const{pathname:a}=J(),r=a,{tabs:l}=s.useContext(se),o=s.useRef(null),[u,c]=s.useState([]);return s.useEffect(()=>{if(console.log("chage",r,l),!r)return;const d=l.map(i=>i.key);c(i=>(i.find(p=>p.id===r)||i.push({id:r,element:t}),i.filter(p=>d.includes(p.id))))},[l]),m(L,{children:[e("div",{ref:o,className:"keep-alive"}),u.map(({id:d,element:i})=>e(ra,{active:d===r,parentRef:o,id:d,children:i},d))]})};const la=({children:t})=>{console.log("multitab Content render...");const{pathname:n}=J(),{addTab:a,hasTab:r,openTab:l}=s.useContext(se),{mapPathToMenu:o}=s.useContext(X),u=Qe(),c=i=>{var f;let h="";const p=i.split("/").filter(b=>b);for(let b=0;b<p.length;b++){const v=`/${p.slice(0,b+1).join("/")}`;o.has(v)&&(h=((f=o.get(v))==null?void 0:f.label)||h)}return h},d=()=>{console.log("handleAddTab");const i=n;if(r(i)){l(i);return}const h=o.get(n);if(!h||!h.path){let p=c(n);if(!p)p="404";else{const{params:{id:f=void 0}}=u.pop()||{params:{id:void 0}};f&&(p+=": "+f)}a({label:p,key:i,children:null});return}a({label:h.label,key:h.key,children:null})};return s.useEffect(()=>{d()},[n]),s.useEffect(()=>()=>{console.log("content destory")},[]),e(U.Content,{className:"content",children:e(oa,{})})},sa=q.memo(la),dt=()=>{const{settings:{showFooter:t}}=s.useContext(H),{Text:n,Link:a}=w;return t?m(U.Footer,{style:{textAlign:"center",paddingBottom:4},children:[m(n,{type:"secondary",children:["React Admin Template",e(a,{href:"https://github.com/xstnet/react-admin-template",target:"_blank",style:{color:"inherit",marginLeft:5},children:e(Ut,{})})]}),e("br",{}),e(a,{href:"https://github.com/xstnet",target:"_blank",children:e(n,{type:"secondary",children:"醉丶春风"})}),m(n,{type:"secondary",children:["©2023 Created by",e(a,{target:"_blank",href:"https://ant-design.antgroup.com/index-cn",style:{margin:"0 6px",color:"inherit"},children:"Ant Design"}),"V5"]})]}):null};const D=Dt({scriptUrl:O.iconFontUrl,extraCommonProps:{}}),ia=()=>{const{fullScreen:t,setFullScreen:n}=s.useContext(fe),a=()=>{E.success(t?"已退出全屏模式":"进入全屏模式"),n(!t)};return t?e(Ot,{title:"退出全屏模式",className:"action-icon",onClick:a}):e(Rt,{title:"进入全屏模式",className:"action-icon",onClick:a})},ca=()=>e(w.Link,{className:"action-icon",target:"_blank",style:{color:"inherit"},href:"https://github.com/xstnet/react-admin-template",children:e(Bt,{})}),da=()=>e(ee,{size:"small",itemLayout:"horizontal",dataSource:[{title:"张三 评论了你",desc:"评论内容评论内容评论内容",createTime:"2023-04-06 15:39:00"},{title:"您有3个订单待支付",desc:"订单1,订单2,订单3",createTime:"2023-04-05 15:39:00"},{title:"张三 的请假申请需要您的审批",desc:"",createTime:"2023-04-01 12:08:00"},{title:"本周周报待填写",createTime:"2023-03-02 10:55:00",desc:"说明"}],renderItem:n=>e(ee.Item,{children:e(ee.Item.Meta,{avatar:e(Ne,{size:48,icon:e(Xe,{})}),title:e("a",{href:"https://ant.design",children:n.title}),description:m("div",{children:[n.desc,n.desc&&e("br",{}),e(w.Text,{children:e(rt,{style:{fontSize:12},time:n.createTime})})]})})})}),ua=()=>e(ee,{size:"small",itemLayout:"horizontal",dataSource:[{title:"您有一封新的邮件",type:"mail"},{title:"您有3个订单待支付",type:"payment"},{title:"张三 的请假申请需要您的审批",type:"workflow"},{title:"本周周报待填写",type:"common"}],renderItem:n=>e(ee.Item,{children:e(ee.Item.Meta,{avatar:e(D,{style:{fontSize:30},type:`icon-${n.type}`}),title:e("a",{href:"https://ant.design",children:n.title}),description:"3天前"})})}),ma=()=>m(L,{children:[e(Ze,{centered:!0,style:{width:300},defaultActiveKey:"notify",items:[{key:"notify",label:"通知(3)",children:e(ua,{})},{key:"message",label:"消息(4)",children:e(da,{})}],onChange:void 0,tabBarExtraContent:e(C,{type:"link",style:{marginRight:10},children:"清空"})}),e(ne,{style:{margin:"8px 0"}}),m(P,{split:e(ne,{type:"vertical"}),style:{width:"100%",justifyContent:"center",marginBottom:0},children:[e(C,{type:"link",children:"全部已读"}),e(C,{type:"link",children:"查看更多"})]})]}),ha=t=>e(ke,{count:98,children:e(Et,{arrow:!1,content:e(ma,{}),placement:"bottomRight",trigger:"click",children:e(D,{title:"通知提醒",type:"icon-notify",className:"action-icon"})})}),pa=()=>e(D,{title:"搜索",type:"icon-search",className:"action-icon"}),ga=()=>{const{settings:{theme:t},setSetting:n}=s.useContext(H),a=()=>{n({followSystemTheme:!1,theme:t==="light"?"dark":"light"})};return t==="dark"?e(D,{onClick:a,title:"主题-深色模式",type:"icon-theme-dark",className:"action-icon"}):e(D,{onClick:a,title:"主题-明亮模式",type:"icon-theme-light",className:"action-icon"})};const fa=t=>{const n=["#1890ff","#722ed1","#eb2f96","#00b96b","#52c41a","#13c2c2","#1677ff","#f5222d","#fa8c16","#faad14"],{onChange:a,presetColors:r=n,defaultSelectedColor:l=""}=t,{value:o=l}=t,[u,c]=s.useState(o),d=i=>{c(i),a==null||a(i)};return e("div",{className:"theme-color-wrap",children:r.map(i=>e("div",{onClick:()=>d(i),className:"theme-color-item",style:{backgroundColor:i},title:i,children:u===i&&e(_t,{className:"checked-icon"})},i))})},ba=t=>{const{open:n,onClose:a=lt}=t,{settings:r,setSetting:l}=s.useContext(H),[o]=g.useForm(),[u]=at(),c=s.useMemo(()=>({...r,theme:r.followSystemTheme?"followSystem":r.theme}),[r]),d=(i,h)=>{const p={...i},{theme:f,fixedMenu:b,fixedHeader:v}=p;f&&(console.log("themeee",f),p.followSystemTheme=!1,f==="followSystem"&&(p.followSystemTheme=!0,p.theme=u)),b&&(p.fixedHeader=!0),v===!1&&(p.fixedMenu=!1),l(p),console.log("chage",i,h)};return et(()=>{o==null||o.setFieldsValue(c)},[c]),e(Ht,{title:"偏好设置",onClose:a,open:n,children:m(g,{name:"basic",labelCol:{span:5},wrapperCol:{span:19},initialValues:{...c},autoComplete:"off",onValuesChange:d,form:o,children:[e(g.Item,{label:"外观",name:"theme",children:m(W.Group,{buttonStyle:"solid",children:[m(W.Button,{value:"light",children:[e(D,{type:"icon-theme-light"})," 浅色"]}),m(W.Button,{value:"dark",children:[e(D,{type:"icon-theme-dark"})," 深色"]}),m(W.Button,{value:"followSystem",children:[e(D,{type:"icon-followSystem"})," 跟随系统"]})]})}),e(g.Item,{label:"紧凑模式",valuePropName:"checked",name:"compactMode",children:e(ae,{checkedChildren:"开启",unCheckedChildren:"关闭"})}),e(g.Item,{label:"主题色",name:"primaryColor",children:e(fa,{defaultSelectedColor:r.primaryColor})}),e(ne,{children:"布局"}),e(g.Item,{help:"功能正在完善中",label:"多标签页",valuePropName:"checked",name:"multitabMode",children:e(ae,{checkedChildren:"启用",unCheckedChildren:"关闭"})}),e(g.Item,{label:"固定头部",valuePropName:"checked",name:"fixedHeader",children:e(ae,{checkedChildren:"开启",unCheckedChildren:"关闭"})}),e(g.Item,{help:"固定菜单启用时, 头部也会同步固定",label:"固定菜单",valuePropName:"checked",name:"fixedMenu",children:e(ae,{checkedChildren:"开启",unCheckedChildren:"关闭"})}),e(g.Item,{valuePropName:"checked",label:"显示底部",name:"showFooter",children:e(ae,{checkedChildren:"开启",unCheckedChildren:"关闭"})})]})})},ya=t=>{const[n,a]=s.useState(!1);return m("div",{children:[e(ba,{open:n,onClose:()=>{a(!1)}}),e(D,{onClick:()=>{a(!0)},title:"设置",type:"icon-setting",className:"action-icon"})]})},ka=()=>{const{userInfo:t,setUserInfo:n,setIsLogin:a}=s.useContext(fe),{menuCollapsed:r,setMenuCollapsed:l}=s.useContext(X),{token:{colorBgContainer:o}}=z.useToken(),u=_(),c=()=>m("div",{className:"left",children:[m("div",{className:"logo",children:[e(D,{type:"icon-react",className:"logo-img"}),e("span",{className:"logo-text",children:"React Admin Template"})]}),e("div",{children:q.createElement(r?zt:jt,{onClick:()=>l(!r)})})]}),d=()=>{const i=()=>m(L,{children:[e(pa,{}),e(ha,{}),e(ia,{}),e(ca,{}),e(ga,{}),e(ya,{})]}),h=[{label:e("a",{children:"个人中心"}),icon:e(Xe,{}),key:"userCenter"},{label:e("a",{children:"修改资料"}),key:"update",icon:e(Pe,{})},{type:"divider"},{label:"退出",icon:e(Vt,{}),key:"logout",onClick:()=>{Un().then(()=>{N.removeToken(),a(!1),n(null),u("/login")})}}];return e("div",{className:"right",children:m(P,{size:"middle",children:[i(),e(Kt,{menu:{items:h},children:m(P,{className:"pointer",children:[e("span",{children:t==null?void 0:t.nickname}),e(Ne,{src:t==null?void 0:t.avatar})]})})]})})};return e(U.Header,{className:"header",style:{background:o},children:m(L,{children:[c(),d()]})})},ut=q.memo(ka),va=()=>{const t=_(),{pathname:n}=J(),[a,r]=s.useState(),{menuList:l,mapPathToMenu:o}=s.useContext(X);let u="/dashboard",c=[],d=!1;const[i]=pe();et(()=>{let f=o.get(n);if(!f){let b="";o.forEach(({path:v})=>{n.startsWith(v)&&v.length>b.length&&(b=v)}),b&&(f=o.get(b))}f&&(f!=null&&f.hideInMenu?r([f.parent]):r([n]))},[n]);const h=f=>{const b=o.get(f.key);if(console.log("clicked menu",f,b),!b){console.warn("未获取到菜单信息");return}if(b.path!==n){if((b==null?void 0:b.type)==="url"){window.open(b.path,"_blank");return}if(document.title=`${O.pageTitlePrefix} - ${b.label}`,(b==null?void 0:b.type)==="iframe"){console.log("打开iframe页面"),t(ct(b.path));return}t(b.path)}},p=s.useMemo(()=>{const f=v=>v.badge?v.badge==="dot"?e(ke,{className:"menu-item-badge",offset:[6,0],dot:!0,children:v.label}):e(ke,{className:"menu-item-badge",offset:[15,0],count:v.badge,children:v.label}):v.label,b=(v,x)=>{const k=[];return!d&&x&&c.push(x.key),v.map(y=>{if(he(y)&&(y.parent&&n.indexOf(y.path)===0&&(console.log("ccccccccccccccccccccc",y.parent),u=y.parent,d=!0),y.type==="iframe"&&(i.get("url")||"")===y.path&&(d=!0,u=y.key),y.hideInMenu))return;let T;if(en(y))T={...y};else if(ge(y))T={...y},y.children&&y.children.length>0&&(T.children=b(y.children));else if(me(y)||tt(y)){let{icon:F}=y;typeof F=="string"&&F.includes("icon-")&&(F=e(D,{type:F})),T={key:"",...y,icon:F,label:f(y),children:me(y)?b(y.children,y):void 0},!d&&y.path===n&&(u=y.key,d=!0)}T&&(T.key=T.key,k.push(T))}),!d&&c.pop(),k};return b(l)},[l]);return e(Yt,{style:{height:"100%"},onClick:h,mode:"inline",defaultSelectedKeys:[u],selectedKeys:a,items:p,defaultOpenKeys:c})},Ca=q.memo(va);const mt=()=>{const{menuCollapsed:t}=s.useContext(X),{colorBgContainer:n}=le();return e(U.Sider,{style:{background:n},trigger:null,className:"left-sider",collapsible:!0,collapsed:t,children:e(Ca,{})})};const ue=new Map,xe=t=>{t.map(n=>{he(n)&&(n==null?void 0:n.type)==="url"||(ge(n)&&xe(n.children||[]),(me(n)||tt(n))&&(n.path&&ue.set(n.path,n.label),n.children&&xe(n.children||[])))})},xa=()=>{const{menuList:t}=s.useContext(X),n=s.useMemo(()=>(ue.clear(),xe(t),ue),[t]),a=J(),[r]=pe(),l=()=>{if(a.pathname===Ae){const c=r.get("url");if(c&&ue.has(c))return[e(ce.Item,{children:e(te,{style:{color:"inherit"},to:ct(c),children:n.get(c)})},c)]}return[]},o=s.useMemo(()=>{const c=a.pathname.split("/").filter(d=>d);return c.map((d,i)=>{const h=`/${c.slice(0,i+1).join("/")}`;return n.has(h)?e(ce.Item,{children:i===c.length-1?e(te,{style:{color:"inherit"},to:h,children:n.get(h)}):n.get(h)},h):null})},[a]),u=[e(ce.Item,{children:e(qt,{})},"home"),...o,...l()];return e(ce,{className:"breadcrumb",children:u})},ht=q.memo(xa);const Sa=()=>{const t=_(),{pathname:n}=J(),{tabs:a,activeTab:r,removeTab:l}=s.useContext(se),{colorPrimary:o}=le(),u=h=>{h&&h!==n&&t(h)},c=(h,p)=>{p==="remove"&&l(h)},d=()=>{l(n),setTimeout(()=>{console.log("pathname",n),t(n)},10)},i=()=>e(P,{children:e(Ie,{title:"刷新当前页面",children:e(C,{onClick:d,type:"link",style:{color:o},icon:e(Wt,{})})})});return e(Ze,{className:"tabs-wrapper",type:"editable-card",hideAdd:!0,activeKey:r,items:[...a],onChange:u,onEdit:c,tabBarExtraContent:e(i,{})})};const Ia=()=>(console.log("MultitabLayout render..."),e(aa,{children:m(U,{className:"multitab-layout",children:[e(ut,{}),m(U,{children:[e(mt,{}),m(U,{className:"content-layout",children:[e(Sa,{}),e(ht,{}),e(sa,{}),e(dt,{})]})]})]})})),Ta=q.memo(Ia);const Ma=({children:t})=>(console.log("Content render..."),console.log("childdddddddd",t),e(U.Content,{className:"content",children:t})),Pa=q.memo(Ma);const Na=()=>(console.log("SingleLaylut render..."),m(U,{className:"single-tab-layout",children:[e(ut,{}),m(U,{children:[e(mt,{}),m(U,{className:"content-layout",children:[e(ht,{}),e(Pa,{children:e(Gt,{})}),e(dt,{})]})]})]}));const wa=()=>{const[t,n]=s.useState(!0),{setIsLogin:a,setUserInfo:r}=s.useContext(fe),{colorBgContainer:l}=le(),{settings:{multitabMode:o,fixedMenu:u,fixedHeader:c,theme:d}}=s.useContext(H),{menuCollapsed:i}=s.useContext(X),h=_(),[p]=pe();return console.log("global layout render..."),s.useEffect(()=>{Ce()&&Fn().then(f=>{if(n(!1),a(!0),r(f),p.has("ghpage")){const b=decodeURIComponent(p.get("ghpage"));h(b);return}}).catch(f=>{f instanceof Jt&&Je.error({message:"网络错误",description:"获取用户信息失败, 无法打开页面",duration:null,closeIcon:null})})},[]),Ce()?t?e(ea,{title:"页面加载中",loading:t}):m("div",{"data-fixed-menu":u?1:0,"data-menu-collapsed":i?1:0,"data-fixed-header":c?1:0,style:{background:l},className:`global-layout theme-${d}`,children:[o?e(Ta,{}):e(Na,{}),e(ta,{})]}):(h("/login"),null)},La=q.memo(wa);const Aa=()=>{const t=_(),{loading:n,run:a}=V($n,{manual:!0,debounceWait:300,onSuccess:o=>{N.setToken(o.token),t("/dashboard")}});document.title=O.pageTitle;const r=o=>{a(o)};s.useEffect(()=>{Ce()&&t("/dashboard")},[]);const l={remember:!0,username:"admin",password:"123456"};return e(L,{children:m(_e,{theme:{algorithm:[z.defaultAlgorithm]},children:[e("div",{className:"bg-wrap"}),m(K,{className:"login-wrap",children:[e(S,{span:15,className:"login-banner"}),m(S,{span:9,className:"login-form-wrap",children:[e(w.Title,{style:{textAlign:"center"},children:"后台管理系统"}),e("br",{}),m(g,{name:"loginForm",labelCol:{span:5},wrapperCol:{span:19},style:{maxWidth:600},initialValues:l,onFinish:r,autoComplete:"off",children:[e(g.Item,{label:"用户名",name:"username",rules:[{required:!0,message:"请输入用户名!"}],children:e(I,{placeholder:"admin"})}),e(g.Item,{label:"密码",name:"password",rules:[{required:!0,message:"请输入密码!"}],children:e(I.Password,{placeholder:"123456"})}),e(g.Item,{name:"remember",valuePropName:"checked",wrapperCol:{offset:5},children:e(He,{children:"记住我"})}),e(g.Item,{wrapperCol:{offset:5,span:16},children:e(C,{loading:n,type:"primary",htmlType:"submit",children:"登录"})})]})]})]})]})})},$a=()=>{const{removeTab:t,tabs:n,setTabs:a,addTabWithNavigate:r,addTab:l}=s.useContext(se),{settings:{multitabMode:o}}=s.useContext(H),{pathname:u}=J(),c=d=>{var h;const i=n.findIndex(p=>p.key===u);if(typeof d=="number"){t((h=n[d])==null?void 0:h.key);return}if(i!==-1){if(d==="other"){a(n.filter(p=>p.key===u));return}if(d==="left"){a(n.filter((p,f)=>f>=i));return}if(d==="right"){a(n.filter((p,f)=>f<=i));return}}};return m(R,{children:[!o&&e(Ge,{type:"error",message:"请开启多标签模式"}),e("br",{}),m(P,{children:[e(C,{disabled:!o,onClick:()=>{r({label:"控制台",key:"/dashboard"})},children:"打开控制台标签页"}),e(C,{disabled:!o,onClick:()=>{l({label:"文章列表",key:"/article/list"},!1)},children:"后台打开文章列表"}),e(C,{disabled:!o,onClick:()=>{r({label:"编辑文章ID: 1",key:"/article/update/1"})},children:"编辑文章ID: 1"}),e(C,{disabled:!o,onClick:()=>{r({label:"编辑文章ID: 2",key:"/article/update/2"})},children:"编辑文章ID: 2"})]}),e(ne,{}),m(P,{children:[e(C,{disabled:!o,onClick:c.bind(void 0,1),children:"关闭第二个标签页"}),e(C,{disabled:!o,onClick:c.bind(void 0,"left"),children:"关闭左侧标签页"}),e(C,{disabled:!o,onClick:c.bind(void 0,"right"),children:"关闭右侧标签页"}),e(C,{disabled:!o,onClick:c.bind(void 0,"other"),children:"关闭其他标签页"})]})]})};function Fa(){return[{path:"/login",element:e(Aa,{})},{path:"/",element:e(La,{}),children:[{path:"/",element:e(Oe,{})},{path:"/dashboard",element:e(Oe,{})},{path:"/user",children:[{index:!0,element:e(Re,{})},{path:"/user/center/index",element:e(Re,{})},{path:"/user/center/update",element:e(Mn,{})}]},{path:"/example",children:[{path:"/example/userList",element:e(qn,{})},{path:"/example/tabs/manage",element:e($a,{})}]},{path:"/article",children:[{index:!0,element:e(Be,{})},{path:"/article/list",element:e(Be,{})},{path:"/article/create",element:e(Gn,{})},{path:"/article/update/:id",element:e(Jn,{})}]},{path:"/blank",element:e(de,{})},{path:"/badge/dot",element:e(de,{title:"红点徽标"})},{path:"/badge/count",element:e(de,{title:"数字徽标"})},{path:Ae,element:e(Xn,{})},{path:"/multilevel/menu/2/3",element:e(de,{title:"三级菜单"})},{path:"*",element:e(Qn,{})}]}]}function Ua(){s.useEffect(()=>{},[]);const t=Qt(Fa(),{basename:"/react-admin-template/"});return e(kn,{children:e(Xt,{router:t})})}function Ee(t){const n=JSON.stringify({type:"JWT",alg:"HS256"}),a=Number((new Date().getTime()/1e3).toFixed(0)),r=JSON.stringify({iss:"github.com/xstnet",sub:"react-admin",iat:a,exp:a+86400*14,data:t}),l="H_97UyQUOmURnZdDwI0khuAt4Cmg";return`${Fe(n)}.${Fe(r)}.${l}`}M.mock(/api\/login/,"post",({body:t})=>{const{username:n,password:a}=JSON.parse(t);return n==="admin"?a!=="123456"?{code:-1,message:"密码错误"}:{code:0,message:"登录成功",data:{token:Ee({uid:1})}}:{code:0,message:"登录成功",data:{token:Ee({uid:Q.Random.natural(2,1e4)})}}});M.setup({timeout:100});M.mock(/api\/user\/info/,"get",t=>({code:0,message:"ok",data:{id:1,username:"admin",nickname:"醉丶春风",avatar:"https://www.xstnet.com/static/images/head.gif",password:"",gender:Q.Random.natural(1,2),email:"shantongxu@qq.com",mobile:"133xxxx3333"}}));M.mock(/api\/user\/logout/,"post",t=>({code:0,message:"退出成功"}));M.mock(/api\/user\/list/,"get",t=>{const n=new URLSearchParams(t.url);let a=Number(n.has("pageSize")?n.get("pageSize"):10);const r={code:0,message:"ok",data:{total:100,[`list|${a}`]:[{"id|+1":a,username:"@first@last",nickname:"@cname",avatar:()=>Q.Random.dataImage("200x200"),email:"@email",mobile:()=>M.mock(/^1[3456789]\d{9}$/).replace(/^(\d{3})\d{4}(\d{4})$/,"$1****$2"),"gender|1-2":0,create_time:"@date(yyyy-MM-dd HH:MM:ss)"}]}};return M.mock(r)});M.mock(/api\/user\/create/,"post",t=>({code:0,message:"创建成功",data:{id:Q.Random.natural(100,9999)}}));M.mock(/api\/user\/update/,"post",t=>({code:0,message:"更新成功"}));M.mock(/api\/user\/delete/,"post",t=>({code:0,message:"删除成功"}));M.setup({timeout:100});M.mock(/api\/article\/detail/,"get",t=>(console.log("🚀 ~ file: article.ts:7 ~ Mock.mock ~ options:",t),{code:0,message:"ok",data:{id:1,title:"主题",description:"醉丶春风",author:"醉丶春风",tags:[1,2],content:"content",create_time:Q.Random.datetime()}}));M.mock(/api\/article\/list/,"get",t=>{const n=new URLSearchParams(t.url);let a=Number(n.has("pageSize")?n.get("pageSize"):10);const r={code:0,message:"ok",data:{total:100,[`list|${a}`]:[{"id|+1":a,author:"@first@last",title:()=>M.Random.ctitle(5,20),description:"@cname",cover:()=>Q.Random.dataImage("480x270","封面"),content:"@email",create_time:"@date(yyyy-MM-dd HH:MM:ss)"}]}};return M.mock(r)});M.mock(/api\/article\/create/,"post",t=>({code:0,message:"创建成功",data:{id:Q.Random.natural(100,9999)}}));M.mock(/api\/article\/update/,"post",t=>({code:0,message:"更新成功"}));M.mock(/api\/article\/delete/,"post",t=>({code:0,message:"删除成功"}));Zt.createRoot(document.getElementById("root")).render(e(Ua,{}));
